/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2018 SAP SE. All rights reserved
 */
sap.ui.define(['./Factory'],function(F){"use strict";var U={getStorableAvailableActions:function(m){return m.filter(function(M){return M.key!==undefined;});},sortArrayAlphabetical:function(n){var l;try{l=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=='undefined'){var c=window.Intl.Collator(l,{numeric:true});n.sort(function(a,b){return c.compare(a,b);});}else{n.sort(function(a,b){return a.localeCompare(b,l,{numeric:true});});}}catch(e){}},retrieveNavigationTargets:function(s,a,A,c,S){var n={mainNavigation:undefined,ownNavigation:undefined,availableActions:[]};return new Promise(function(r){var x=F.getService("CrossApplicationNavigation");var u=F.getService("URLParsing");if(!x||!u){jQuery.sap.log.error("Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");return r(n);}var b=[s].concat(a);var p=b.map(function(d){return[{semanticObject:d,params:S?S[d]:undefined,appStateKey:A,ui5Component:c,sortResultsBy:"text"}];});x.getLinks(p).then(function(l){if(!l||!l.length){return r(n);}var C=x.hrefForExternal();if(C&&C.indexOf("?")!==-1){C=C.split("?")[0];}if(C){C+="?";}l[0][0].forEach(function(L){var o=u.parseShellHash(L.intent);var k=(o.semanticObject&&o.action)?o.semanticObject+"-"+o.action:undefined;var e=(L.tags&&L.tags.indexOf("superiorAction")>-1);if(L.intent.indexOf(C)===0){n.ownNavigation={key:k,href:L.intent,text:L.text,visible:true,isSuperiorAction:e};return;}if(o.action&&(o.action==='displayFactSheet')){n.mainNavigation={key:k,href:L.intent,text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("POPOVER_FACTSHEET"),visible:true,isSuperiorAction:e};return;}n.availableActions.push({key:k,href:L.intent,text:L.text,visible:true,isSuperiorAction:e});});var d=[];for(var i=1;i<b.length;i++){d=d.concat(l[i][0]);}d.forEach(function(L){var o=u.parseShellHash(L.intent);n.availableActions.push({key:(o.semanticObject&&o.action)?o.semanticObject+"-"+o.action:undefined,href:L.intent,text:L.text,visible:true,isSuperiorAction:(L.tags&&L.tags.indexOf("superiorAction")>-1)});});return r(n);},function(){jQuery.sap.log.error("'retrieveNavigationTargets' failed");return r(n);});});}};return U;},true);
