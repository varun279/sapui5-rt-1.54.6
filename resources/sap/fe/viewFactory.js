/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(['jquery.sap.global','sap/ui/model/json/JSONModel','sap/ui/core/mvc/View'],function(q,J,V){"use strict";function c(P){var s=P.viewName,A=P.appComponent,e=P.entitySet,m=P.viewData,M=P.model,o=M.getMetaModel(),d=new J(sap.ui.Device),b=new J(A.getMetadata().getManifest()),f=new J(m),g=Date.now(),C=null,h="",D=o.getETags(),u=Object.keys(D).sort(),E=false,S=P.viewId;E=u.every(function(U){if(D[U]){if(D[U].getTime){if(D[U].getTime()>g-60000){return false;}else{h+=U+" "+D[U].getTime()+" ";return true;}}else{h+=U+" "+D[U]+" ";return true;}}else{return false;}});if(h&&E){C={keys:[q.sap.hashCode(h.slice(0,-1))]};}d.setDefaultBindingMode("OneWay");return o.requestObject("/").then(function(){var i=p[s]&&p[s](o,e)||[],j=a(s);i.push.apply(i,a("loadFirst"));return Promise.all(i).then(function(){var k={type:"XML",async:true,preprocessors:{xml:{bindingContexts:{entitySet:e?o.createBindingContext("/"+e):null},models:{entitySet:o,'sap.ui.mdc.metaModel':o,'sap.fe.deviceModel':d,'manifest':b,'viewData':f}}},id:S,viewName:s,viewData:m,cache:C,height:"100%"};return A.runAsOwner(function(){var n=sap.ui.view(k);var r=A.getModel("sap.fe.i18n").getResourceBundle();j.push(Promise.resolve(r));return Promise.all(j).then(function(){return n.loaded();});});});});}var l={"loadFirst":["sap.ui.mdc"],"sap.fe.templates.ListReport":["sap.ui.core","sap.m","sap.ushell","sap.f","sap.ui.fl"],"sap.fe.templates.ObjectPage":["sap.ui.core","sap.m","sap.f","sap.uxap","sap.ui.layout"]};function a(s){var L=[];var b=l[s]||[];for(var i=0;i<b.length;i++){L.push(sap.ui.getCore().loadLibrary(b[i],{async:true}));}return L;}var p={"sap.fe.templates.ListReport":function(m,e){var s=m.getObject('/'+e+"/@com.sap.vocabularies.UI.v1.SelectionFields");var L=m.getObject('/'+e+"/@com.sap.vocabularies.UI.v1.LineItem");var C={};var P=[];var o={},A={};var b={},S={};var d,f,g;var i,j;function h(k){var u={},N;k=k.split("/").slice(0,-1).join("/");if(k.lastIndexOf("/")>0){u=h(k);}N=m.getObject(k);if(N.$kind==="NavigationProperty"&&N.$Type){u[N.$Type]=true;}return u;}function r(k){if(!o[k]){q.sap.log.debug("Requested: "+k,"PreTemplater");P.push(m.requestObject(k).then(function(u){var w;t(k);w=h(k);if(u.$kind==="NavigationProperty"&&u.$Type){w[u.$Type]=true;}return w;}));o[k]=true;}}function n(k){P.push(m.requestObject(k).then(function(u){if(u){if(u.Value&&u.Value.$Path&&u.Value.$Path.indexOf('/')>0){r(k+u.Value.$Path);}if(u.TargetValue&&u.TargetValue.$Path&&u.TargetValue.$Path.indexOf('/')>0){r(k+u.TargetValue.$Path);}if(u.fn&&u.fn.$Path&&u.fn.$Path.indexOf('/')>0){r(k+u.fn.$Path);}if(u.photo&&u.photo.$Path&&u.photo.$Path.indexOf('/')>0){r(k+u.photo.$Path);}if(u.role&&u.role.$Path&&u.role.$Path.indexOf('/')>0){r(k+u.role.$Path);}if(u.title&&u.title.$Path&&u.title.$Path.indexOf('/')>0){r(k+u.title.$Path);}if(u.org&&u.org.$Path&&u.org.$Path.indexOf('/')>0){r(k+u.org.$Path);}}return h(k);}));}function t(u){var w,x,y;var C;var k;if(!A[u]){w=m.getObject(u+"@");for(y in w){x=w[y];if(x.$Path&&x.$Path.indexOf('/')>0){r('/'+e+'/'+x.$Path);}else if(x.$Apply&&x.$Function==="odata.concat"){for(k=0;k<x.$Apply.length;k++){C=x.$Apply[k];if(C&&C.$Path&&C.$Path.indexOf('/')>0){r('/'+e+'/'+C.$Path);}}}}A[u]=true;}}if(s){for(i=0;i<s.length;i++){S=s[i];if(S.$PropertyPath&&S.$PropertyPath.indexOf('/')>0){r('/'+e+'/'+S.$PropertyPath);}}}if(L){for(i=0;i<L.length;i++){b=L[i];if(b.$Type==="com.sap.vocabularies.UI.v1.DataField"){if(b.Value.$Path&&b.Value.$Path.indexOf('/')>0){r('/'+e+'/'+b.Value.$Path);}else if(b.Value.$Path){t('/'+e+'/'+b.Value.$Path);}else if(b.Value.$Apply&&b.Value.$Function==="odata.concat"){for(j=0;j<b.Value.$Apply.length;j++){C=b.Value.$Apply[j];if(C&&C.$Path&&C.$Path.indexOf('/')>0){r('/'+e+'/'+C.$Path);}}}if(b.Label&&b.Label.$Path&&b.Label.$Path.indexOf('/')>0){r('/'+e+'/'+b.Label.$Path);}if(b.Criticality){if(b.Criticality.$Path&&b.Criticality.$Path.indexOf('/')>0){r('/'+e+'/'+b.Criticality.$Path);}if(b.CriticalityRepresentation&&b.CriticalityRepresentation.$Path&&b.CriticalityRepresentation.$Path.indexOf('/')>0){r('/'+e+'/'+b.CriticalityRepresentationType.$Path);}}if(b.IconUrl&&b.IconUrl.$Path&&b.IconUrl.$Path.indexOf('/')>0){r('/'+e+'/'+b.IconUrl.$Path);}}else if(b.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){if(b.SemanticObject.$Path&&b.SemanticObject.$Path.indexOf('/')>0){r('/'+e+'/'+b.SemanticObject.$Path);}if(b.Action&&b.Action.$Path&&b.Action.$Path.indexOf('/')>0){r('/'+e+'/'+b.Action.$Path);}if(b.Value.$Path&&b.Value.$Path.indexOf('/')>0){r('/'+e+'/'+b.Value.$Path);}else if(b.Value.$Path){t('/'+e+'/'+b.Value.$Path);}else if(b.Value.$Apply&&b.Value.$Function==="odata.concat"){for(j=0;j<b.Value.$Apply.length;j++){C=b.Value.$Apply[j];if(C&&C.$Path&&C.$Path.indexOf('/')>0){r('/'+e+'/'+C.$Path);}}}if(b.Label&&b.Label.$Path&&b.Label.$Path.indexOf('/')>0){r('/'+e+'/'+b.Label.$Path);}if(b.Criticality){if(b.Criticality.$Path&&b.Criticality.$Path.indexOf('/')>0){r('/'+e+'/'+b.Criticality.$Path);}if(b.CriticalityRepresentation&&b.CriticalityRepresentation.$Path&&b.CriticalityRepresentation.$Path.indexOf('/')>0){r('/'+e+'/'+b.CriticalityRepresentationType.$Path);}}if(b.IconUrl&&b.IconUrl.$Path&&b.IconUrl.$Path.indexOf('/')>0){r('/'+e+'/'+b.IconUrl.$Path);}}else if(b.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(b.Value.$Path&&b.Value.$Path.indexOf('/')>0){r('/'+e+'/'+b.Value.$Path);}else if(b.Value.$Path){t('/'+e+'/'+b.Value.$Path);}else if(b.Value.$Apply&&b.Value.$Function==="odata.concat"){for(j=0;j<b.Value.$Apply.length;j++){C=b.Value.$Apply[j];if(C&&C.$Path&&C.$Path.indexOf('/')>0){r('/'+e+'/'+C.$Path);}}}if(b.Label&&b.Label.$Path&&b.Label.$Path.indexOf('/')>0){r('/'+e+'/'+b.Label.$Path);}if(b.Url.$Path&&b.Url.$Path.indexOf('/')>0){r('/'+e+'/'+b.Url.$Path);}else if(b.Url.$Apply){d=b.Url.$Apply;if(b.Url.$Function==="odata.fillUriTemplate"){if(d[0].$Path&&d[0].$Path.indexOf('/')>0){r('/'+e+'/'+d[0].$Path);}for(j=1;j<d.length;j++){f=d[j].$LabeledElement;if(f&&f.$Path&&f.$Path.indexOf('/')>0){r('/'+e+'/'+f.$Path);}else if(f&&f.$Apply&&f.$Function==="odata.uriEncode"){g=f.$Apply[0];if(g.$Path&&g.$Path.indexOf('/')>0){r('/'+e+'/'+g.$Path);}}}}else if(b.Url.$Function==="odata.concat"){for(j=0;j<b.Value.$Apply.length;j++){C=b.Value.$Apply[j];if(C&&C.$Path&&C.$Path.indexOf('/')>0){r('/'+e+'/'+C.$Path);}}}}}else if(b.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(b.SemanticObject.$Path&&b.SemanticObject.$Path.indexOf('/')>0){r('/'+e+'/'+b.SemanticObject.$Path);}if(b.Action&&b.Action.$Path&&b.Action.$Path.indexOf('/')>0){r('/'+e+'/'+b.Action.$Path);}if(b.RequiresContext&&b.RequiresContext.$Path&&b.RequiresContext.$Path.indexOf('/')>0){r('/'+e+'/'+b.RequiresContext.$Path);}}else if(b.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(b.Target.$AnnotationPath&&b.Target.$AnnotationPath.indexOf('/')>0){n('/'+e+'/'+b.Target.$AnnotationPath);}if(b.Label&&b.Label.$Path&&b.Label.$Path.indexOf('/')>0){r('/'+e+'/'+b.Label.$Path);}}}}return P;}};var v={create:c};return v;});
