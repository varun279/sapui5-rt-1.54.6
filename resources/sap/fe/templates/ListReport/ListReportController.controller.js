/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/mvc/Controller"],function(q,C){"use strict";return C.extend("sap.fe.templates.ListReport.ListReportController",{onInit:function(){var t=this;this.oTable=this.byId("template::Table");this.oFilterBar=this.byId("template::FilterBar");this.oTemplateUtils=this.getOwnerComponent().getTemplateUtils();this.oTemplateUtils.getAppStateLoaded().then(function(){var a=t.oTemplateUtils.getAppStateContainer(t.getView().getId());if(a){t.applyAppState(a).then(function(){t.oFilterBar.setEnabled(true);});}else{t.oFilterBar.setEnabled(true);}t.oTemplateUtils.attachAppStateChanged(t.applyAppState.bind(t));});},onBeforeRendering:function(){},createAppState:function(){var f=this.oFilterBar.getAppState();if(!f){return;}var a={filterBar:f};this.oTemplateUtils.setAppStateContainer(this.getView().getId(),a);},applyAppState:function(a){if(!a){a=this.oTemplateUtils.getAppStateContainer(this.getView().getId());}if(a){return this.oFilterBar.setAppState(a.filterBar);}},setShareModel:function(){var g=q.sap.getObject("sap.ushell.Container.getUser");var s={bookmarkTitle:document.title,bookmarkCustomUrl:function(){var h=hasher.getHash();return h?("#"+h):window.location.href;},isShareInJamActive:!!g&&g().isJamActive()};var t=this.getOwnerComponent().getModel("_templPriv");t.setProperty("/listReport/share",s);},handlers:{onSearch:function(){if(this.oFilterBar.getLiveUpdate()===false){this.createAppState();}},onFilterBarChange:function(){if(this.oFilterBar.getLiveUpdate()){this.createAppState();}if(!this.oFilterBar.isReady()){this.oTable.setShowOverlay();}},onItemPress:function(e){var d=this.getView().getViewData().navigation.detail,m,p;if(d.outbound){m=this.getOwnerComponent().getMetadata().getManifest();if(m["sap.app"]&&m["sap.app"].crossNavigation&&m["sap.app"].crossNavigation.outbounds&&m["sap.app"].crossNavigation.outbounds[d.outbound]){var D=m["sap.app"].crossNavigation.outbounds[d.outbound];var P={};if(D.parameters){var b=e.getParameters().listItem.getBindingContext();for(var s in D.parameters){if(D.parameters[s].value.format==="binding"){P[s]=b.getProperty(D.parameters[s].value.value);}}}var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");c&&c.toExternal({target:{semanticObject:D.semanticObject,action:D.action},params:P});}else{throw new Error("outbound target "+d.outbound+" not found in cross navigation definition of manifest");}}else if(d.route){p=e.getParameters().listItem.getBindingContext().getCanonicalPath();this.oTemplateUtils.getHashChanger().setHash(p);}},callAction:function(e){this.oTemplateUtils.getActionController().callAction(e);},showError:function(e){var s=e.getParameters();var E=s.getParameter("error");this.oTemplateUtils.getMessageUtils().handleRequestFailed(E);},onShareListReportActionButtonPress:function(e){var l=this.getView().getModel("sap.fe.i18n").getResourceBundle();if(!this._oShareActionButton){this._oShareActionButton=sap.ui.xmlfragment("sap.fe.templates.ListReport.ShareSheet",{shareEmailPressed:function(){sap.m.URLHelper.triggerEmail(null,l.getText("SAPFE_EMAIL_SUBJECT",[document.title]),document.URL);},shareJamPressed:function(){}});this.getView().addDependent(this._oShareActionButton);}this._oShareActionButton.openBy(e.getSource());}}});});
