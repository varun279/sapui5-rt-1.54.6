/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";function g(t){var m=t.getMessageUtils();function c(E){var p=E.getParameters(),s=p.success,f=p.error,C=p.contexts,M=C[0].getModel(),a,b,A=[],d=p.actionName+"(...)",h=p.mode==='ChangeSet',G,i;if(p.checkBusy){if(t&&t.getBusyHelper().isBusy()){return f?f("Application is busy"):q.noop();}}for(i=0;i<C.length;i++){a=M.bindContext(d,C[i]);if(C.length===1){A.push(a.execute('$auto'));b=A[0];}else{G=(h)?'$direct':'action'+i;A.push(a.execute(G));}}if(C.length>1){if(h){b=M.submitBatch("actions");}else{for(i=0;i<C.length;i++){b=M.submitBatch("action"+i);}}if(p.setBusy&&t){t.getBusyHelper().setBusy(b);}}else if(p.setBusy&&t){t.getBusyHelper().setBusy(b);}function D(j){return j.then(function(v){return{v:v,status:"resolved"};},function(e){return{e:e,status:"rejected"};});}Promise.all(A.map(D)).then(function(r){var e=[];var R;for(R=0;R<r.length;R++){if(r[R].status==="rejected"){e.push(r[R].e);}}if(e.length>0){m.handleRequestFailed(e);}for(R=0;R<r.length;R++){if(r[R].status==="resolved"){m.handleSuccess(t.getText("SAPFE_ACTION_SUCCESS",p.actionLabel));C[0].getBinding().refresh("$auto");s?s():q.noop();}}});}return{callAction:c};}return B.extend("sap.fe.controller.ActionController",{constructor:function(t){q.extend(this,g(t));}});});
