/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.define(['jquery.sap.global',"sap/m/Dialog","sap/m/Button"],function(q,D,B){"use strict";var a={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oOvpResourceBundle:sap.ui.getCore().getLibraryResourceBundle("sap.ovp"),getDialogBox:function(c){return new Promise(function(r,b){var o,A,d,e;if(!this.dialogBox){this.oSaveButton=new B({text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("save"),type:"Emphasized"});var C=new B({text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.oResetButton=new B({text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("resetButton")});this.dialogBox=new D({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("settingsDialogTitle"),buttons:[this.oSaveButton,C,this.oResetButton],afterClose:function(f){this.dialogBox.destroyContent();}.bind(this)});this.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.dialogBox.setBusyIndicatorDelay(0);C.attachPress(function(f){this.dialogBox.close();}.bind(this));}if(c.getParent()){o=c.getParent().getModel("ui").getData();A=q.extend(true,{},o);var m=c.getModel(A.globalFilterModel),M=m.getMetaModel(),E=M.getODataEntityContainer().entitySet;A["allEntityTypes"]=[];for(var i=0;E&&i<E.length;i++){var s=E[i].entityType;A["allEntityTypes"].push({name:M.getODataEntityType(s).name});}if(A.globalFilterEntityType){A.showGlobalFilters=true;}else{A.showGlobalFilters=false;}if(!A.containerLayout){A.containerLayout="fixed";}e=new sap.ui.model.json.JSONModel(A);d=new sap.ui.view("appSettingsView",{viewName:"sap.ovp.cards.rta.AppSettingsDialog",type:sap.ui.core.mvc.ViewType.XML});d.setModel(e);var O=this.oOvpResourceBundle?new sap.ui.model.resource.ResourceModel({bundleUrl:this.oOvpResourceBundle.oUrlInfo.url}):null;d.setModel(O,"ovpResourceModel");this.dialogBox.addContent(d);d.loaded().then(function(v){r(this.dialogBox);}.bind(this));}}.bind(this));}};return a;},true);
