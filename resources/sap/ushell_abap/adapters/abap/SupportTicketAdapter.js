// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell_abap.adapters.abap.SupportTicketAdapter");jQuery.sap.require("sap.ui2.srvc.ODataWrapper");jQuery.sap.require("sap.ui2.srvc.ODataService");sap.ushell_abap.adapters.abap.SupportTicketAdapter=function(s){function c(j){var C;if(j&&!jQuery.isEmptyObject(j)){C=JSON.stringify(j);return C.replace(/\{|\}|\\n|,/g,"\n");}return"";}this.createTicket=function(S){var d,b="/sap/opu/odata/UI2/INTEROP/",r="Messages",u,h,C,D;if(!S.text){throw new sap.ushell.utils.Error("Support Ticket data does not contain text member");}u=jQuery.sap.getObject("clientContext.navigationData.applicationInformation.url",0,S);h=jQuery.sap.getObject("clientContext.navigationData.navigationHash",0,S);C=jQuery.sap.getObject("clientContext.navigationData.tileDebugInfo",0,S);u=typeof u==="string"?u:"";h=typeof h==="string"?h:"";C=typeof C==="string"?JSON.parse(C).catalogId||'':"";S.url=u;S.catalogId=C;S.hash=h;S.clientContext=c(S.clientContext);d=new jQuery.Deferred();var o={baseUrl:b,'sap-language':sap.ushell.Container.getUser().getLanguage(),'sap-client':sap.ushell.Container.getLogonSystem().getClient()};D=new sap.ui2.srvc.createODataWrapper(o);sap.ui2.srvc.ODataService.call(this,D,function(){return false;});D.create(r,S,function(a){d.resolve(a.messageNumber);},function(e){d.reject(e);});return d.promise();};};}());
