// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(function(){"use strict";var L=function(){this.oInstanceManager={};L.prototype.Init();};L.prototype.Init=function(){this.oManagedComponents={};};L.prototype.processDelay=function(n,c){if(!c||c.delay===undefined){return;}var m=this.oManagedComponents[n];if(c.delay===0){m.fnRun();}else{m.oTimer=setTimeout(m.fnRun,c.delay);}};L.prototype.processOn=function(n,c){var o;if(c.on){var m=this.oManagedComponents[n],e=sap.ui.getCore().getEventBus();for(o=0;o<c.on.length;o++){var E=c.on[o];e.subscribe(E.sender,E.signal,m.fnRun,this);}}};L.prototype.processLaunchData=function(n){if(!this.oManagedComponents[n]){return;}var c=this.oManagedComponents[n].oConfiguration,l=c.launchData;L.prototype.processDelay(n,l);L.prototype.processOn(n,l);};L.prototype.startComponent=function(n,r,c){if(this.oManagedComponents[n]){return;}this.oManagedComponents[n]={sState:'start',fnRun:r,oConfiguration:c,oTimer:undefined}};L.prototype.componentCreated=function(n){if(!this.oManagedComponents[n]){return;}var m=this.oManagedComponents[n],c=this.oManagedComponents[n].oConfiguration;if(m.oTimer){clearTimeout(m.oTimer);}if(c.launchData.on){var M=this.oManagedComponents[n],o,e=sap.ui.getCore().getEventBus();for(o=0;o<c.launchData.on.length;o++){var E=c.launchData.on[o];e.unsubscribe(E.sender,E.signal,M.fnRun,this);}}};L.prototype.createLifeCycleWrapperShell=function(c){var d=jQuery.Deferred(),r=function(s,a,C){sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(c.run).done(function(l){L.prototype.componentCreated(c.name);if(C&&(typeof C==="function")){C();}d.resolve(l);}).fail(function(f){d.reject(f);});}.bind(this);this.startComponent(c.name,r,c);this.processLaunchData(c.name);return d;};return new L();},true);
