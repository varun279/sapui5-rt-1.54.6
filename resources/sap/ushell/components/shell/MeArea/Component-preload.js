jQuery.sap.registerPreloadedModules({"name":"Component-preload","version":"2.0","modules":{"sap/ushell/components/shell/MeArea/Component.js":function(){
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/flp/ComponentKeysHandler'],function(r,U,C){var R=s=sap.ushell.Container.getRenderer("fiori2"),s=sap.ushell.Container.getRenderer("fiori2").getShellController(),S=s.getView(),o=(S.getViewData()?S.getViewData().config:{})||{},a=false;return U.extend("sap.ushell.components.shell.MeArea.Component",{metadata:{version:"1.53.0-SNAPSHOT",library:"sap.ushell.components.shell.MeArea",dependencies:{libs:["sap.m"]}},createContent:function(){"use strict";var t=this,d=this.getComponentData().config,m;this.bIsMeAreaCreated=false;this.oDefConfig={view:{position:"left"},};this.oDefConfig=jQuery.extend(this.oDefConfig,d);m=sap.ui.getCore().byId("meAreaHeaderButton");m.applySettings({tooltip:sap.ushell.Container.getUser().getFullName(),icon:'{/userImage/personPlaceHolder}',selected:{path:"/currentViewPortState",formatter:function(v){if(v==='LeftCenter'){return true;}return false;}},press:function(p,E,D){s.bMeAreaSelected=!s.bMeAreaSelected;t._createMeArea();t.toggleMeAreaView(E,m);S.aDanglingControls.push(m);},visible:true,enabled:true,showSeparator:false,ariaLabel:"{i18n>MeAreaToggleButtonAria}"}).removeStyleClass("sapUshellPlaceHolders");var e=m.onAfterRendering;m.onAfterRendering=function(){if(e){e.apply(this,arguments);}jQuery(this.getDomRef()).attr("aria-pressed",s.bMeAreaSelected);};m.addEventDelegate({onsapskipforward:function(E){sap.ushell.renderers.fiori2.AccessKeysHandler.bForwardNavigation=true;E.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsaptabprevious:function(E){var v=sap.ui.getCore().byId('viewPortContainer'),f=v.getCurrentState(),g;switch(f){case"LeftCenter":g=jQuery("#meAreaIconTabBar-content li:first");if(g.length>0){g[0].focus();}else{if(o.enableRecentActivity&&sap.ushell.components.applicationIntegration.AppLifeCycle.getModel().getProperty("/enableTrackingActivity")){jQuery("#meAreaIconTabBar .sapMITBText")[0].focus();}else{E.preventDefault();jQuery('.sapUshellActionItem:last')[0].focus();}}break;case"RightCenter":break;case"Center":if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}break;}},onsapskipback:function(E){var v=sap.ui.getCore().byId('viewPortContainer'),f=v.getCurrentState(),n;switch(f){case"LeftCenter":E.preventDefault();n=jQuery("#meAreaIconTabBar .sapMITBSelected");if(n.length===0){n=jQuery(".sapUshellActionItem");}n[0].focus();break;case"RightCenter":break;case"Center":E.preventDefault();if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(E.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}break;}}});sap.ushell.components.applicationIntegration.AppLifeCycle.createInspection("actions",[{fnCondition:function(i,I,T){return true;},fnAction:function(i,I,T){if((i&&i.length>0)||(I&&I.length>0)){if(I.indexOf("meAreaHeaderButton")===-1){T.addHeaderItem(["meAreaHeaderButton"],true);}}else{T.removeHeaderItem(["meAreaHeaderButton"],true);}}}],false,["blank-home","blank"]);this._createMeArea();sap.ui.getCore().getEventBus().publish("shell","meAreaCompLoaded",{delay:0});},_createMeArea:function(){"use strict";var t=this;if(this.bIsMeAreaCreated===true)return;this.bIsMeAreaCreated=true;try{sap.ushell.Container.getService("EndUserFeedback").isEnabled().done(function(){S.getModel().setProperty('/showEndUserFeedback',true);t._createMeAreaProcess();}).fail(function(){S.getModel().setProperty('/showEndUserFeedback',false);t._createMeAreaProcess();});}catch(e){jQuery.sap.log.error("EndUserFeedback adapter is not found",e.message||e);S.getModel().setProperty('/showEndUserFeedback',false);t._createMeAreaProcess();}},_createMeAreaProcess:function(){"use strict";if(this.oDefConfig.view){var m=sap.ui.view("meArea",{viewName:"sap.ushell.renderers.fiori2.meArea.MeArea",type:'JS',viewData:S.getViewData()});this._createActionButtons();this._setUserPrefModel();sap.ui.getCore().getEventBus().publish("launchpad","Settings");if(this.oDefConfig.view.position==="right"){sap.ushell.Container.getRenderer("fiori2").addRightViewPort(m);}else{sap.ushell.Container.getRenderer("fiori2").addLeftViewPort(m);}s.oViewPortContainer.navTo('leftViewPort',m.getId());s.oViewPortContainer.attachAfterSwitchStateAnimationFinished(function(d){if(d.getParameter("to")==="LeftCenter"&&!a){setTimeout(function(){this._getSearchPrefs();}.bind(this),0);}}.bind(this));}},toggleMeAreaView:function(e,d){if(e){d=e.getSource();}var B=d.getSelected(),m=S.getModel(),f=m.getProperty('/currentState/stateName');s.bMeAreaSelected=!B;if(f==='embedded'||f==='embedded-home'||f==='standalone'||f==='blank-home'||f==='blank'){this._showActionsInPopOver(d);}else{this._switchToMeAreaView(d);}var n=sap.ui.getCore().byId("NotificationsCountButton");if(n&&s.bNotificationsSelected){s.bNotificationsSelected=false;n.setSelected(false);jQuery(n.getDomRef()).attr("aria-pressed","false");}jQuery(d.getDomRef()).attr("aria-pressed",this.bMeAreaSelected);},_createActionButtons:function(){var d,t,e,E,u=sap.ui.getCore().byId("userSettingsBtn"),A=sap.ui.getCore().byId("aboutBtn")||new sap.ushell.ui.footerbar.AboutButton("aboutBtn");t=this;if(!u){var i="userSettingsBtn",f=sap.ushell.resources.i18n.getText("userSettings"),g='sap-icon://action-settings';if(!o.moveUserSettingsActionToShellHeader){u=new sap.ushell.ui.launchpad.ActionItem("userSettingsBtn",{id:i,text:f,icon:g});}}S.aDanglingControls.push(u);jQuery.sap.require('sap.ushell.ui.footerbar.ContactSupportButton');d=sap.ui.getCore().byId("ContactSupportBtn");if(!d){if(!o.moveContactSupportActionToShellHeader){d=new sap.ushell.ui.footerbar.ContactSupportButton("ContactSupportBtn",{visible:sap.ushell.Container.getService("SupportTicket").isEnabled()});}}S.aDanglingControls.push(d);E=S.getModel().getProperty('/showEndUserFeedback');if(E){if(o.moveGiveFeedbackActionToShellHeader){jQuery.sap.measure.start("FLP:Shell.controller._createActionButtons","create give feedback as shell head end item","FLP");var h=sap.ui.getCore().byId("EndUserFeedbackHandlerBtn");h.setModel(S.getModel());h.setShowAnonymous(s.oEndUserFeedbackConfiguration.showAnonymous);h.setAnonymousByDefault(s.oEndUserFeedbackConfiguration.anonymousByDefault);h.setShowLegalAgreement(s.oEndUserFeedbackConfiguration.showLegalAgreement);h.setShowCustomUIContent(s.oEndUserFeedbackConfiguration.showCustomUIContent);h.setFeedbackDialogTitle(s.oEndUserFeedbackConfiguration.feedbackDialogTitle);h.setTextAreaPlaceholder(s.oEndUserFeedbackConfiguration.textAreaPlaceholder);h.setAggregation("customUIContent",s.oEndUserFeedbackConfiguration.customUIContent,false);var j=function(){h.firePress();};e=sap.ui.getCore().byId("EndUserFeedbackBtn");e.setVisible(true);e.attachPress(j);jQuery.sap.measure.end("FLP:Shell.controller._createActionButtons");}else{jQuery.sap.require('sap.ushell.ui.footerbar.EndUserFeedback');e=sap.ui.getCore().byId("EndUserFeedbackBtn")||new sap.ushell.ui.footerbar.EndUserFeedback("EndUserFeedbackBtn",{showAnonymous:s.oEndUserFeedbackConfiguration.showAnonymous,anonymousByDefault:s.oEndUserFeedbackConfiguration.anonymousByDefault,showLegalAgreement:s.oEndUserFeedbackConfiguration.showLegalAgreement,showCustomUIContent:s.oEndUserFeedbackConfiguration.showCustomUIContent,feedbackDialogTitle:s.oEndUserFeedbackConfiguration.feedbackDialogTitle,textAreaPlaceholder:s.oEndUserFeedbackConfiguration.textAreaPlaceholder,customUIContent:s.oEndUserFeedbackConfiguration.customUIContent});}}if(S.getModel().getProperty("/enableHelp")){u.addStyleClass('help-id-loginDetails');A.addStyleClass('help-id-aboutBtn');if(E){e.addStyleClass('help-id-EndUserFeedbackBtn');}d.addStyleClass('help-id-contactSupportBtn');}S.aDanglingControls.push(A);if(E){S.aDanglingControls.push(e);}},_setUserPrefModel:function(){var u=S.getModel().getProperty("/userPreferences/entries");var d=this._getUserPrefDefaultModel();d.entries=d.entries.concat(u);d.entries=s._reorderUserPrefEntries(d.entries);S.getModel().setProperty("/userPreferences",d);},_getUserPrefDefaultModel:function(){var m=S.getModel(),u=sap.ushell.Container.getUser();var t=new G("userPrefThemeSelector","sap.ushell.renderers.fiori2.theme_selector.ThemeSelector","xml","themes",sap.ushell.resources.i18n.getText("Appearance"),function(){var k=this.getView().getController().onSave();k.done(function(){if(m.getProperty("/tilesOpacity")===true){utils.handleTilesOpacity();}});return k;},undefined,undefined,undefined,function(){if(S.getModel().getProperty("/setTheme")!==undefined){return S.getModel().getProperty("/setTheme")&&u.isSetThemePermitted();}else{return u.isSetThemePermitted();}},S.getModel(),"sap-icon://palette");var d=new G("userPrefUsageAnalyticsSelector","sap.ushell.renderers.fiori2.usageAnalytics_selector.UsageAnalyticsSelector","js","usageAnalytics",sap.ushell.resources.i18n.getText("usageAnalytics"),undefined,undefined,undefined,undefined,sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted());var e=new G("defaultParametersSelector","sap.ushell.renderers.fiori2.defaultParameters_selector.DefaultParameters","js",undefined,sap.ushell.resources.i18n.getText("defaultsValuesEntry"),undefined,undefined,undefined,undefined,true,undefined,undefined,false);var f=new G("userProfilingView","sap.ushell.renderers.fiori2.profiling.UserProfiling","js","userProfiling",sap.ushell.resources.i18n.getText("userProfiling"),undefined,undefined,undefined,undefined,false,S.getModel(),"sap-icon://user-settings",false);var g=[new c(),t,new L()],p=[];p.push(d);var h=window["sap-ushell-config"],i=jQuery.sap.getObject("renderers.fiori2.componentData.config.enableRecentActivity",undefined,h);if(i){g.push(new b());}g.push(f);if(S.getModel().getProperty("/enableNotifications")===true){var n=sap.ushell.Container.getService("Notifications")._getNotificationSettingsAvalability(),j;j=new G("notificationSettings","sap.ushell.renderers.fiori2.notifications.Settings","js",undefined,sap.ushell.resources.i18n.getText("notificationSettingsEntry_title"),undefined,undefined,undefined,undefined,true,undefined,"sap-icon://ui-notifications",false);g.push(j);n.done(function(k){if(k.settingsAvailable){j.visible=true;S.getModel().getProperty("/userPreferences/entries").every(function(l,q){if(l.title===sap.ushell.resources.i18n.getText("notificationSettingsEntry_title")){S.getModel().setProperty("/userPreferences/entries/"+q+"/visible",true);return false;}return true;});}});}if(S.getModel().getProperty("/userDefaultParameters")){g.push(e);}return{dialogTitle:sap.ushell.resources.i18n.getText("userSettings"),isDetailedEntryMode:false,activeEntryPath:null,entries:g,profiling:p};},_showActionsInPopOver:function(O){var m=S.getModel(),d=m.getProperty('/currentState/actions');if(!this.oActionsPopover){this.oActionsLayout=new sap.ui.layout.VerticalLayout();this.oActionsPopover=new sap.m.Popover("sapUshellActionsPopover",{showHeader:false,placement:sap.m.PlacementType.Bottom,content:this.oActionsLayout}).addStyleClass("sapUshellPopupContainer");}this.oActionsLayout.removeAllContent();this._createActionButtons();d.forEach(function(A,i){var e=sap.ui.getCore().byId(A);if(e&&e.setActionType){this.oActionsLayout.addContent(e);e.setActionType('standard');e.addStyleClass('sapUshellStandardActionItem');}}.bind(this));this.oActionsPopover.openBy(O);this.oActionsPopover.setModel(m);},_switchToMeAreaView:function(O){var B=O.getSelected();if(B){s._switchViewPortStateByControl(O,"Center");}else{s._switchViewPortStateByControl(O,"LeftCenter");}if(R.toggleOverFlowActions){R.toggleOverFlowActions();}},_getSearchPrefs:function(){if(this._getIsSearchButtonEnabled()){sap.ui.require(['sap/ushell/renderers/fiori2/search/userpref/SearchPrefs','sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader'],function(d){a=true;var e=d;var f=e.getEntry();f.isSearchPrefsActive().done(function(i){if(!i){return;}this.addUserProfilingEntry(f);}.bind(this));}.bind(this));}},_getIsSearchButtonEnabled:function(){var m=S.getModel();try{var d=m.getProperty("/currentState/stateName");var D=m.getData();var e=D.states;if(e[d].headEndItems.indexOf("sf")!=-1){return true;}else{return false;}}catch(f){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: search button is not visible.");return false;}},_getPersonalizer:function(i){"use strict";if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var d=sap.ui.core.Component.getOwnerComponentFor(this);var e={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};this.oPersonalizer=p.getPersonalizer(P,e,d);return this.oPersonalizer;},addUserProfilingEntry:function(e){s._validateUserPrefEntryConfiguration(e);s._updateProfilingModel(e);},_initComponentsLazyLoading:function(){setTimeout(function(){sap.ui.getCore().getEventBus().publish("shell","FLP-FMP");},5000);},exit:function(){"use strict";}});function G(v,d,e,f,t,g,h,i,j,k,m,l,n){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId(v)){if(e==="xml"){this.view=sap.ui.xmlview(v,d);}else{this.view=sap.ui.jsview(v,d);}}if(m){this.view.setModel(m);}return this.view;};return{entryHelpID:f,title:t,valueResult:null,onSave:g?g.bind(this):function(){if(this.getView().getController().onSave){return this.getView().getController().onSave();}return;}.bind(this),onCancel:h?h.bind(this):function(){if(this.getView().getController().onCancel){return this.getView().getController().onCancel();}return;}.bind(this),contentFunc:i?i.bind(this):function(){if(this.getView().getController().getContent){return this.getView().getController().getContent();}return;}.bind(this),valueArgument:j?j.bind(this):function(){var p=jQuery.Deferred(),q=this;setTimeout(function(){if(q.getView().getController().getValue){q.getView().getController().getValue().done(function(u){p.resolve(u);});}},0);return p.promise();}.bind(this),editable:typeof k==="function"?k():k,contentResult:null,icon:l,defaultVisibility:n};}function L(){this.view=null;this.getView=function getView(){if(!this.languageRegionSelector){this.languageRegionSelector=sap.ui.jsview("languageRegionSelector","sap.ushell.renderers.fiori2.userPreferences.LanguageRegionSelector");}return this.languageRegionSelector;};var d=function(){var h=this.getView().getController().onSave();return h;}.bind(this);var e=function(){return this.getView().getController().onCancel();}.bind(this);var g=function(){return this.getView().getController().getContent();}.bind(this);var f=function(){return this.getView().getController().getValue();}.bind(this);return{entryHelpID:"language",title:sap.ushell.resources.i18n.getText("languageRegionTit"),editable:true,valueArgument:f,valueResult:null,onSave:d,onCancel:e,contentFunc:g,contentResult:null,icon:"sap-icon://globe"};}function b(){this.view=null;this.getView=function getView(){if(!this.userActivitiesHandler){this.userActivitiesHandler=sap.ui.jsview("userActivitiesHandler","sap.ushell.renderers.fiori2.userActivitiesHandler.userActivitiesHandler");}return this.userActivitiesHandler;};var d=function(){var h=this.getView().getController().onSave();return h;}.bind(this);var e=function(){return this.getView().getController().onCancel();}.bind(this);var g=function(){return this.getView().getController().getContent();}.bind(this);var f=function(){return this.getView().getController().getValue();}.bind(this);return{entryHelpID:"UserActivitiesEntry",title:sap.ushell.resources.i18n.getText("userActivities"),editable:true,valueArgument:f,valueResult:null,onSave:d,onCancel:e,contentFunc:g,contentResult:null,icon:"sap-icon://laptop"};}function c(){this.view=null;this.getView=function getView(){if(!this.userAccountSelector){if((o.enableOnlineStatus&&sap.ushell.ui5service.UserStatus.prototype.isEnabled)||o.enableUserImgConsent){this.userAccountSelector=sap.ui.xmlview("UserAccountSelector","sap.ushell.renderers.fiori2.userAccount.UserAccountSelector");}else{this.userAccountSelector=sap.ui.xmlview("UserAccountSetting","sap.ushell.renderers.fiori2.userAccount.UserAccountSetting");}}return this.userAccountSelector;};var d=function(){var h=this.getView().getController().onSave();return h;}.bind(this);var e=function(){return this.getView().getController().onCancel();}.bind(this);var g=function(){return this.getView().getController().getContent();}.bind(this);var f=function(){return this.getView().getController().getValue();}.bind(this);return{entryHelpID:"userAccountEntry",title:sap.ushell.resources.i18n.getText("UserAccountFld"),editable:true,valueArgument:f,valueResult:null,onSave:d,onCancel:e,contentFunc:g,contentResult:null,icon:"sap-icon://account"};}});}}});
