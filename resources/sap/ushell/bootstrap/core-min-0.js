sap.ui.predefine('sap/ushell/CanvasShapesManager',function(){"use strict";var P=function(x,y){this.x=x||0;this.y=y||0;};P.prototype.getDistance=function(p){var x=this.x-p.x;var y=this.y-p.y;return Math.floor(Math.sqrt(x*x+y*y));};P.prototype.getSegment=function(o){if(this.x<=o.x&&this.y<=o.y){return 1;}if(this.x<=o.x&&this.y>=o.y){return 2;}if(this.x>=o.x&&this.y>=o.y){return 3;}if(this.x>=o.x&&this.y<=o.y){return 4;}};P.prototype.offset=function(o,O){this.x=this.x+o;this.y=this.y+O;};var R=function(x,X,y,Y){this.x={min:x,max:X};this.y={min:y,max:Y};};var c=(window.innerWidth>0)?window.innerWidth:screen.width;var a=(window.innerHeight>0)?window.innerHeight:screen.height;var b={cpr1:new R(0,c/4,0,a/4),cpr2:new R(c/2,c,0,a/4),cpr3:new R(c/4,3*c/4,a*3/4,a)};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(d){return setTimeout(d,1);};var m=function(){this.init();};m.prototype={radiusRange:{min:800,max:900},init:function(){this.Id="shell-shapes";var d={cpr1:b.cpr1,cpr2:b.cpr2,cpr3:b.cpr3},e,f,s,g,i=sap.ui.Device.system.phone;this.shapes=[];var h;for(h in d){e=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;f=this.getRandomPoint(d[h]);s=this._getSquarePoints(e,f);g=this._calculatebezierCurves(e,s);this.shapes.push({bezierCurves:g,centerPoint:f});}for(var j in this.shapes){var v=this._generateRandomAmorphousShapeValues();this.shapes[j]=this.makeAmorphousShape(this.shapes[j],v.edge0.edgeNum,v.edge0.xOffSet,v.edge0.yOffSet,v.edge0.xStretch);this.shapes[j]=this.makeAmorphousShape(this.shapes[j],v.edge1.edgeNum,v.edge1.xOffSet,v.edge1.yOffSet,v.edge1.xStretch);}sap.ui.Device.resize.attachHandler(this.resizeHandler,this);if(!i){sap.ui.getCore().getEventBus().subscribe("launchpad","afterSwitchState",this.startAnimation,this);}},_generateRandomAmorphousShapeValues:function(){var v={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var n=this._getRandomInt(0,3);for(var e in v){v[e].edgeNum=n;v[e].xOffSet=this._getRandomInt(200,400);v[e].yOffSet=this._getRandomInt(-200,-400);n+=this._getRandomInt(0,1)<0.5?-1:1;if(n===-1){n=3;}if(n===4){n=0;}}n=this._getRandomInt(0,1);if(n<0.5){n=n<0.25?0:1;v["edge"+n].xStretch=this._getRandomInt(0,200);}return v;},getPoint:function(x,y){return new P(x,y);},getRandomPoint:function(d){var x=Math.floor(Math.random()*(d.x.max-d.x.min)+d.x.min),y=Math.floor(Math.random()*(d.y.max-d.y.min)+d.y.min);return new P(x,y);},resizeHandler:function(){var d=jQuery('#'+this.Id)[0];if(d){d.width=window.innerWidth;d.height=window.innerHeight;this.drawShapes();}},enableAnimationDrawing:function(e){this._enableDrawing=e;},startAnimation:function(e,d,D){if(!this._enableDrawing){return;}var f=2500;var t,g=this.shapes[0].centerPoint.x,h=this.shapes[1].centerPoint.x,i=this.shapes[2].centerPoint.x,j,k=parseFloat(jQuery("body").css("font-size")),T=D.getParameter('to'),F=D.getParameter('from');if(!this.leftOffset||!this.rigthOffset){this.setTranslateOffset();}if(sap.ui.getCore().getConfiguration().getRTL()){if(T==="RightCenter"){T="LeftCenter";}else if(T==="LeftCenter"){T="RightCenter";}if(F==="RightCenter"){F="LeftCenter";}else if(F==="LeftCenter"){F="RightCenter";}}if(T==="RightCenter"){j=1;t=this.rigthOffset*k;}if(T==="LeftCenter"){j=-1;t=this.leftOffset*k;}if(T==="Center"){if(F==="RightCenter"){j=-1;t=this.rigthOffset*k;}if(F==="LeftCenter"){j=1;t=this.leftOffset*k;}}this.animateTranslation(g,h,i,t,f,j);},setTranslateOffset:function(){var t=sap.ui.core.theming.Parameters,l,s;if(window.matchMedia('(min-width: 1920px)').matches){l=t.get('sapUshellLeftViewPortWidthL');s=t.get('sapUshellRightViewPortWidthXXL');}else if(window.matchMedia('(min-width: 1600px)').matches){l=t.get('sapUshellLeftViewPortWidthM');s=t.get('sapUshellRightViewPortWidthXL');}else if(window.matchMedia('(min-width: 1440px)').matches){l=t.get('sapUshellLeftViewPortWidthM');s=t.get('sapUshellRightViewPortWidthL');}else if(window.matchMedia('(min-width: 1280px)').matches){l=t.get('sapUshellLeftViewPortWidthM');s=t.get('sapUshellRightViewPortWidthM');}else if(window.matchMedia('(min-width: 1024px)').matches){l=t.get('sapUshellLeftViewPortWidthXS');s=t.get('sapUshellRightViewPortWidthS');}else if(window.matchMedia('(min-width: 601px)').matches){l=t.get('sapUshellLeftViewPortWidthXS');s=t.get('sapUshellRightViewPortWidthXS');}else if(window.matchMedia('(max-width : 600px)').matches){l=(jQuery(window).width()/parseFloat(jQuery("body").css("font-size")))+"";s=(jQuery(window).width()/parseFloat(jQuery("body").css("font-size")))+"";}this.leftOffset=parseInt(l.replace("rem",""),10);this.rigthOffset=parseInt(s.replace("rem",""),10);},animateTranslation:function(d,e,f,t,g,h){var s=new Date().getTime();var i=s+g,j=t,k=t/4,l=t/2,o,n,p,q=this;var u=function(){var v=new Date().getTime(),w=1-Math.pow(1-Math.min((g-(i-v))/g,1),5);o=d+h*k*w;n=e+h*l*w;p=f+h*j*w;q.updateShapes(o,n,p);q.drawShapes();if(w<1){r(u);}};return u();},updateShapes:function(o,d,e){var t=this,f=this.shapes[0].centerPoint.x-o,g=this.shapes[1].centerPoint.x-d,h=this.shapes[2].centerPoint.x-e;this.shapes[0].centerPoint=new P(o,this.shapes[0].centerPoint.y);this.shapes[1].centerPoint=new P(d,this.shapes[1].centerPoint.y);this.shapes[2].centerPoint=new P(e,this.shapes[2].centerPoint.y);this.shapes[0].bezierCurves.forEach(function(i,I){t.shapes[0].bezierCurves[I].controlPoint1=new P(i.controlPoint1.x+f,i.controlPoint1.y);t.shapes[0].bezierCurves[I].controlPoint2=new P(i.controlPoint2.x+f,i.controlPoint2.y);t.shapes[0].bezierCurves[I].startPoint=new P(i.startPoint.x+f,i.startPoint.y);t.shapes[0].bezierCurves[I].endPoint=new P(i.endPoint.x+f,i.endPoint.y);});this.shapes[1].bezierCurves.forEach(function(i,I){t.shapes[1].bezierCurves[I].controlPoint1=new P(i.controlPoint1.x+g,i.controlPoint1.y);t.shapes[1].bezierCurves[I].controlPoint2=new P(i.controlPoint2.x+g,i.controlPoint2.y);t.shapes[1].bezierCurves[I].startPoint=new P(i.startPoint.x+g,i.startPoint.y);t.shapes[1].bezierCurves[I].endPoint=new P(i.endPoint.x+g,i.endPoint.y);});this.shapes[2].bezierCurves.forEach(function(i,I){t.shapes[2].bezierCurves[I].controlPoint1=new P(i.controlPoint1.x+h,i.controlPoint1.y);t.shapes[2].bezierCurves[I].controlPoint2=new P(i.controlPoint2.x+h,i.controlPoint2.y);t.shapes[2].bezierCurves[I].startPoint=new P(i.startPoint.x+h,i.startPoint.y);t.shapes[2].bezierCurves[I].endPoint=new P(i.endPoint.x+h,i.endPoint.y);});},makeAmorphousShape:function(s,d,x,y,e){var f,g,h;switch(d){case 0:f=s.bezierCurves[0].controlPoint1;g=s.bezierCurves[3].controlPoint2;h=this._rotatePoints(x,y,f,g);s.bezierCurves[0].controlPoint1=h[0];s.bezierCurves[3].controlPoint2=h[1];break;case 1:f=s.bezierCurves[0].controlPoint2;g=s.bezierCurves[1].controlPoint1;h=this._rotatePoints(x,y,f,g);s.bezierCurves[0].controlPoint2=h[0];s.bezierCurves[1].controlPoint1=h[1];break;case 2:f=s.bezierCurves[1].controlPoint2;g=s.bezierCurves[2].controlPoint1;h=this._rotatePoints(x,y,f,g);s.bezierCurves[1].controlPoint2=h[0];s.bezierCurves[2].controlPoint1=h[1];break;case 3:f=s.bezierCurves[2].controlPoint2;g=s.bezierCurves[3].controlPoint1;h=this._rotatePoints(x,y,f,g);s.bezierCurves[2].controlPoint2=h[0];s.bezierCurves[3].controlPoint1=h[1];break;}return s;},_rotatePoints:function(d,e,f,g){var x,y,h=[];x=f.x+d;y=f.y+e;h.push(new P(x,y));x=g.x-d;y=g.y-e;h.push(new P(x,y));return h;},_getSquarePoints:function(d,e){var s=[];s[0]=new P(e.x+d,e.y);s[1]=new P(e.x,e.y-d);s[2]=new P(e.x-d,e.y);s[3]=new P(e.x,e.y+d);return s;},_getRandomInt:function(d,e){if(d==0&&e==1){return Math.random();}return Math.floor(Math.random()*(e-d+1))+d;},_calculatebezierCurves:function(d,s){var e=[];var f;var g;var h,i;i=s[0];h=s[1];f=new P(i.x,i.y-d/2);g=new P(i.x-d/2,i.y-d);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});i=s[1];h=s[2];f=new P(i.x-d/2,i.y);g=new P(i.x-d,i.y+d/2);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});i=s[2];h=s[3];f=new P(i.x,i.y+d/2);g=new P(i.x+d/2,i.y+d);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});i=s[3];h=s[0];f=new P(i.x+d/2,i.y);g=new P(i.x+d,i.y-d/2);e.push({startPoint:i,endPoint:h,controlPoint1:f,controlPoint2:g});return e;},drawShapes:function(){var d=jQuery('#'+this.Id)[0],B=sap.ui.core.theming.Parameters.get("sapUshellShellBackgroundShapesColor");if(d&&d.getContext){var e=d.getContext('2d'),s,f,g,h;e.clearRect(0,0,c*2,a*2);if(B){for(var j=0;j<this.shapes.length;j++){e.beginPath();s=this.shapes[j].bezierCurves[0].startPoint;e.moveTo(s.x,s.y);for(var i=0;i<this.shapes[j].bezierCurves.length;i++){f=this.shapes[j].bezierCurves[i].endPoint;g=this.shapes[j].bezierCurves[i].controlPoint1;h=this.shapes[j].bezierCurves[i].controlPoint2;e.bezierCurveTo(Math.floor(g.x),Math.floor(g.y),Math.floor(h.x),Math.floor(h.y),Math.floor(f.x),Math.floor(f.y));}e.closePath();e.fillStyle=B;e.fill();}}}}};var C=new m();return C;},true);sap.ui.predefine('sap/ushell/ui/shell/ToolAreaItem',['jquery.sap.global','sap/ui/core/Control','sap/ui/core/IconPool','sap/ushell/library'],function(q,C,I){"use strict";var T=C.extend("sap.ushell.ui.shell.ToolAreaItem",{metadata:{properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},renderer:{render:function(r,t){var i;r.write("<div");r.writeControlData(t);if(!t.getIcon()){r.addClass("sapUshellToolAreaItmTextOnly");}else{r.addClass("sapUshellToolAreaItm");}if(!t.getVisible()){r.addClass("sapUshellShellHidden");}if(t.getAriaLabel()){r.writeAccessibilityState({label:this.getAriaLabel(),role:"button"});}r.writeClasses();var a=t.getTooltip_AsString();if(a){r.writeAttributeEscaped("title",a);}r.write(">");if(t.getIcon()){i=I.createControlByURI(t.getIcon());i.setUseIconTooltip(false);i.addStyleClass("sapUshellToolAreaItemIcon");r.renderControl(i);}if(t.getText()){r.write("<span");r.addClass("sapUshellToolAreaItemText");r.writeClasses();r.write(">");r.writeEscaped(t.getText());r.write("</span>");}if(t.getExpandable()){this.renderExpandable(r);}r.write("</div>");},renderExpandable:function(r){var i=I.createControlByURI("sap-icon://icon-dropdown");i.addStyleClass("sapUshellToolAreaItemExpandable");r.renderControl(i);}}});T.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false);}else{this.setSelected(true);}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand();}else{this.firePress();}};T.prototype.onsapenter=T.prototype.onclick;T.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e);};T.prototype.setSelected=function(s){s=!!s;if(s){var j=q(".sapUshellToolAreaItemSelected");j.each(function(){q(this).removeClass("sapUshellToolAreaItemSelected");});}this.setProperty("selected",s,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",s);};T.prototype.setVisible=function(v){var r=this.getParent().getDomRef();this.setProperty("visible",!!v,r);this.$().toggleClass("sapUshellShellHidden",!v);};T.prototype.setAriaLabel=function(a){this.setProperty('ariaLabel',a);return this;};return T;},true);sap.ui.predefine('sap/ushell/utils/utilsCdm',["sap/ushell/utils"],function(u){"use strict";function g(o,A){return u.getMember(o,A);}function m(k,s,A){s=u.clone(s);A=u.clone(A);var i={};i.semanticObject=s.semanticObject;i.action=s.action;i.title=s.title||g(A,"sap|app.title");i.info=s.info||g(A,"sap|app.info");i.icon=s.icon||g(A,"sap|ui.icons.icon");i.subTitle=s.subTitle||g(A,"sap|app.subTitle");i.shortTitle=s.shortTitle||g(A,"sap|app.shortTitle");var t,T,b,o,d,c,I=false;var S=g(A,"sap|platform|runtime");i.resolutionResult=jQuery.extend(true,{},S);if(S){i.resolutionResult["sap.platform.runtime"]=jQuery.extend(true,{},S);}if(g(A,"sap|ui.technology")==="GUI"){i.resolutionResult["sap.gui"]=g(A,"sap|gui");}if(g(A,"sap|ui.technology")==="WDA"){i.resolutionResult["sap.wda"]=g(A,"sap|wda");}if(g(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){i.resolutionResult["sap.platform.runtime"]=i.resolutionResult["sap.platform.runtime"]||{};i.resolutionResult.url=A["sap.url"].uri;i.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(S&&S.uri){i.resolutionResult["sap.platform.runtime"].url=S.uri;i.resolutionResult.url=S.uri;}}if(!i.resolutionResult["sap.ui"]){i.resolutionResult["sap.ui"]={};}i.resolutionResult["sap.ui"].technology=g(A,"sap|ui.technology");i.resolutionResult.applicationType=this._formatApplicationType(i.resolutionResult,A);i.resolutionResult.systemAlias=i.resolutionResult.systemAlias||s.systemAlias;i.resolutionResult.systemAliasSemantics="apply";i.resolutionResult.text=i.title;i.deviceTypes=g(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(s.deviceTypes||{},M)){i.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(i.deviceTypes,M)){i.deviceTypes[M]=true;}i.deviceTypes[M]=!!i.deviceTypes[M];});i.signature=s.signature||{};i.signature.parameters=i.signature.parameters||{};i.signature.additionalParameters=(s.signature||{}).additionalParameters||"allowed";var e=s.indicatorDataSource||g(A,"sap|app.crossNavigation.inbounds."+k+".indicatorDataSource");var h=e?"#Shell-dynamicTile":"#Shell-staticTile";if(g(A,"sap|app.type")==="tile"||g(A,"sap|flp.type")==="tile"){h=i.resolutionResult;h.url=g(A,"sap|platform|runtime.componentProperties.url");h.componentName=g(A,"sap|ui5.componentName");if(g(A,"sap|platform|runtime.includeManifest")){h.componentProperties=h.componentProperties||{};h.componentProperties.manifest=jQuery.extend(true,{},A);delete h.componentProperties.manifest["sap.platform.runtime"];}o=g(A,"sap|app.crossNavigation.outbounds.target");I=true;}if(g(A,"sap|app.type")==="plugin"||g(A,"sap|flp.type")==="plugin"){return undefined;}if(g(A,"sap|flp.tileSize")){t=g(A,"sap|flp.tileSize");}if(g(A,"sap|app.description")){T=g(A,"sap|app.description");}if(g(A,"sap|ui.technology")==="GUI"&&g(A,"sap|gui.transaction")){b=g(A,"sap|gui.transaction");}if(g(A,"sap|ui.technology")==="WDA"&&g(A,"sap|wda.applicationId")){b=g(A,"sap|wda.applicationId");}if(g(A,"sap|app.dataSources")){d=g(A,"sap|app.dataSources");}if(g(A,"sap|app.id")){c=g(A,"sap|app.id");}i.tileResolutionResult={appId:c,title:i.title,subTitle:i.subTitle,icon:i.icon,size:t,info:i.info,tileComponentLoadInfo:h,indicatorDataSource:e,dataSources:d,description:T,technicalInformation:b,deviceTypes:i.deviceTypes};i.tileResolutionResult.isCustomTile=I;if(o){i.tileResolutionResult.targetOutbound=o;}return i;}function f(r,A){var s=r.applicationType;if(s){return s;}var c=g(A,"sap|platform|runtime.componentProperties.self.name")||g(A,"sap|ui5.componentName");if(g(A,"sap|flp.appType")==="UI5"||g(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+c;r.url=g(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=g(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(g(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=g(A,"sap|gui");r.systemAlias=g(A,"sap|app.destination.name");return"TR";}if(g(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=g(A,"sap|wda");r.systemAlias=g(A,"sap|app.destination.name");return"WDA";}if(g(A,"sap|ui.technology")==="URL"){r.applicationType="URL";r.systemAlias=g(A,"sap|app.destination.name");}return"URL";}function a(s){var t=this;if(!s){return[];}var i=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var b=g(o,"sap|app.crossNavigation.inbounds");if(b){var l=Object.keys(b).sort();l.forEach(function(I){var c=b[I];var r=t.mapOne(I,c,o);if(r){i.push(r);}});}}catch(E){jQuery.sap.log.error("Error in application "+A+": "+E,E.stack);}});}catch(e){jQuery.sap.log.error(e);jQuery.sap.log.error(e.stack);return[];}return i;}return{formatSite:a,mapOne:m,_formatApplicationType:f};},true);
/*!
 * @copyright@
 */
sap.ui.predefine('sap/m/NumericContentRenderer',['./library'],function(l){"use strict";var N={};N.render=function(r,c){var v=c.getValue();var i=c.getIndicator();var s=c.getScale();var S=c.getState();var I=l.DeviationIndicator.None!==i&&v!=="";var w=c.getWithMargin();var W;if(w){W="";}else{W="WithoutMargin";}if(c.getFormatterValue()){var f=c._parseFormattedValue(v);s=f.scale;v=f.value;}var b=s&&v;r.write("<div");r.writeControlData(c);var t=c.getTooltip_AsString();if(typeof t!=="string"){t="";}r.writeAttributeEscaped("aria-label",t);r.writeAttribute("role","img");if(S==l.LoadState.Failed||S==l.LoadState.Loading){r.writeAttribute("aria-disabled","true");}if(c.getAnimateTextChange()){r.addStyle("opacity","0.25");}if(c.getWidth()){r.addStyle("width",c.getWidth());}r.writeStyles();r.addClass("sapMNC");r.addClass(W);if(c.hasListeners("press")){r.writeAttribute("tabindex","0");r.addClass("sapMPointer");}r.writeClasses();r.write(">");r.write("<div");r.addClass("sapMNCInner");r.addClass(W);r.writeClasses();r.write(">");if(w){this._renderScaleAndIndicator(r,c,I,b,W,i,s);this._renderValue(r,c,W,v);}else{this._renderValue(r,c,W,v);this._renderScaleAndIndicator(r,c,I,b,W,i,s);}r.write("</div>");r.write("</div>");};N._prepareAndRenderIcon=function(r,c,i){if(i){var s,L=l.LoadState,C=c.getState();for(s in L){if(L.hasOwnProperty(s)&&s!==C){i.removeStyleClass(s);}else if(L.hasOwnProperty(s)&&s===C){i.addStyleClass(s);}}i.addStyleClass("sapMNCIconImage");r.renderControl(i);}};N._renderScaleAndIndicator=function(r,c,i,a,w,t,b){if(i||a){var s=c.getState();var C=c.getValueColor();r.write("<div");r.addClass("sapMNCIndScale");r.addClass(w);r.addClass(s);r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-indicator");r.addClass("sapMNCIndicator");r.addClass(t);r.addClass(s);r.addClass(C);r.writeClasses();r.write("/>");if(a){r.write("<div");r.writeAttribute("id",c.getId()+"-scale");r.addClass("sapMNCScale");r.addClass(s);r.addClass(C);r.writeClasses();r.write(">");r.writeEscaped(b.substring(0,3));r.write("</div>");}r.write("</div>");}};N._renderValue=function(r,c,w,v){var e;if(c.getNullifyValue()){e="0";}else{e="";}r.write("<div");r.writeAttribute("id",c.getId()+"-value");r.addClass("sapMNCValue");r.addClass(w);r.addClass(c.getValueColor());r.addClass(c.getState());r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-value-scr");r.addClass("sapMNCValueScr");r.addClass(w);r.writeClasses();r.write(">");this._prepareAndRenderIcon(r,c,c._oIcon);var C=c.getTruncateValueTo();if(v.length>=C&&(v[C-1]==="."||v[C-1]===",")){r.writeEscaped(v.substring(0,C-1));}else{if(v){r.writeEscaped(v.substring(0,C));}else{r.writeEscaped(e);}}r.write("</div>");r.write("</div>");};return N;},true);
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/Fiori20AdapterTest',['sap/ui/core/UIComponent'],function(U){"use strict";var F={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_WHITELIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(c){var C=this._getURLParamConfiguration();if(!C){C=this._getMetadataConfiguration(c);}if(!C){C=this._getDefaultConfiguration(c);}C.iSearchDepth=C.iSearchDepth||F.I_DEFAULT_SEARCH_DEPTH;if((typeof C.iSearchDepth==="string")&&!isNaN(C.iSearchDepth)){C.iSearchDepth=parseInt(C.iSearchDepth,10);}return C;},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return;}if(!this._isURLParameterSpecified(F.S_FIORI20ADAPTER_URL_PARAM_NAME)){return;}var u=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),b,s;if(typeof(u)==="boolean"){b=u;}else if(u&&(u.length>=1)){s=u;}if(!s&&(b===undefined)){return;}return{bStylePage:s?s.indexOf("style")>-1:b,bMoveTitle:s?s.indexOf("title")>-1:b,bHideBackButton:s?s.indexOf("back")>-1:b,bCollapseHeader:s?s.indexOf("collapse")>-1:b,bHierarchy:s?s.indexOf("hierarchy")>-1:b};},_getMetadataConfiguration:function(c){var a=c.getMetadata("config").getConfig(F.S_FIORI20ADAPTER_METADATA_PARAM_NAME),A,b;if(typeof(a)==="boolean"){A=a;}else if((typeof a==="object")&&!jQuery.isEmptyObject(a)){b=a;}if(!b&&(A===undefined)){return;}return{bStylePage:b?this._isSgnTrue(b["style"]):A,bMoveTitle:b?this._isSgnTrue(b["title"]):A,bHideBackButton:b?this._isSgnTrue(b["back"]):A,bCollapseHeader:b?this._isSgnTrue(b["collapse"]):A,bHierarchy:b?this._isSgnTrue(b["hierarchy"]):A,bLateAdaptation:b?this._isSgnTrue(b["lateAdaptation"]):F.B_DEFAULT_LATE_ADAPTATION};},_getDefaultConfiguration:function(c){var e=this._hasMinVersionSmallerThan(c,"1.42")&&this._isWhitelisted(c);return{bStylePage:e,bMoveTitle:e,bHideBackButton:e,bCollapseHeader:e,bHierarchy:e};},_isURLParameterSpecified:function(p){var a=jQuery.sap.getUriParameters().mParams&&jQuery.sap.getUriParameters().mParams[p];return a&&(a.length>0);},_isWhitelisted:function(c){var C=c.getMetadata().getName();for(var i=0;i<F.A_WHITELIST.length;i++){var n=F.A_WHITELIST[i].substring(0,F.A_WHITELIST[i].length-2);if(this._isPrefixedString(C,n)){return true;}}return false;},_isAdaptationRequired:function(a){for(var o in a){if(a[o]===true){return true;}}return false;},_isPrefixedString:function(s,p){return s&&p&&(s.substring(0,p.length)===p);},_hasMinVersionSmallerThan:function(c,v){var i=c.getMetadata().getManifestEntry("sap.ui5"),m=true;if(i&&i.dependencies&&i.dependencies.minUI5Version){var M=new jQuery.sap.Version(i.dependencies.minUI5Version);m=M.compareTo(new jQuery.sap.Version(v))<0;}return m;},_isSgnTrue:function(v){return(v===true)||(v==="true");}};U._fnOnInstanceInitialized=function(c){var C=c.getAggregation("rootControl");if(!C||C.getId()==="navContainerFlp"||c.getId().indexOf("application-")!==0){return;}var o=F.getConfiguration(c);if(!F._isAdaptationRequired(o)){return;}if(!sap.ui.core.service||!sap.ui.core.service.ServiceFactoryRegistry||typeof sap.ui.core.service.ServiceFactoryRegistry.get!=="function"){jQuery.sap.log.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return;}var d={onBeforeRendering:function(){C.removeEventDelegate(d);var s=sap.ui.core.service.ServiceFactoryRegistry.get("sap.ushell.ui5service.ShellUIService"),S=s&&s.createInstance();if(!s||!S){jQuery.sap.log.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return;}S.then(function(s){if(s&&(s.getUxdVersion()===2)){jQuery.sap.require("sap.ushell.Fiori20Adapter");sap.ushell.Fiori20Adapter.applyTo(C,c,o,s);}},function(e){jQuery.sap.log.warning("Fiori20Adapter not loaded as ShellUIService is not available",e,"sap.ushell.Fiori20AdapterTest");});}};C.addEventDelegate(d);};},false);sap.ui.predefine('sap/ushell/System',function(){"use strict";var S=function(d){this.getAlias=function(){return d.alias;};this.getBaseUrl=function(){return d.baseUrl;};this.getClient=function(){return d.client;};this.getName=function(){return d.system;};this.getPlatform=function(){return d.platform;};this.adjustUrl=function(u){if(u.indexOf('/')!==0||u==='/'){throw new Error("Invalid URL: "+u);}if(d.baseUrl===";o="){if(d.alias){u=u+";o="+d.alias;}}else if(d.baseUrl){u=d.baseUrl.replace(/\/$/,"")+u;}if(d.client){u+=(u.indexOf("?")>=0?"&":"?")+"sap-client="+d.client;}return u;};this.toString=function(){return JSON.stringify(d);};};return S;},true);sap.ui.predefine('sap/ushell/Ui5ServiceFactory',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service"],function(S,a,b){"use strict";var A;function s(i){A=i;}function g(){return A;}function c(m){return!!/^[^_].+/.test(m);}function d(o){var p,P=[];for(p in o){P.push(p);}return P;}function e(u,p,P,i){d(u).filter(c).filter(function(n){var v=u[n];p[n]=v;return typeof v==="function";}).forEach(function(F){p[F]=p[F].bind(u);if(i){h(P,p,F);}});}function f(C){var G;if(typeof C==="undefined"){return true;}if(!jQuery.isPlainObject(C)){return false;}if(!C.scopeType){return false;}G=jQuery.sap.getObject("scopeObject.getId",undefined,C);if(typeof G!=="function"){return false;}return true;}function h(p,P,m){var o=P[m];P[m]=function(){var i,n,A=g();if(!p||p.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+m+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined;}n=new Array(arguments.length);for(i=0;i<n.length;++i){n[i]=arguments[i];}return o.apply(P,n);};}function j(p,u){var P,i;P={};i=typeof p==="object";e(u,P,p,i);if(i&&p.scopeType==="component"&&p.scopeObject&&p.scopeObject.getId){s(p.scopeObject.getId());}return P;}function k(u){return new Promise(function(r,R){try{var U=sap.ushell.Container.getService(u);r(U);}catch(E){R(E);}});}function l(u){var U=a.extend("sap.ushell.ui5service."+u+"Factory",{createInstance:function(p){return new Promise(function(r,R){k(u).then(function(o){var i,m,n;if(!f(p)){jQuery.sap.log.error("Invalid context for "+u+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");R("Invalid Context for "+u+" service");return;}m=j(p,o,u);n=b.extend("sap.ushell.ui5service."+u,{getInterface:function(){return m;}});i=new n(p);r(i);},function(G){R(G);});});}});return new U();}return{createServiceFactory:l};});sap.ui.predefine('sap/ushell/User',['./utils'],function(u){"use strict";function c(o){if(o===undefined){return undefined;}return jQuery.extend(true,{},o);}function g(o){var O;if(o.host&&typeof o.host==="function"&&o.host()){O=o.host();if(typeof o.protocol==="function"&&o.protocol()){O=o.protocol()+"://"+O;}return O;}return"";}function i(t){return t.indexOf("sap_")===0;}var U=function(C){var a=[],b,s,o,n,e=new sap.ui.base.EventProvider();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(d){C.image=d;e.fireEvent('onSetImage',d);};this.attachOnSetImage=function(f,d){e.attachEvent('onSetImage',f,d);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===U.prototype.constants.themeFormat.ORIGINAL_THEME){return o.originalTheme.theme;}if(t===U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===U.prototype.constants.themeFormat.NWBC){if(i(o.theme)){return o.theme;}else{return this.getTheme(U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot}else{return"";}};this.setTheme=function(N){if(this.isSetThemePermitted()===false){var E="setTheme not permitted";jQuery.sap.log.error(E);throw new Error(E);}o=this._amendTheme({theme:N,root:this.getThemeRoot(N)},s);if(N!==n.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},n.originalTheme.theme,N);n=o;}if(o.suppliedRoot){sap.ui.getCore().applyTheme(o.theme,o.suppliedRoot+"/UI5/");}else if(o.path){sap.ui.getCore().applyTheme(o.theme,o.path+"/UI5/");}else{sap.ui.getCore().applyTheme(o.theme);}};this.setLanguage=function(N){if(N){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,N);C.language=N;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var E="setAccessibilityMode not permitted";jQuery.sap.log.error(E);throw new Error(E);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(d){if(this.isSetContentDensityPermitted()===false){var E="setContentDensity not permitted";jQuery.sap.log.error(E);throw new Error(E);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,d);C.contentDensity=d;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return jQuery.extend(true,[],a);};this.setChangedProperties=function(p,d,f){a.push({propertyName:p.propertyName,name:p.name,oldValue:d,newValue:f});};this.resetChangedProperties=function(){a=[];};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(d){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,d);C.isImageConsent=d;};this.getImageConsent=function(){return C.isImageConsent;};s={locationPathUi5:(new URI(jQuery.sap.getModulePath(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new URI(document.location))};if(!s.locationPathUi5){jQuery.sap.log.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){jQuery.sap.log.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){jQuery.sap.log.warning("User: Could not set front-end server location origin");}b=C.bootTheme||{theme:"",root:""};o=this._amendTheme(b,s);n=o;};U.prototype._amendTheme=function(t,s){var T={},a,r;function b(R,s){var o,O,p={};o=new URI(R);O=g(o);if(O){p.locationOrigin=O;p.locationPath=o.path();}else{p.locationOrigin=s.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){a=T.originalTheme.theme.split('@',2);T.theme=a[0];T.suppliedRoot=a[1];r=b(a[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=b(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(i(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};U.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return U;},true);sap.ui.predefine('sap/ushell/UserActivityLog',['./utils'],function(u){"use strict";var U=function(){};U.prototype={_maxLoggedMessages:30,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroup","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","appOpened","addBookmarkTile"],_observedGeneralActions:["showCatalog","openApp"],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(c){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,d){e.subscribe("launchpad",b,t._handleAction,t);});this._observedGeneralActions.forEach(function(b,i,d){e.subscribe(b,t._handleAction,t);});jQuery.sap.log.addLogListener(this);jQuery.sap.log.debug("requiring sap.ushell.ui.launchpad.Tile",new Error().stack,"sap.ushell.UserActivityLog");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");t._tileOntapOrigFunc=sap.ushell.ui.launchpad.Tile.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.unsubscribe("launchpad",b,t._handleAction,t);});this._observedGeneralActions.forEach(function(b,i,c){e.unsubscribe(b,t._handleAction,t);});jQuery.sap.log.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,b){if(this._isActive){this._addMessageInternal(t,m,b);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(s){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:u.getFormFactor()};return r;},getMessageInfoAsString:function(s){return JSON.stringify(this.getMessageInfo(s));},onLogEntry:function(d){var e=(typeof d.details!="undefined"&&(d.details!==""))?(d.message+" , "+d.details):d.message;this.addMessage(this.messageType.ERROR,e);},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,b,c,d,e;return function(f,g){var h=this.getMetadata().getName();if(h=="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(h=="sap.ushell.ui.launchpad.Tile"){n=hasher.getHash();if(n){var i=sap.ushell.Container.getService("URLParsing");var j=i.parseShellHash(n);n='#'+i.constructShellHash({target:{semanticObject:j.semanticObject,action:j.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();b=sap.ui.getCore().byId(this.getId());c=b.getModel();d=this.getBindingContext();e=d.getPath();l.tileTitle=d.getModel().getProperty(e).title;t._putInLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+c.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,b){var l=this._getLoggingQueueFromStorage(),c={type:null},p;for(p in this.messageType){if(t==this.messageType[p]){c.type=p;break;}}if(c.type===null){return;}jQuery.extend(c,{messageID:b,messageText:m,time:new Date(),toString:function(){var d=[this.type,this.time];if(typeof this.messageID!=="undefined"){d.push(this.messageID);}d.push(this.messageText);return d.join(" :: ");}});l.push(c);if(l.length>this._maxLoggedMessages){l.shift();}this._putInLocalStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleAction:function(c,e,d){var m;switch(e){case'deleteTile':m="Delete Tile "+(d.tileId||"");break;case'moveTile':m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case'createGroup':m="Create Group";break;case'changeGroupTitle':m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case'deleteGroup':m="Delete Group "+(d.groupId||"");break;case'addTile':var t=d.catalogTileContext.oModel.oData,T=d.catalogTileContext.sPath,b=this._findInModel(T,t),f=b.id,g=d.groupContext.oModel.oData,G=d.groupContext.sPath,h=this._findInModel(G,g),i=h.groupId;m="Add Tile "+(f||"")+" to Group "+(i||"");break;case'moveGroup':m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case'appOpened':m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(p){l.applicationInformation[p]=d[p];});if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case'addBookmarkTile':m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case'showCatalog':m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var b,c=m,i,d;try{b=p.split("/");for(i=0;i<b.length;i=i+1){if(d!==b[i]){continue;}c=c[d];}}catch(e){return undefined;}return c;},_getUserDetails:function(s){var b=sap.ushell.Container.getUser();return{fullName:b.getFullName()||"",userId:b.getId()||"",eMail:b.getEmail()||"",Language:b.getLanguage()||""};},_getShellState:function(){var v=sap.ui.getCore().byId("viewPortContainer"),m,r="";if(v!==undefined){m=v.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromLocalStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(b,c){if((!b)||(!c)){return false;}return(this._getHashSegment(b)==this._getHashSegment(c))?true:false;},_getHashSegment:function(b){var i=b.indexOf("~"),c;if(i>-1){return b.substring(0,i);}c=b.indexOf("?");if(c>-1){return b.substring(0,c);}return b;},_getFromLocalStorage:function(k){var r=null;try{r=localStorage.getItem(k);}catch(e){}return r;},_putInLocalStorage:function(k,v){try{localStorage.setItem(k,v);}catch(e){}}};var a=new U();return a;},true);sap.ui.predefine('sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter',["sap/ushell/utils/utilsCdm","sap/ushell/services/CommonDataModel"],function(u){"use strict";var C=function(s,p,a){this._oAdapterConfig=a&&a.config;this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",client:"",language:""};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new jQuery.Deferred();sap.ushell.Container.getService("CommonDataModel").getSite().then(function(S){var i=u.formatSite(S)||[];t._getInboundsDeferred.resolve(i);},function(e){t._getInboundsDeferred.reject(e);});}return this._getInboundsDeferred.promise();};this._createSIDMap=function(A){return Object.keys(A).sort().reduce(function(S,i){var c=A[i];var b="SID("+c["systemId"]+"."+c["client"]+")";if(!S.hasOwnProperty(b)&&c.hasOwnProperty("systemId")&&c.hasOwnProperty("client")){S[b]=i;}return S;},{})};this._getSystemAliases=function(){var t=this;if(!this.Deferred){this.Deferred=new jQuery.Deferred();sap.ushell.Container.getService("CommonDataModel").getSite().then(function(S){var o=jQuery.extend(true,{},S.systemAliases||{});Object.keys(o).forEach(function(i){o[i].id=i;});t.Deferred.resolve(o);},function(e){t.Deferred.reject(e);});}return this.Deferred.promise();};this.resolveSystemAlias=function(S){var d=new jQuery.Deferred(),t=this;this._getSystemAliases().done(function(o){var m;var M;if(o.hasOwnProperty(S)){d.resolve(o[S]);return;}if(S===""){d.resolve(t._oLocalSystemAlias);return;}S=S.toUpperCase(S);if(!t._oSIDMap){t._oSIDMap=t._createSIDMap(o);}if(t._oSIDMap.hasOwnProperty(S)){var b=o[t._oSIDMap[S]];d.resolve(b);return;}m="Cannot resolve system alias "+S;jQuery.sap.log.warning(m,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");d.reject(m);}).fail(function(e){d.reject(e);});return d.promise();};};return C;},true);sap.ui.predefine('sap/ushell/adapters/cdm/ContainerAdapter',['sap/ushell/utils','sap/ushell/User','sap/ushell/System'],function(u,U,S){"use strict";var C=function(i,p,P){var a="/sap/public/bc/icf/logoff",l=g(P.config,a),o=c(P.config),s=b(i,P.config);function g(f,D){if(f.systemProperties&&f.systemProperties.logoutUrl){return f.systemProperties.logoutUrl;}return D;}function c(f){var h,j=f.userProfile;if(j){h=d(j.defaults,f.userProfilePersonalization,j.metadata);}return new U(h||e());}function b(O,f){var h=f.systemProperties,A=O.getAlias(),j=O.getPlatform(),B=O.getBaseUrl(),k,m;if(h){A=h.alias||A;j=h.platform||j;k=h.SID;m=h.client;}return new S({alias:A,platform:j,baseUrl:B,system:k,client:m});}function d(D,f,h){var j=jQuery.extend(e(),D,f);j.bootTheme=j.bootTheme||{theme:j.theme,root:""};delete j.theme;if(h){if(h.editablePropterties){j.setThemePermitted=h.editablePropterties.indexOf("theme")>-1;j.setAccessibilityPermitted=h.editablePropterties.indexOf("accessibility")>-1;j.setContentDensityPermitted=h.editablePropterties.indexOf("contentDensity")>-1;}if(h.ranges){j.ranges=h.ranges;}}return j;}function e(){return{setThemePermitted:false,setAccessibilityPermitted:false,setContentDensityPermitted:false};}this._getLogoutUrl=function(){return l;};this._setDocumentLocation=function(L){document.location=L;};this.getSystem=function(){return s;};this.getUser=function(){return o;};this.load=function(){return jQuery.when();};this.getCurrentUrl=function(){return window.location.href;};this.logout=function(L){var f;if(!L){throw new Error("Not implemented");}if(u.hasNativeLogoutCapability()){f=(new URI(this._getLogoutUrl())).absoluteTo(this.getCurrentUrl()).search("").toString();u.getPrivateEpcm().doLogOff(f);}else{this.logoutRedirect();}return jQuery.when();};this.logoutRedirect=function(){var f=s.adjustUrl(this._getLogoutUrl());this._setDocumentLocation(f);};};return C;},true);sap.ui.predefine('sap/ushell/adapters/cdm/LaunchPageAdapter',["sap/m/Text","sap/m/GenericTile","sap/m/GenericTileMode","sap/ushell/resources","sap/ushell/utils/utilsCdm","sap/ushell/utils","sap/ushell/navigationMode"],function(T,G,g,r,u,U,n){"use strict";var l=jQuery.sap.log.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter"),L=jQuery.sap.log.Level;function a(o,p,A){var _,s="sap.ushell.components.tiles.cdm.applauncher",d="sap.ushell.components.tiles.cdm.applauncherdynamic";this._mResolvedTiles={};this._mResolvedCatalogTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};this.TileType={Tile:"tile",Link:"link"};this.getGroups=function(){var D=new jQuery.Deferred();this._assureLoaded().done(function(e){D.resolve(e);}).fail(function(){D.resolve([]);});return D.promise();};this._getTileFromHashInContextOfSite=function(R,C,I){var D=new jQuery.Deferred(),e=C[I];if(!e){e=R(I);C[I]=e;}e.done(function(w){var x={tileIntent:I,tileResolutionResult:w};D.resolve(x);}).fail(function(E){D.reject("Hash '"+I+"' could not be resolved to a tile. "+E);});return D.promise();};this._getTileFromHash=function(I){var C=sap.ushell.Container.getService("ClientSideTargetResolution");var R=C.resolveTileIntent.bind(C);return this._getTileFromHashInContextOfSite(R,this._mCatalogTilePromises,I);};this._getTileFromHashFromSite=function(S,I){var C=sap.ushell.Container.getService("ClientSideTargetResolution");var e=u.formatSite(S);var R=C.resolveTileIntentInContext.bind(C,e);var w={};return this._getTileFromHashInContextOfSite(R,w,I);};this._getTileForUrl=function(e){var w=e.indicatorDataSource?"#Shell-dynamicTile":"#Shell-staticTile";return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:w,isCustomTile:false}};};this._assureGroupItemsResolved=function(e,S){var P=[],R,w;if(e.payload&&e.payload.tiles){R=this._assureGroupTilesResolved(e.payload.tiles,S);Array.prototype.push.apply(P,R);}if(e.payload&&e.payload.links){w=this._assureGroupLinksResolved(e.payload.links,S);Array.prototype.push.apply(P,w);}return P;};this._assureGroupTilesResolved=function(e,S){return(e||[]).map(function(w,I){return this._resolveGroupTile(w,S).then(function(R){R.isLink=false;return R;});},this);};this._assureGroupLinksResolved=function(e,S){return(e||[]).map(function(w,I){return this._resolveGroupTile(w,S).then(function(R){R.isLink=true;return R;});},this);};this._resolveGroupTile=function(e,S){var w=this._mResolvedTiles;var F=this._mFailedResolvedTiles;var R;function x(z){w[e.id]=z;if(F[e.id]){delete F[e.id];}return z;}function y(e){var z=e.target;return z&&z.semanticObject==="Shell"&&z.action==="launchURL";}if(w[e.id]){return(new jQuery.Deferred()).resolve(w[e.id]).promise();}if(e.target&&e.target.url){R=jQuery.when(this._getTileForUrl(e));}else if(e.isBookmark){R=this._resolveTileByIntent(e,S);}else if(y(e)){R=this._resolveTileByIntent(e,S);}else{R=this._resolveTileByAppId(e,S);}R.done(function(z){x(z);}).fail(function(z){F[e.id]=z;});return R;};this._resolveTileByAppId=function(e,S){var w,x,I,y,H;function z(E,F){return new jQuery.Deferred().reject({logLevel:E,message:F}).promise();}if(!jQuery.isPlainObject(e)){return z(L.ERROR,"Cannot resolve tile: oTile must be an object");}if(!jQuery.isPlainObject(S)){return z(L.ERROR,"Cannot resolve tile: oSite must be an object");}w=e.appId||e.appIDHint;if(!w){return z(L.ERROR,["Cannot resolve tile '",e.id,"': either appId or appIDHint must be specified"].join(""));}x=S.applications&&S.applications[w];if(!x){return z(L.INFO,["Tile '",e.id,"' filtered from result: no app found for appId '",w,"' (dangling app reference)"].join(""));}I=this._getFirstInbound(x);if(!I){return z(L.ERROR,["Cannot resolve tile '",e.id,"': app '",w,"' has no navigation inbound"].join(""));}var M=u.mapOne(I.key,I.inbound,x),B=M.resolutionResult.applicationType,C=M.resolutionResult.additionalInformation,D=sap.ushell.Container.getService("ClientSideTargetResolution").isInPlaceConfiguredFor(B);y=M.tileResolutionResult;y.navigationMode=n.computeNavigationModeForHomepageTiles(B,C,D);y.isLink=false;if(!this._isFormFactorSupported(y)){return z(L.INFO,["Tile '",e.id,"' filtered from result: form factor not supported"].join(""));}H=this._toHashFromInbound(I.inbound);return jQuery.when({tileResolutionResult:y,tileIntent:H});};this._isFormFactorSupported=function(e){var C=U.getFormFactor();return e.deviceTypes&&e.deviceTypes[C];};this._getFirstInbound=function(e){var F=Object.keys(e["sap.app"].crossNavigation.inbounds).shift(),I=e["sap.app"].crossNavigation.inbounds[F];return{key:F,inbound:I};};this._resolveTileByIntent=function(e,S){var H=this._prepareTileHash(e);return this._getTileFromHash(H);};this._prepareTileHash=function(e){var w=sap.ushell.Container.getService("URLParsing"),P={},x,R;if(this._isCatalogTile(e)){return e.tileIntent;}if(this._isGroupTile(e)){R=e.target.parameters||[];R.forEach(function(y){if(y.name&&y.value){P[y.name]=[y.value];}});x={target:{semanticObject:e.target.semanticObject,action:e.target.action},params:P,appSpecificRoute:e.target.appSpecificRoute};return"#"+w.constructShellHash(x);}return undefined;};this._allPromisesDone=function(P){var D=new jQuery.Deferred(),e;if(P.length===0){D.resolve([]);}else{var N=P.map(function(w){e=new jQuery.Deferred();w.always(e.resolve.bind(e));return e.promise();});jQuery.when.apply(this,N).done(function(){var w=Array.prototype.slice.call(arguments);D.resolve(w);});}return D.promise();};this._generateDefaultGroup=function(){var e,w,D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel");C.getSite().done(function(S){e=sap.ushell.utils.generateUniqueId(S.site.payload.groupsOrder);w={"identification":{"id":e,"namespace":"","title":"Home"},"payload":{"isDefaultGroup":true,"locked":false,"tiles":[],"links":[],"groups":[]}};_=w;S.groups[e]=w;S.site.payload.groupsOrder.unshift(e);D.resolve(w);}).fail(function(E){D.reject("Failed to access site. "+E);});return D.promise();};this._assureLoaded=function(){var e=this,C=sap.ushell.Container.getService("CommonDataModel"),D,w=[],x;if(this._assureLoadedDeferred){return this._assureLoadedDeferred.promise();}x=new jQuery.Deferred();this._assureLoadedDeferred=x;C.getSite().done(function(S){var I=[];S.site.payload.groupsOrder.forEach(function(y,z){var B=S.groups[y];if(B){B.payload=B.payload||{};if(B.payload.hasOwnProperty("isDefaultGroup")){_=B;}w.push(B);I=e._assureGroupItemsResolved(B,S).concat(I);}});if(_===undefined){D=e._generateDefaultGroup();I.push(D);D.done(function(y){w.unshift(y);}).fail(function(E){jQuery.sap.log.error("Delivering hompage groups failed - "+E);e._assureLoadedDeferred.resolve([]);});}e._allPromisesDone(I).done(function(){e._assureLoadedDeferred.resolve(w);delete e._assureLoadedDeferred;e._logTileResolutionFailures(e._mFailedResolvedTiles);});}).fail(function(E){jQuery.sap.log.error("Delivering hompage groups failed - "+E);e._assureLoadedDeferred.resolve([]);delete e._assureLoadedDeferred;});return x.promise();};this._logTileResolutionFailures=function(F){var M={};if(!F){return;}Object.keys(L).filter(function(e){var w=L[e];return w>=L.FATAL&&w<=L.ALL;}).forEach(function(e){M[L[e]]="";});Object.keys(F).forEach(function(e){var w=F[e];if(w.logLevel){M[w.logLevel]=M[w.logLevel].concat(w.message).concat("\n");}});if(M[L.FATAL]){l.fatal(M[L.FATAL]);}if(M[L.ERROR]){l.error(M[L.ERROR]);}if(M[L.WARNING]){l.warning(M[L.WARNING]);}if(M[L.INFO]){l.info(M[L.INFO]);}if(M[L.DEBUG]){l.debug(M[L.DEBUG]);}if(M[L.TRACE]){l.trace(M[L.TRACE]);}};this.getDefaultGroup=function(){var D=new jQuery.Deferred(),e;if(!_){e=this._assureLoaded();}if(e){e.done(function(){D.resolve(_);}).fail(function(M){D.reject("Failed to access default group. "+M);});}else{D.resolve(_);}return D.promise();};this._isValidTitle=function(e){if(typeof e!=='string'||!e){return false;}return true;};this._isGroupPreset=function(e){if(!e.payload.hasOwnProperty("isPreset")){return true;}return!!e.payload.isPreset;};this._isGroupLocked=function(e){return!!e.payload.locked;};this.addGroup=function(e){var D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel"),w,x,y,z=this;if(!this._isValidTitle(e)){return D.reject("No valid group title").promise();}y="Failed to add the group with title '"+e+"' to the homepage. ";C.getSite().done(function(S){x=sap.ushell.utils.generateUniqueId(S.site.payload.groupsOrder);w={"identification":{"id":x,"namespace":"","title":e},"payload":{"locked":false,"isPreset":false,"tiles":[],"links":[],"groups":[]}};S.groups[x]=w;S.site.payload.groupsOrder.push(w.identification.id);C.save().done(function(){delete z._assureLoadedDeferred;D.resolve(S.groups[x],x);}).fail(function(E){D.reject(E);});}).fail(function(E){D.reject(y+E);});return D.promise();};this.getGroupTitle=function(e){return e.identification.title;};this.setGroupTitle=function(e,N){var w=this,D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel"),O,x;if(typeof e!=='object'||!e.identification||!e.identification.id){return D.reject("Unexpected group value").promise();}if(!w._isValidTitle(N)){return D.reject("Unexpected oGroup title value").promise();}x="Failed to set new title for group with id '"+e.identification.id+"'. ";O=e.identification.title;C.getSite().done(function(S){if(S.groups[e.identification.id]){S.groups[e.identification.id].identification.title=N;}C.save().done(function(){D.resolve();}).fail(function(E){jQuery.sap.log.error(E);D.reject(O);});}).fail(function(E){D.reject(O,x+E);});return D.promise();};this.getGroupId=function(e){return e.identification.id;};this.hideGroups=function(H){var D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel"),e;if(H&&jQuery.isArray(H)){e="Failed to hide group. ";C.getSite().done(function(S){if(H.length>0){Object.keys(S.groups).forEach(function(w){if(jQuery.inArray(S.groups[w].identification.id,H)>-1){S.groups[w].identification.isVisible=false;}else{delete S.groups[w].identification.isVisible;}});}if(H.length===0){Object.keys(S.groups).forEach(function(w){delete S.groups[w].identification.isVisible;});}C.save().done(function(){D.resolve();}).fail(function(E){D.reject("Hiding of groups did not work as expected - "+E);});}).fail(function(E){D.reject(e+E);});}else{D.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return D.promise();};this.isGroupVisible=function(e){if(e.identification.isVisible===undefined||e.identification.isVisible===true){return true;}else{return false;}};this.moveGroup=function(e,w){var D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel"),x,y;if(!e||!e.identification||!e.identification.id||w<0){return D.reject("Unable to move groups - invalid parameters").promise();}y="Failed to move group with id '"+e.identification.id+"'. ";C.getSite().done(function(S){if(!S.site.payload.groupsOrder){return D.reject("groupsOrder not found - abort operation of adding a group.");}else if(S.site.payload.groupsOrder.indexOf(e.identification.id)===w){return D.resolve();}x=sap.ushell.utils.moveElementInsideOfArray(S.site.payload.groupsOrder,S.site.payload.groupsOrder.indexOf(e.identification.id),w);if(!x){return D.reject("invalid move group operation - abort.");}C.save().done(function(){D.resolve();}).fail(function(E){D.reject(E);});}).fail(function(E){D.reject(y+E);});return D.promise();};this.removeGroup=function(e){var D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel"),w;if(!e||typeof e!=="object"||!e.identification||!e.identification.id){return D.reject("no valid input parameter for 'oGroup'").promise();}w="Failed to remove group with id '"+e.identification.id+"'. ";C.getSite().done(function(S){if(S&&S.groups&&S.groups[e.identification.id]){delete S.groups[e.identification.id];}if(S&&S.site&&S.site.payload&&S.site.payload.groupsOrder){S.site.payload.groupsOrder=jQuery.grep(S.site.payload.groupsOrder,function(x){return x!==e.identification.id;});}C.save().done(function(){D.resolve();}).fail(function(E){D.reject(E);});}).fail(function(E){D.reject(w+E);});return D.promise();};this.resetGroup=function(e){var D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel"),S={},w=this,x;if(e&&typeof e==="object"&&e.identification&&e.identification.id){x="Failed to reset group with id '"+e.identification.id+"'. ";C.getSite().done(function(y){jQuery.extend(true,S,y.groups);if(w.isGroupRemovable(e)===false){C.getGroupFromOriginalSite(e.identification.id).done(function(z){if(y&&typeof y==="object"&&y.groups&&y.groups[e.identification.id]){y.groups[e.identification.id]=z;}C.save().done(function(){D.resolve(z);}).fail(function(E){D.reject("Group could not be reset - "+E,S);});}).fail(function(E){D.reject("Group could not be reset - "+E,S);});}else{D.reject("Group could not be reset as it was created by the user",S);}}).fail(function(E){D.reject(x+E,S);});}return D.promise();};this.getTileTitle=function(e){var R;if(e&&e.isBookmark){return e.title;}R=this._mResolvedTiles[e.id];if(R){return e.title||R.tileResolutionResult.title;}else{return undefined;}};this.getTileSubtitle=function(e){var R;if(e.isBookmark){return e.subTitle;}R=this._mResolvedTiles[e.id];if(R){return e.subTitle||R.tileResolutionResult.subTitle;}else{return undefined;}};this.getTileIcon=function(e){var R;if(e.isBookmark){return e.icon;}R=this._mResolvedTiles[e.id];if(R){return e.icon||R.tileResolutionResult.icon;}else{return undefined;}};this.getTileInfo=function(e){var R;if(e.isBookmark){return e.info;}R=this._mResolvedTiles[e.id];return e.info||R.tileResolutionResult.info;};this.getTileIndicatorDataSource=function(e){var R=this._mResolvedTiles[e.id],w={},x;if(e.indicatorDataSource){w.indicatorDataSource=e.indicatorDataSource;if(e.dataSource){w.dataSource=e.dataSource;}return w;}if(!R){return w;}x=R.tileResolutionResult;if(x.indicatorDataSource){w.indicatorDataSource=x.indicatorDataSource;if(x.indicatorDataSource.hasOwnProperty("dataSource")){var D=x.indicatorDataSource.dataSource,y=x.dataSources;if(y&&y.hasOwnProperty(D)){w.dataSource=y[D];}else{jQuery.sap.log.warning("datasource referenced but not found for tile: "+R.tileIntent);}}}return w;};this.isGroupRemovable=function(e){return!this._isGroupPreset(e);};this.isGroupLocked=function(e){return this._isGroupLocked(e);};this.getGroupTiles=function(e){var w=e.payload.tiles||[];if(e.payload.links&&jQuery.isArray(e.payload.links)&&e.payload.links.length>0){w=w.concat(e.payload.links);}return w;};this.getLinkTiles=function(e){if(e.payload.links&&jQuery.isArray(e.payload.links)&&e.payload.links.length>0){return e.payload.links;}else{return[];}};this.getTileType=function(e){var R=this._mResolvedTiles[e.id];if(R&&R.isLink){return this.TileType.Link;}return this.TileType.Tile;};this.getTileId=function(e){return e.id;};this.getTileSize=function(e){var R=this._mResolvedTiles[e.id];if(R&&R.tileResolutionResult&&R.tileResolutionResult.size){return R.tileResolutionResult.size;}return"1x1";};this.getTileTarget=function(e){var R,w=this._mResolvedTiles[e.id],x;if(e.target&&e.target.url){return e.target.url;}if(w&&w.tileResolutionResult){R=w.tileResolutionResult;if(R.isCustomTile!==true){return w.tileIntent;}if(R&&typeof R.targetOutbound==="object"){x=this._toHashFromOutbound(R.targetOutbound);if(x){return x;}}}jQuery.sap.log.warning("Could not find a target for Tile with id '"+e.id+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};this.isLinkPersonalizationSupported=function(e){return true;};this.isTileIntentSupported=function(e){return(this._mFailedResolvedTiles[e.id]===undefined)?true:false;};this.refreshTile=function(e){};this._notifyTileAboutVisibility=function(e,N,O){if(typeof e.tileSetVisible==="function"&&O!==N){e.tileSetVisible(N);}};this.setTileVisible=function(e,N){var R=this._mResolvedTiles[e.id];if(R){if(R.tileComponent){this._notifyTileAboutVisibility(R.tileComponent,N,R.visibility);}R.visibility=N;}};this.getTileView=function(e){var w=this;return new jQuery.Deferred(function(D){return w._getTileView(e,false).then(function(x){D.resolve(x);},function(R){var E="Tile with ID '"+e.id+"' could not be initialized"+(R?":\n"+R:".");jQuery.sap.log.error(E,null,e.tileType);D.reject(E);});}).promise();};this._getTileUiComponentContainer=function(e,R,I){var w=this,x,y,N,z,C,B;var D=sap.ushell.Container.getService("Ui5ComponentLoader");if(I===true){y=w._createTileComponentData(e,true,R);}else{y=w._createTileComponentData(e,false,R);}x=R.tileResolutionResult;if(R.isLink){N=x.navigationMode;var E=new jQuery.Deferred();E.resolve(w._createLinkInstance(e,I,N,G,r));return E.promise();}var F=this._createTileComponentProperties(y,x.tileComponentLoadInfo);if(!F.name){return new jQuery.Deferred().reject("Cannot find name of tile component for tile with id: '"+e.id+"'").promise();}if(F.manifest){y.properties=y.properties||{};y.properties.manifest=F.manifest;}B=this.isCustomTile(F.name);var H=function(M){var R;z=M.componentHandle.getInstance();C=new sap.ui.core.ComponentContainer({component:z,height:'100%'});if(I===true){w._mResolvedCatalogTiles[e.id].tileComponent=z;}else{R=w._mResolvedTiles[e.id];R.tileComponent=z;if(typeof R.visibility==="boolean"){w._notifyTileAboutVisibility(z,R.visibility);}}return C;};var J=function(){return D.createComponent({loadCoreExt:B,loadDefaultDependencies:false,componentData:y,url:F.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:F,ui5ComponentName:F.name},{},[]).then(H);};var K=function(){var M={componentData:y,url:F.url,name:F.name,async:false};z=sap.ui.component(M);var O={componentHandle:{getInstance:function(){return z}}};return H(O);};return B?J():jQuery.when(K());};this._createTileComponentProperties=function(e,w){var x={};if(typeof w==="string"){if(e.properties.indicatorDataSource&&e.properties.indicatorDataSource.path){x.name=d;}else{x.name=s;}return x;}if(typeof w==="object"&&w!==null){x=w.componentProperties||{};x.name=w.componentName;}return x;};this._getTileView=function(e){var R,E,D=new jQuery.Deferred();if(typeof e!=="object"||!e.id){E="Invalid input parameter passed to _getTileView: "+e;jQuery.sap.log.error(E);return D.reject(E).promise();}R=this._mResolvedTiles[e.id];if(R){return this._getTileUiComponentContainer(e,R,false);}E="No resolved tile found for tile ID: "+e.id;jQuery.sap.log.error(E);return D.reject(E).promise();};this._getCatalogTileView=function(C){if(typeof C!=="object"){return new jQuery.Deferred().reject(C);}return this._getTileUiComponentContainer(C,C,true);};this._createTileComponentData=function(e,I,R){var w=I?this.getCatalogTileTitle(e):this.getTileTitle(e),S=I?this.getCatalogTilePreviewSubtitle(e):this.getTileSubtitle(e),x=I?this.getCatalogTilePreviewIcon(e):this.getTileIcon(e),y=I?this.getCatalogTilePreviewInfo(e):this.getTileInfo(e),z=I?this.getCatalogTileTargetURL(e):this.getTileTarget(e),B=this.getTileIndicatorDataSource(e),C={properties:{},startupParameters:{}};if(R.tileResolutionResult.isCustomTile===true&&R.tileResolutionResult.startupParameters){C.startupParameters=R.tileResolutionResult.startupParameters;}if(w){C.properties.title=w;}if(y){C.properties.info=y;}if(S){C.properties.subtitle=S;}if(x){C.properties.icon=x;}if(z){C.properties.targetURL=z;}if(B.indicatorDataSource){C.properties.indicatorDataSource=B.indicatorDataSource;if(B.dataSource){C.properties.dataSource=B.dataSource;}}if(R.tileResolutionResult){C.properties.navigationMode=R.tileResolutionResult.navigationMode;}return C;};this._createLinkInstance=function(e,I,N,w,r){var x,y,z,B=this.getTileSubtitle(e);var G=w;if(I===true){x=this.getCatalogTileTitle(e);}else{x=this.getTileTitle(e);}y=new G({mode:g.LineMode,subheader:B,header:x,press:function(E){this._genericTilePressHandler(e,E);}.bind(this)});if(N){z=r.i18n.getText(N+"NavigationMode");y.setAriaLabel(z+" "+x+" "+B);}this._mResolvedTiles[e.id].linkTileControl=y;return y;};this._genericTilePressHandler=function(e,E){var w;if(E.getSource().getScope&&E.getSource().getScope()==="Display"){w=this.getTileTarget(e);if(w){if(w[0]==='#'){hasher.setHash(w);}else{window.open(w,'_blank');}}}};this._addTileToSite=function(P,e,N,C){var w=this,D=new jQuery.Deferred(),I=sap.ushell.Container.getService("URLParsing").parseShellHash(N.properties.targetURL),x={"id":w.getTileId(N),"target":{"semanticObject":I.semanticObject,"action":I.action,"parameters":v(I.params)}};P.groups[e.identification.id].payload.tiles.push(x);C.save().done(function(){D.resolve(x);}).fail(function(M){D.reject(M);});return D.promise();};this.addTile=function(C,e){var D=new jQuery.Deferred(),w,x=sap.ushell.Container.getService("CommonDataModel"),y;if(!e){e=_;}if(C.contentProviderId){if(C.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(C),e);}return D.reject("Extension Tile without URL").promise();}y=h();y.appId=C.tileResolutionResult.appId;this._mResolvedTiles[y.id]={tileIntent:C.tileIntent,tileResolutionResult:C.tileResolutionResult,isLink:false};x.getSite().done(function(S){S.groups[e.identification.id].payload.tiles.push(y);x.save().done(function(){D.resolve(y);}).fail(function(R){D.reject(R);});}).fail(function(E){w="Failed to add tile with id '"+y.id+"' to group with id '"+e.identification.id+"'. ";D.reject(w+E);});return D.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var B={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){B.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;B.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return B;};this.removeTile=function(w,x,I){var C,y,D=new jQuery.Deferred(),z=this;if(!w||typeof w!=="object"||!w.identification||!w.identification.id||!x||typeof x!=="object"||!x.id){return D.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}y="Failed to remove tile with id '"+x.id+"' from group with id '"+w.identification.id+"'. ";C=sap.ushell.Container.getService("CommonDataModel");C.getSite().done(function(S){var P,B;I=+I;try{P=S.groups[w.identification.id].payload;}catch(e){D.reject(S.groups[w.identification.id],y);}B=z.getTileType(x)===z.TileType.Link?"links":"tiles";if(z.getTileType(x)===z.TileType.Link){I-=P.tiles.length;}if(I>=0){P[B].splice(I,1);}else{P[B]=P[B].filter(function(E){return E.id!==x.id;});}C.save().done(function(){D.resolve();}).fail(function(E){jQuery.sap.log.error(E);D.reject(S.groups[w.identification.id],E);});}).fail(function(e){D.reject({},y+e);});return D.promise();};this.moveTile=function(e,S,w,x,y,z){var D=new jQuery.Deferred(),C=sap.ushell.Container.getService("CommonDataModel"),B=this,E;if(!e||jQuery.isEmptyObject(e)||S===undefined||S<0||w===undefined||w<0||!x||!x.identification||!x.identification.id||!y||!y.identification||!y.identification.id){return D.reject("Invalid input parameters").promise();}E="Failed to move tile with id '"+e.id+"'. ";C.getSite().done(function(F){var H,I,O=B.getTileType(e)===B.TileType.Link?"links":"tiles";if(!z){z=B._mResolvedTiles[e.id].isLink?"link":"tile";}H=z==="link"?"links":"tiles";if(O!=H&&B._mResolvedTiles[e.id]){B._mResolvedTiles[e.id].isLink=z==="link";}if(H==="links"){w-=F.groups[y.identification.id].payload.tiles.length;}if(O==="links"){S-=F.groups[x.identification.id].payload.tiles.length;}if(x.identification.id===y.identification.id){if(S!==w||O!=H){I=F.groups[y.identification.id].payload;if(O==="tiles"){w++;}I[O].splice(S,1);I[H].splice(w,0,e);}else{return D.resolve(e).promise();}}else{F.groups[x.identification.id].payload[O].splice(S,1);F.groups[y.identification.id].payload[H].splice(w,0,e);}C.save().done(function(){D.resolve(e);}).fail(function(J){jQuery.sap.log.error(E+J);D.reject(E+J);});}).fail(function(F){jQuery.sap.log.error(E+F);D.reject(E+F);});return D.promise();};this._compareCatalogs=function(e,B){if(e.identification.id>B.identification.id){return 1;}return-1;};this.getCatalogs=function(){var e=this,D=new jQuery.Deferred(),C=[],w=sap.ushell.Container.getService("CommonDataModel");function x(y,z,C,B,P,E){var F=y.catalogs[z];if(P&&E){F.contentProviderId=P;E.catalogsMap[z]=F;}C.push(F);B.notify(F);}window.setTimeout(function(){w.getSite().done(function(S){Object.keys(S.catalogs).forEach(function(y){x(S,y,C,D);});w.getExtensionSites().progress(function(y){var P=y.providerId;var E=y.site;var z=Promise.resolve(E);var B={sitePromise:z,site:E,catalogsMap:{}};Object.keys(E.catalogs).forEach(function(F){e._mContentProviders[P]=B;x(E,F,C,D,P,B);});}).done(function(y){y.filter(function(z){return!z.success;}).forEach(function(F,I){C.push({identification:{id:F.providerId},contentProviderId:F.providerId,error:"The following content providers could not provide catalogs: "+F.providerId+(F.error?" -> "+F.error:"")});});D.resolve(C.sort(e._compareCatalogs));});});},0);return D.promise();};this._isStartableInbound=function(I){var N=["Shell-plugin","Shell-bootConfig"],R;if(!I.semanticObject||!I.action){return false;}if(N.indexOf(I.semanticObject+"-"+I.action)>-1){return false;}if(!jQuery.sap.getObject("signature.parameters",undefined,I)){return true;}R=Object.keys(I.signature.parameters).every(function(p){return!I.signature.parameters[p].filter||(!!I.signature.parameters[p].launcherValue||p==="sap-external-url");});return R;};this._isHiddenInbound=function(I){return!!I.hideLauncher;};this._toHashFromInbound=function(I){var S,P,C;S={target:{semanticObject:I.semanticObject,action:I.action},params:{}};P=jQuery.sap.getObject("signature.parameters",undefined,I)||{};Object.keys(P).forEach(function(K){if(P[K].filter&&Object.prototype.hasOwnProperty.call(P[K].filter,"value")&&(P[K].filter.format===undefined||P[K].filter.format==="plain")){S.params[K]=[P[K].filter.value];}if(P[K].launcherValue&&Object.prototype.hasOwnProperty.call(P[K].launcherValue,"value")&&(P[K].launcherValue.format===undefined||P[K].launcherValue.format==="plain")){S.params[K]=[P[K].launcherValue.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(S);if(!C){return undefined;}return"#"+C;};this._getExternalUrlFromInbound=function(I){return jQuery.sap.getObject("signature.parameters.sap-external-url.launcherValue.value",undefined,I)||null;};this._toHashFromOutbound=function(O){var S,P,C;S={target:{semanticObject:O.semanticObject,action:O.action},params:{}};P=O.parameters||{};Object.keys(P).forEach(function(K){if(P.hasOwnProperty(K)&&typeof P[K].value==="object"){S.params[K]=[P[K].value.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(S);if(!C){return undefined;}return"#"+C;};this._isCustomTile=function(e){if(sap.ushell.utils.getMember(e,"sap|flp.type")==="tile"){return true;}return false;};this.getCatalogTiles=function(C){var e=this,D=new jQuery.Deferred();if(typeof C!=="object"||C===null){return D.reject("Invalid input parameter '"+C+"' passed to getCatalogTiles.").promise();}if(C.contentProviderId&&this._mContentProviders[C.contentProviderId]){this._mContentProviders[C.contentProviderId].sitePromise.then(function(S){c.call(e,C,S).done(D.resolve).fail(D.reject);},function(E){D.reject("Failed to get site: "+E);});}else{sap.ushell.Container.getService("CommonDataModel").getSite().done(function(S){c.call(e,C,S).done(D.resolve).fail(D.reject);}).fail(function(E){D.reject("Failed to get site: "+E);});}return D.promise();};this.isCustomTile=function(C){return!(C===s||C===d);};function b(I){return Object.keys(I).map(function(K){var e=I[K];return{intent:e.semanticObject+"-"+e.action,inbound:e};}).sort(function(e,w){if(e.intent===w.intent){return 0;}return e.intent<w.intent?-1:1;}).reduce(function(e,w){var x=e.length;if(x===0){e.push(w);return e;}if(e[x-1].intent!==w.intent){e.push(w);return e;}return e;},[]).map(function(e){return e.inbound;});}function c(C,S){var e=this,D=new jQuery.Deferred();setTimeout(function(){var w=((C.payload&&C.payload.appDescriptors)||[]).reduce(function(R,x){var y=S.applications[x.id],I,z,F,B,E,H,J,K,M,N,O;if(!y){return R;}I=e._getMember(y,"sap|app.crossNavigation.inbounds");if(!I||Object.keys(I).length===0){return R;}F=Object.keys(I)[0];B=I[F];if(e._isStartableInbound(B)&&!e._isHiddenInbound(B)){E=u.mapOne(F,B,y);if(!E||!E.tileResolutionResult){return R;}M=E.resolutionResult.applicationType;O=sap.ushell.Container.getService("ClientSideTargetResolution").isInPlaceConfiguredFor(M);N=E.resolutionResult.additionalInformation,E.tileResolutionResult.navigationMode=n.computeNavigationModeForHomepageTiles(M,N,O);H=E.tileResolutionResult;z=e._toHashFromInbound(B);if(C.contentProviderId){K=e._getMember(y,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}J={id:K||z,tileIntent:K||z,tileResolutionResult:H,isCatalogTile:true};if(C.contentProviderId&&K){J.contentProviderId=C.contentProviderId;J.externalUrl=K;}R.push(J);}return R;},[]);D.resolve(w);},0);return D.promise();}this.getCatalogError=function(C){if(C.error){return C.error;}};this.getCatalogId=function(C){return C.identification.id;};this.getCatalogTitle=function(C){return C.identification.title;};this._isGroupTile=function(e){return!!(e&&e.id&&e.target);};this._isCatalogTile=function(e){return!!(e&&e.isCatalogTile);};this._isFailedGroupTile=function(e){return!!(e&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[e.id]);};this._isFailedCatalogTile=function(e){return!!(e&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[e.id]);};this.getCatalogTileId=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return undefined;}if(e.isBookmark&&jQuery.sap.getObject("target.url",undefined,e)){return e.target.url;}return(this._mResolvedTiles[e.id]||{}).tileIntent;}if(this._isCatalogTile(e)){return e.id;}};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return"";}return this._mResolvedTiles[e.id].tileResolutionResult.title;}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined;}return e.tileResolutionResult.title;}};this.getCatalogTileSize=function(C){return this.getTileSize(C);};this.getCatalogTileView=function(C){return this._getCatalogTileView(C);};this.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy");}if(this._isCatalogTile(e)){return e.tileIntent||"";}return this.getTileTarget(e);};this.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.title)||"";};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e);}return(e.tileResolutionResult&&e.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e);}return(e.tileResolutionResult&&e.tileResolutionResult.info)||"";};this.getCatalogTileKeywords=function(e){var K=[],R=e;if(!R){jQuery.sap.log.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return K;}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){R=this._mResolvedTiles[e.id];}if(R&&R.tileResolutionResult&&R.tileResolutionResult.title){K.push(R.tileResolutionResult.title);}if(R&&R.tileResolutionResult&&R.tileResolutionResult.subTitle){K.push(R.tileResolutionResult.subTitle);}return K;};this._visitBookmarks=function(e,V){var C=sap.ushell.Container;var w=C.getService("URLParsing");var x=C.getService("CommonDataModel");var R;var I=w.parseShellHash(e);if(I){R=q(I);}else{R=m(e);}return x.getSite().then(function(S){var y=S.groups;var z=Object.keys(y).filter(function(K){return!y[K].payload.locked;}).map(function(K){return y[K].payload.tiles.filter(function(B){return B.isBookmark&&j(R,B.target);});}).reduce(function(B,D){Array.prototype.push.apply(B,D);return B;},[]);if(!V){return z.length;}return jQuery.when(z.map(V)).then(function(){return z.length;});});};this.addBookmark=function(P,e){var w=this;return new jQuery.Deferred(function(D){var C=sap.ushell.Container;var x=C.getService("URLParsing");var y=C.getService("CommonDataModel");jQuery.when(e||w.getDefaultGroup(),y.getSite()).done(function(e,S){var z,B,I=x.parseShellHash(P.url),N,R,E=false;if(!I){B=m(P.url);E=true;}else{B=q(I);}z=f(P,B);if(E){R=new jQuery.Deferred();R.resolve(w._getTileForUrl(z));}else{R=w._getTileFromHash(P.url);}R.done(function(N){N.isLink=false;w._mResolvedTiles[z.id]=N;S.groups[e.identification.id].payload.tiles.push(z);y.save().done(function(){D.resolve(z);}).fail(function(F){D.reject(F);});}).fail(function(F){D.reject("Bookmark creation failed because: "+F);});}).fail(function(R){D.reject(R);});}).promise();};this.countBookmarks=function(e){return this._visitBookmarks(e);};this.updateBookmarks=function(e,P){var C=sap.ushell.Container;var w=C.getService("URLParsing");var x=C.getService("CommonDataModel");var R=this._mResolvedTiles;function y(z){return new jQuery.Deferred(function(D){var I,N;var B;var E=false;var F={};if(P.url||P.url===""){I=w.parseShellHash(P.url);if(!I){N=m(P.url);}else{N=q(I);}}if(z.icon!==P.icon){F.icon=P.icon;E=true;}if(z.title!==P.title){F.title=P.title;E=true;}if(z.subTitle!==P.subtitle){F.subtitle=P.subtitle;E=true;}if(P.url&&e!==P.url){F.targetURL=P.url;E=true;}if(z.info!==P.info){F.info=P.info;E=true;}i(z,P,N);if(E&&R[z.id]){B=R[z.id].tileComponent;B.tileSetVisualProperties(F);}D.resolve(z);}).promise();}return this._visitBookmarks(e,y).then(function(z){return x.save().then(function(){return z;});});};this.deleteBookmarks=function(e){var C=sap.ushell.Container;var w=C.getService("URLParsing");var x=C.getService("CommonDataModel");var I=w.parseShellHash(e);var R;if(I){R=q(I);}else{R=m(e);}return x.getSite().then(function(S){var y=S.groups;var D=Object.keys(y).map(function(K){var P=y[K].payload;var z=0;P.tiles=P.tiles.filter(function(B){if(B.isBookmark&&j(R,B.target)){++z;return false;}return true;});return z;}).reduce(function(z,B){z+=B;return z;},0);return x.save().then(function(){return D;});});};this.onCatalogTileAdded=function(e){};this._onTileSettingsSave=function(e,S){var D=new jQuery.Deferred(),C,w,N,x,y,O,z,B;if(e&&e.id&&S){N=S.oTitleInput.getValue();y=S.oSubTitleInput.getValue();x=S.oInfoInput.getValue();O=this.getTileTitle(e);z=this.getTileInfo(e);B=this.getTileSubtitle(e);if(O===N&&B===y&&z===x){return;}C=sap.ushell.Container.getService("CommonDataModel");var E=this;C.getSite().done(function(F){if(!F.modifiedTiles){F.modifiedTiles={};}if(!F.modifiedTiles[e.id]){F.modifiedTiles[e.id]={id:e.id};}w={};if(O!==N){w.title=N;F.modifiedTiles[e.id].title=N;e.title=N;}if(B!==y){w.subtitle=y;F.modifiedTiles[e.id].subTitle=y;e.subTitle=y;}if(z!==x){w.info=x;F.modifiedTiles[e.id].info=x;e.info=x;}if(E._mResolvedTiles[e.id].tileComponent){E._mResolvedTiles[e.id].tileComponent.tileSetVisualProperties(w);}else{if(E._mResolvedTiles[e.id].linkTileControl){if(w.title){E._mResolvedTiles[e.id].linkTileControl.setHeader(w.title);}if(w.subtitle){E._mResolvedTiles[e.id].linkTileControl.setSubheader(w.subtitle);}if((w.title)||(w.subtitle)){E._mResolvedTiles[e.id].linkTileControl.rerender();}}}C.save().fail(function(H){jQuery.sap.log.error(H);D.reject("Could not save personalization changes: "+H);}).done(function(){D.resolve();});}).fail(function(F){jQuery.sap.log.error(F);D.reject("Cannot get site: "+F);});}return D.promise();};this.getTileActions=function(e){var w=[],x,M;if(this._isGroupTile(e)&&!this._isFailedGroupTile(e)){M=new sap.ui.model.json.JSONModel({config:{display_title_text:this.getTileTitle(e),display_subtitle_text:this.getTileSubtitle(e),display_info_text:this.getTileInfo(e)}});x=sap.ushell.components.tiles.utilsRT.getTileSettingsAction(M,this._onTileSettingsSave.bind(this,e),this.getTileType(e));w.push(x);}return w;};function f(P,e){var w=h(P,e);w.isBookmark=true;return w;}function h(P,e){var w={id:sap.ushell.utils.generateUniqueId([])};i(w,P,e);return w;}function i(e,P,w){P=jQuery.extend(true,{},P);if(w){e.target=w;}if(P.title||P.title===""){e.title=P.title;}if(P.icon||P.icon===""){e.icon=P.icon;}if(P.subtitle||P.subtitle===""){e.subTitle=P.subtitle;}if(P.info||P.info===""){e.info=P.info;}if(P.dataSource){e.dataSource={};jQuery.extend(true,e.dataSource,P.dataSource);delete P.serviceUrl;}else if(P.dataSource===null){delete e.dataSource;delete e.indicatorDataSource;delete P.serviceUrl;}if((P.dataSource||e.dataSource)&&P.serviceUrlPath){e.indicatorDataSource={path:P.serviceUrlPath};}if(P.serviceUrl||P.serviceUrl===""){if(e.dataSource){jQuery.sap.log.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete e.dataSource;}e.indicatorDataSource={path:P.serviceUrl};}else if(P.serviceUrl===null&&!e.dataSource){delete e.indicatorDataSource;}if(P.serviceRefreshInterval||P.serviceRefreshInterval===0){e.indicatorDataSource.refresh=P.serviceRefreshInterval;}}function j(e,O){if(e&&O){if(e.url){return e.url===O.url;}return e.semanticObject===O.semanticObject&&e.action===O.action&&k(e.parameters,O.parameters);}return e===O;}function k(P,O){var F,e;P=P||[];O=O||[];if(P.length===O.length){F=t(P);e=t(O);return F===e;}return false;}function t(e){return e.map(function(P){return P.name+P.value;}).sort().join();}function m(e){return{url:e};}function q(I){var e={semanticObject:I.semanticObject,action:I.action,parameters:v(I.params)};if(I.appSpecificRoute){e.appSpecificRoute=I.appSpecificRoute;}return e;}function v(I){return Object.keys(I).map(function(K){var V=I[K]&&I[K][0];return{name:K,value:V||""};});}};a.prototype._getMember=function(o,A){return sap.ushell.utils.getMember(o,A);};return a;},true);sap.ui.predefine('sap/ushell/adapters/cdm/PersonalizationAdapter',["sap/ushell/adapters/cdm/_Personalization/internals","sap/ushell/utils/XHttpClient"],function(a,h){"use strict";return a.PersonalizationAdapter.bind(null,h,null);},true);sap.ui.predefine('sap/ushell/adapters/cdm/_Personalization/internals',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","jquery.sap.global"],function(s,i,q){"use strict";return Object.create(null,{PersonalizationAdapter:{value:P},getStorageResourceRoot:{value:g},getContainerPath:{value:c},delAdapterContainer:{value:e},createContainerData:{value:f},getAdapterContainer:{value:A},getContainerCategory:{value:h},isCategoryPContainer:{value:k},trimContainerKey:{value:t},save:{value:l},load:{value:m},del:{value:n},clearContainerData:{value:o},getItemKeys:{value:u},containsItem:{value:v},setItemValue:{value:w},getItemValue:{value:x},delItem:{value:y},addPrefixToItemKey:{value:p},stripPrefixFromItemKey:{value:r},getHttpHeaderValue:{value:z}});function P(H,C,S,B,D){var E,F;var G={cache:{},headers:{"sap-client":S.getClient()}};D=D&&D.config;if(!D){throw new Error("PersonalizationAdapter: missing configuration.");}if(!C){C=Object.create(null);}E=g(D);F=H(E,G);return Object.create(null,{getAdapterContainer:{value:A.bind(null,D,C,F)},delAdapterContainer:{value:e.bind(null,D,C,F)}});}function g(C){var I=!C||!C.storageResourceRoot;if(I){throw new Error("Configuration error: storage resource root is not defined.");}return C.storageResourceRoot;}function a(C){var I=!C||!C.relativeUrlReadOptimized;if(I){throw new Error("Configuration error: relative URL for read optimization is not defined.");}return C.relativeUrlReadOptimized;}function b(C){var I=!C||!C.relativeUrlWriteOptimized;if(I){throw new Error("Configuration error: relative URL for write optimization is not defined.");}return C.relativeUrlWriteOptimized;}function c(C,S,B){return j(C,S)+"/"+encodeURIComponent(t(B))+".json";}function t(C){var B=i.S_CONTAINER_PREFIX,D,R;if(q.type(C)!=="string"||C.length===0){throw new Error("Personalization container key must be a non-empty string");}if(C.substring(0,B.length)===B){D=C.substring(B.length);}else{q.sap.log.error("Unexpected personalization container key: "+C,"should always be prefixed with "+B,"sap.ushell.adapters.cdm.PersonalizationAdapter");D=C;}if(D.length<=40){R=D;}else{R=D.substring(0,40);q.sap.log.error("Invalid personalization container key: '"+D+"'"+" exceeds maximum key length (40 characters) and is shortened to '"+R+"'",undefined,"sap.ushell.adapters.cdm.PersonalizationAdapter");}return R;}function d(){return{validity:Infinity,keyCategory:s.keyCategory.GENERATED_KEY,writeFrequency:s.writeFrequency.HIGH,clientStorageAllowed:false};}function e(C,B,H,D,S){var E=c(C,S,D);var F=B&&B[E];if(F){delete B[E];}return n(H,E);}function f(S,B){var C;if((!B&&B!=="")||B.constructor!==String){q.sap.log.warning("Personalization container has an invalid app name; must be a non-empty string",null,"sap.ushell.adapters.cdm.PersonalizationAdapter");}if(!S){S=d();}C=Object.create(null,{items:{value:Object.create(null),enumerable:true},__metadata:{value:Object.create(null,{appName:{value:B,enumerable:true},expiry:{value:Date.now()+S.validity*60*1000,enumerable:true},validity:{value:S.validity,enumerable:true},category:{value:h(S),enumerable:true}}),enumerable:true,writable:true}});return C;}function A(C,B,H,D,S,E){var F,G,I=c(C,S,D);if(B&&B[I]){return B[I];}G=f(S,E);F=G.items;return Object.create(null,{save:{value:l.bind(null,H,G,I)},load:{value:m.bind(null,H,G,I)},del:{value:n.bind(null,H,G,I)},setItemValue:{value:w.bind(null,F)},getItemValue:{value:x.bind(null,F)},getItemKeys:{value:u.bind(null,F)},containsItem:{value:v.bind(null,F)},delItem:{value:y.bind(null,F)}});}function h(S){return k(S)?"p":"u";}function j(C,S){return k(S)?a(C):b(C);}function k(S){return S&&S.keyCategory===s.keyCategory.FIXED_KEY&&S.writeFrequency===s.writeFrequency.LOW&&S.clientStorageAllowed;}function l(H,C,B){return new q.Deferred(function(D){H.put(B,{data:C}).then(function(R){D.resolve();}).catch(function(R){q.sap.log.error("Failed to save personalization container; response: "+(typeof R==="object"?JSON.stringify(R):R),R.stack?R.stack:null,"sap.ushell.adapters.cdm.PersonalizationAdapter");D.reject(R);});}).promise();}function m(H,C,B){function D(C){o(C.items);}return new q.Deferred(function(E){H.get(B).then(function(R){var F,G;if(R.status===200&&z(R.responseHeaders,"content-length")==="0"&&z(R.responseHeaders,"content-type").indexOf("text/plain")===0){D(C);}else{F=JSON.parse(R.responseText);if(F.data){F.items=F.data;delete F.data;F.__metadata=C.__metadata;}G=F.items;o(C.items);Object.keys(G).forEach(function(I){C.items[I]=G[I];});C.__metadata=F.__metadata;}E.resolve();}).catch(function(R){if(R.status===404){D(C);E.resolve();}else{o(C.items);E.reject(R);}});}).promise();}function n(H,B){return new q.Deferred(function(D){H.delete(B).then(function(){D.resolve();}).catch(function(R){D.reject(R);});}).promise();}function o(C){Object.keys(C).forEach(function(K){delete C[K];});}function p(K){if(K==="__metadata"){return undefined;}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}else{return i.S_ITEM_PREFIX+K;}}function r(K){if(K.indexOf(i.S_ITEM_PREFIX)===0){return K.substring(i.S_ITEM_PREFIX.length);}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}else{throw new Error("Illegal item key for personalization container: '"+K+"'; must be prefixed with one of the following: ["+i.S_ITEM_PREFIX+", "+i.S_VARIANT_PREFIX+", "+i.S_ADMIN_PREFIX+"] ");}}function u(C){return Object.keys(C).map(p).filter(function(K){return!!K;});}function v(C,K){return C.hasOwnProperty(r(K));}function w(C,K,V){C[r(K)]=V;}function x(C,K){return C[r(K)];}function y(C,K){delete C[r(K)];}function z(H,N){var M=H&&H.filter(function(B){return B.name.toLowerCase()===N;});return M&&M[0]&&M[0].value;}});sap.ui.predefine('sap/ushell/adapters/local/NavTargetResolutionAdapter',['sap/ui/thirdparty/datajs'],function(d){"use strict";var N=function(u,p,a){var A=jQuery.sap.getObject("config.applications",0,a);this.resolveHashFragment=function(h){var D=new jQuery.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new sap.ushell.utils.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){D.resolve(undefined);}else{jQuery.sap.log.info("Hash Fragment: "+h);i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}D.resolve(R);}else{D.reject("Could not resolve link '"+h+"'");}}return D.promise();};this.getSemanticObjectLinks=function(s,P){var I,r=[],i=0,D=new jQuery.Deferred(),b;if(!s){setTimeout(function(){D.resolve([]);},0);}else{b=sap.ushell.Container.getService("URLParsing").paramsToString(P);jQuery.sap.log.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf('-'))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;if(b!==""){if(r[i].intent.indexOf("?")!==-1){r[i].intent+="&"+b;}else{r[i].intent+="?"+b;}}i+=1;}}if(r){setTimeout(function(){D.resolve(r);},0);}else{setTimeout(function(){D.reject("Could not get links for  '"+s+"'");},0);}}return D.promise();};this.isIntentSupported=function(I){var D=new jQuery.Deferred(),s={},b=[],t=this;function c(i,S){s[i]={supported:S};}I.forEach(function(e,i){var o=new jQuery.Deferred();b.push(o.promise());t.resolveHashFragment(e).fail(function(E){c(e,false);o.resolve();}).done(function(f){c(e,true);o.resolve();});});if(I.length>0){jQuery.when.apply(jQuery,b).always(function(){D.resolve(s);});}else{D.resolve(s);}return D.promise();};};return N;},true);sap.ui.predefine('sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter',['sap/ushell/services/Personalization'],function(P){"use strict";var U=function(s,p,c){this._oConfig=c&&c.config;};U.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};U.prototype.saveParameterValue=function(p,v){var d=new jQuery.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){jQuery.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.setItemValue(p,v);c.saveDeferred(50).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype.deleteParameter=function(p,v){var d=new jQuery.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){jQuery.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype.loadParameterValue=function(p){var d=new jQuery.Deferred();this._getUDContainer().done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype.getStoredParameterNames=function(){var d=new jQuery.Deferred();this._getUDContainer().done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype._getUDContainer=function(){var p=this._getPersonalizationService();if(this._oPromise){return this._oPromise;}this._oPromise=p.getContainer("sap.ushell.UserDefaultParameter",{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true});return this._oPromise;};return U;},true);sap.ui.predefine('sap/ushell/adapters/local/UserInfoAdapter',function(){"use strict";var U=function(u,p,a){var o;function g(A){var d=[{id:"sap_belize",name:"SAP Belize"}],e=jQuery.sap.getObject("config.themes",undefined,A);return e===undefined?d:e;}this.updateUserPreferences=function(b){var P,s,d=new jQuery.Deferred();P=sap.ushell.Container.getService("Personalization");s={keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.LOW,clientStorageAllowed:true};function c(C,b){var e=b.getChangedProperties()||[];e.forEach(function(f){C.setItemValue(f.propertyName,f.newValue);});}function l(e){var E="Failed to update user preferences: "+(e&&e.message?e.message:e);jQuery.sap.log.error(E,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo");}P.getContainer("sap.ushell.UserProfile",s,undefined).done(function(C){c(C,b);C.save().fail(function(e){l(e);d.reject(e);}).done(function(){d.resolve();});}).fail(function(e){l(e);d.reject(e);});return d.promise();};this.getThemeList=function(){var d=new jQuery.Deferred();jQuery.sap.log.info("getThemeList");if(o===undefined){o=g(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new jQuery.Deferred();jQuery.sap.log.info("getLanguageList");d.resolve([{"text":"Browser Language","key":"default"},{"text":"en-US","key":"en-US"},{"text":"en-UK","key":"en-UK"},{"text":"en","key":"en"},{"text":"de-DE","key":"de-DE"},{"text":"he-IL","key":"he-IL"},{"text":"ru-RU","key":"ru-RU"},{"text":"ru","key":"ru"}]);return d.promise();};};return U;},true);sap.ui.predefine('sap/ushell/components/applicationIntegration/API',['sap/ui/core/UIComponent'],function(U){"use strict";var A=U.extend("sap.ushell.components.applicationIntegration.API",{metadata:{version:"1.54.6",dependencies:{version:"1.54.6",libs:["sap.ui.core","sap.m"],components:[]}}});A.prototype.createContent=function(){this.oShellModel=sap.ushell.components.applicationIntegration.AppLifeCycle;};A.prototype.createExtendedShellState=function(s,c){return this.oShellModel.createExtendedShellState(s,c);};A.prototype.applyExtendedShellState=function(s,c){this.oShellModel.applyExtendedShellState(s,c);};A.prototype.showLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.addLeftPaneContent([i],c,s);}else{this.oShellModel.addLeftPaneContent(i,c,s);}};A.prototype.showHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderItem([i],c,s);}else{this.oShellModel.addHeaderItem(i,c,s);}};A.prototype.showRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addRightFloatingContainerItem([i],c,s);}else{this.oShellModel.addRightFloatingContainerItem(i,c,s);}};A.prototype.showRightFloatingContainer=function(s){this.oShellModel.showRightFloatingContainer(s);};A.prototype.showToolAreaItem=function(i,c,s){this.oShellModel.addToolAreaItem(i,c,s);};A.prototype.showActionButton=function(i,c,s,I){var b=[],a=[],B;if(typeof i==="string"){i=[i];}b=i.filter(function(d){B=sap.ui.getCore().byId(d);return B instanceof sap.m.Button&&!(B instanceof sap.ushell.ui.launchpad.ActionItem);});a=i.filter(function(d){B=sap.ui.getCore().byId(d);return B instanceof sap.ushell.ui.launchpad.ActionItem;});if(b.length){this.convertButtonsToActions(b,c,s,I);}if(a.length){this.oShellModel.addActionButton(a,c,s,I);}this.toggleOverFlowActions();};A.prototype.showFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.addFloatingActionButton([i],c,s);}else{this.oShellModel.addFloatingActionButton(i,c,s);}};A.prototype.showHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderEndItem([i],c,s);}else{this.oShellModel.addHeaderEndItem(i,c,s);}};A.prototype.setHeaderVisibility=function(v,c,s){this.oShellModel.setHeaderVisibility(v,c,s);};A.prototype.showSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.addSubHeader([i],c,s);}else{this.oShellModel.addSubHeader(i,c,s);}};A.prototype.showSignOutItem=function(c,s){this.oShellModel.showSignOutButton(c,s);};A.prototype.showSettingsItem=function(c,s){this.oShellModel.showSettingsButton(c,s);};A.prototype.hideHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],c,s);}else{this.oShellModel.removeHeaderItem(i,c,s);}};A.prototype.removeToolAreaItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeToolAreaItem([i],c,s);}else{this.oShellModel.removeToolAreaItem(i,c,s);}};A.prototype.removeRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],c,s);}else{this.oShellModel.removeRightFloatingContainerItem(i,c,s);}};A.prototype.hideActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeActionButton([i],c,s);}else{this.oShellModel.removeActionButton(i,c,s);}this.toggleOverFlowActions();};A.prototype.toggleOverFlowActions=function(){jQuery.sap.measure.start("FLP:Shell.controller.toggleMeAreaView","show or hide actionbox if no actions in me area","FLP");var m=sap.ui.getCore().byId('meArea');var B={};try{if(m){if(m.actionBox){if(m.actionBox._getControlsIds().length===0){sap.ui.getCore().byId('overflowActions').setVisible(false);}else{m.actionBox._getControlsIds().forEach(function(a){var b=sap.ui.getCore().byId(a);if(b.getVisible()){throw B;}});sap.ui.getCore().byId('overflowActions').setVisible(false);}}}}catch(e){if(e!==B){throw e;}else{sap.ui.getCore().byId('overflowActions').setVisible(true);}}jQuery.sap.measure.end("FLP:Shell.controller.toggleMeAreaView");};A.prototype.hideLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],c,s);}else{this.oShellModel.removeLeftPaneContent(i,c,s);}};A.prototype.hideFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],c,s);}else{this.oShellModel.removeFloatingActionButton(i,c,s);}};A.prototype.hideHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],c,s);}else{this.oShellModel.removeHeaderEndItem(i,c,s);}};A.prototype.hideSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],c,s);}else{this.oShellModel.removeSubHeader(i,c,s);}};A.prototype.addShellSubHeader=function(p){var d=new jQuery.Deferred(),t=this,c,C,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){this.showSubHeader(C.getId(),b,s);}d.resolve(C);}}if(a){c=a.replace(/\./g,"/");sap.ui.require([c],function(e){C=new e(o);if(i){t.showSubHeader(C.getId(),b,s);t.oShellModel.addElementToManagedQueue(C);}d.resolve(C);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};A.prototype.addSubHeader=function(c,C,i,b,s){var a=c.replace(/\./g,"/"),o=sap.ui.require(a),d,f,r=false;if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showSubHeader(d.getId(),b,s);}return d;};A.prototype.addUserAction=function(p){var d=new jQuery.Deferred(),t=this,m=this.oShellModel.getModelToUpdate(),c,C,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates,I=p.bIsFirst||true,n;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(a){if(a==="sap.m.Button"){a="sap.ushell.ui.launchpad.ActionItem";}c=a.replace(/\./g,"/");sap.ui.require([c],function(e){var O=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);var f;if(o){if(o.id){f=o.id;}}C=sap.ui.getCore().byId(f)||new e(o);if(!C.getActionType){C=new e(o);}if(i){t.showActionButton(C.getId(),b,s,I);t.oShellModel.addElementToManagedQueue(C);}t.oShellModel.setModelToUpdate(O,false);d.resolve(C);});}else{n="You must specify control type in order to create it";jQuery.sap.log.warning(n);d.reject(n);}return d.promise();};A.prototype.addActionButton=function(c,C,i,b,s,I){var a,o,d,f,r=false;if(c==="sap.m.Button"){c="sap.ushell.ui.launchpad.ActionItem";}a=c.replace(/\./g,"/");o=sap.ui.require(a);if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showActionButton(d.getId(),b,s,I);}return d;};A.prototype.addFloatingButton=function(p){var d=new jQuery.Deferred(),t=this,c,C,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){t.oShellModel.addElementToManagedQueue(C);t.showFloatingActionButton(oItem.getId(),b,s);}d.resolve(C);}}if(a){c=a.replace(/\./g,"/");}else{c="sap/m/Button";}sap.ui.require([c],function(e){C=new e(o);if(i){this.showFloatingActionButton(oItem.getId(),b,s);}d.resolve(C);});return d.promise();};A.prototype.addFloatingActionButton=function(c,C,i,b,s){var a,o,d,f,r=false;if(!c){c="sap.m.Button";}a=c.replace(/\./g,"/");o=sap.ui.require(a);if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showFloatingActionButton(d.getId(),b,s);}return d;};A.prototype.addSidePaneContent=function(p){var d=new jQuery.Deferred(),t=this,c,C,r=false,a=p.controlType,o=p.oControlProperties,i=p.bIsVisible,b=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(a){c=a.replace(/\./g,"/");sap.ui.require([c],function(e){C=new e(o);if(i){t.oShellModel.addElementToManagedQueue(C);t.showLeftPaneContent(oItem.getId(),b,s);}d.resolve(C);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};A.prototype.addLeftPaneContent=function(c,C,i,b,s){var t=this,a=c.replace(/\./g,"/"),o=sap.ui.require(a),d,f,r;if(o){r=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(r){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};d=this.createItem(C,b,s,f);if(i){this.showLeftPaneContent(d.getId(),b,s);}return d;};A.prototype.addHeaderItem=function(c,C,i,b,s){if(typeof(arguments[0])==='object'&&typeof(arguments[1])==='boolean'){C=arguments[0];i=arguments[1];b=arguments[2];s=arguments[3];}else{jQuery.sap.log.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var p=C;p.showSeparator=false;var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderItem(I.getId(),b,s);}return I;};A.prototype.addRightFloatingContainerItem=function(c,i,C,s){var f=function(c){return new sap.m.NotificationListItem(c);},I=this.createItem(c,C,s,f);if(i){this.showRightFloatingContainerItem(I.getId(),C,s);}return I;};A.prototype.addToolAreaItem=function(c,i,C,s){var f=function(c){return new sap.ushell.ui.shell.ToolAreaItem(c);},I=this.createItem(c,C,s,f);if(i){this.showToolAreaItem(I.getId(),C,s);}return I;};A.prototype.addHeaderEndItem=function(c,C,i,b,s){var p=C;p.showSeparator=false;var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderEndItem(I.getId(),b,s);}return I;};A.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};A.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};A.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};A.prototype.LaunchpadState={App:"app",Home:"home"};A.prototype.createInspection=function(a,c,C,s){this.oShellModel.createInspection(a,c,C,s);};A.prototype.createTriggers=function(t,c,s){this.oShellModel.createTriggers(t,c,s);};A.prototype.convertButtonsToActions=function(i,c,s,I){var p={},b,t=this;i.forEach(function(a){b=sap.ui.getCore().byId(a);p.id=b.getId();p.text=b.getText();p.icon=b.getIcon();p.tooltip=b.getTooltip();p.enabled=b.getEnabled();p.visible=b.getVisible();if(b.mEventRegistry&&b.mEventRegistry.press){p.press=b.mEventRegistry.press[0].fFunction;}b.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,c,s,I);});};A.prototype.createItem=function(c,C,s,f){var i;if(c&&c.id){i=sap.ui.getCore().byId(c.id);}if(!i){i=f(c);if(C){this.oShellModel.addElementToManagedQueue(i);}}return i;};A.prototype.addEntryInShellStates=function(n,e,a,r,s){this.oShellModel.addEntryInShellStates(n,e,a,r,s);};A.prototype.removeCustomItems=function(s,i,c,S){if(typeof i==="string"){this.oShellModel.removeCustomItems(s,[i],c,S);}else{this.oShellModel.removeCustomItems(s,i,c,S);}};A.prototype.addCustomItems=function(s,i,c,S){if(typeof i==="string"){this.oShellModel.addCustomItems(s,[i],c,S);}else{this.oShellModel.addCustomItems(s,i,c,S);}};return A;});sap.ui.predefine('sap/ushell/components/applicationIntegration/AppLifeCycle',function(){"use strict";var a=sap.ui.Device.system.phone;var m={animationMode:"full",searchAvailable:false,title:"",searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,enableNotifications:false,enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",userStatus:undefined,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},customStatesDelta:{"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}},states:{"blank":{"stateName":"blank","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"blank-home":{"stateName":"blank-home","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"home":{"stateName":"home","showCurtain":false,"headerHiding":false,"headerVisible":true,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"headItems":['meAreaHeaderButton'],"headEndItems":["sf"],"search":"","paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"app":{"stateName":"app","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":["sf"],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"search":"","headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"minimal":{"stateName":"minimal","showCurtain":false,"headerHiding":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton','homeBtn'],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"standalone":{"stateName":"standalone","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"embedded":{"stateName":"embedded","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"embedded-home":{"stateName":"embedded-home","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"headerless":{"stateName":"headerless","showCurtain":false,"headerHiding":a,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['meAreaHeaderButton','backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"merged":{"stateName":"merged","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":['backBtn','homeBtn'],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"headerless-home":{"stateName":"headerless-home","showCurtain":false,"headerHiding":a,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}},"merged-home":{"stateName":"merged-home","showCurtain":false,"headerHiding":a,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"showLogo":false,"showRightFloatingContainer":true,"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"application":{}}},userPreferences:{entries:[]},userImage:{personPlaceHolder:sap.ui.core.IconPool.getIconURI("person-placeholder"),account:sap.ui.core.IconPool.getIconURI("account")}};function v(i,c,s){return c!=undefined;}function n(i,c,s){return true;}function u(c,V,C){C.setProperty(c,V);}function A(){var M;var c;var s;var C;var e;var o;var I;var d;var E;var f;var t;var g;this.createDefault=function(){var r=function(S,h,D){if(D.sProperty=="actions"){var i=D.oModel.getProperty(D.path);if(i&&i.length===0&&D.aIds&&D.aIds.length>0){this._renderShellState();}}}.bind(this);this.createTriggers([{sName:'onAddFirstAction',fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",r,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",r,this);}}],false,["blank","blank-home"]);};this.init=function(h){M=new sap.ui.model.json.JSONModel(m);s=M;c={};e={};o={};I=false;d=false;f=false;t=[];g=true;E=undefined;if(h){jQuery.sap.measure.start("FLP:AppLifeCycle.init","moveShellHeaderEndItems","FLP");if(h.moveEditHomePageActionToShellHeader){this._moveActionsToShellHeader("ActionModeBtn");}if(h.moveContactSupportActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("ContactSupportBtn");}if(h.moveGiveFeedbackActionToShellHeader){this._moveCustomeDataActionBtnToShellHeader("EndUserFeedbackBtn");}if(h.moveAppFinderActionToShellHeader){this._moveActionsToShellHeader("openCatalogBtn");}if(h.moveUserSettingsActionToShellHeader){this._moveActionsToShellHeader("userSettingsBtn");}jQuery.sap.measure.end("FLP:AppLifeCycle.init");}this.createDefault();var i=h&&h.appState?h.appState:"home";this.switchState(i);};this.destroy=function(){M=undefined;s=undefined;c=undefined;e=undefined;o=undefined;I=undefined;d=undefined;g=undefined;f=undefined;E=undefined;sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRendered",this._attachPressToUserSettings,this);};this.getModel=function(){return M;};this._moveCustomeDataActionBtnToShellHeader=function(h){for(var k in m.customStatesDelta){var S=m.customStatesDelta[k];var i=S.actions;var j=i.indexOf(h);if(j!=-1){m.customStatesDelta[k].actions.splice(j,1);j=m.states[k].headEndItems.indexOf(h);if(j===-1){m.states[k].headEndItems.push(h);}}}var B=sap.ui.getCore().byId(h);if(!B){var l;if(h==="ContactSupportBtn"){l=new sap.ushell.ui.footerbar.ContactSupportButton("tempContactSupportBtn",{visible:true});}else{if(h==="EndUserFeedbackBtn"){l=new sap.ushell.ui.footerbar.EndUserFeedback("EndUserFeedbackHandlerBtn",{});}}var p=l.getIcon();var q=l.getText();var r=function(){l.firePress();};var w=new sap.ushell.ui.shell.ShellHeadItem(h,{icon:p,tooltip:q,text:q,showSeparator:false});if(h==="ContactSupportBtn"){w.attachPress(r);}if(h==="EndUserFeedbackBtn"){w.setVisible(false);}w.data("isShellHeader",true);}};this._attachPressToUserSettings=function(){jQuery.sap.measure.start("FLP:AppLifeCycle._attachPressToUserSettings","_attachPressToUserSettings","FLP");var h=sap.ui.getCore().byId("userSettingsBtn");h.attachPress(function(){var i=sap.ui.getCore().byId('meArea');if(!i.oSettingsDialog.getModel()){i.oSettingsDialog.setModel(i.getModel());}var O=function(){i.oSettingsDialog.open();sap.ui.getCore().byId("viewPortContainer").detachAfterSwitchStateAnimationFinished(O);};var j=sap.ui.getCore().byId('viewPortContainer');if(j.getCurrentState()!="Center"){sap.ui.getCore().byId("viewPortContainer").attachAfterSwitchStateAnimationFinished(O);sap.ui.getCore().byId("viewPortContainer").switchState("Center");}else{O();}});jQuery.sap.measure.end("FLP:AppLifeCycle._attachPressToUserSettings");};this._moveActionsToShellHeader=function(h){var k;for(k in m.states){var S=m.states[k];if(k==="blank"||k==="blank-home"){continue;}if(h==="ActionModeBtn"){if(k==="app"){continue;}}var i=S.actions;var j=i.indexOf(h);if(j!=-1){m.states[k].actions.splice(j,1);}j=m.states[k].headEndItems.indexOf(h);if(j===-1){m.states[k].headEndItems.push(h);}}if(h==="userSettingsBtn"){var l="userSettingsBtn";var p=sap.ushell.resources.i18n.getText("userSettings");var q='sap-icon://action-settings';var U=sap.ui.getCore().byId(l);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this._attachPressToUserSettings,this);if(!U){var r=new sap.ushell.ui.shell.ShellHeadItem(l,{icon:q,tooltip:p,text:p,showSeparator:false});r.data("isShellHeader",true);}}};this.switchState=function(S,h){var p=S[0]==="/"?S:"/states/"+S,i=M.getProperty(p),j=M.getProperty("/currentState")||{},k=["home","embedded-home","headerless-home","merged-home","blank-home"];if(!!h){M.setProperty("/lastState",j);}this._destroyManageQueue(k);M.setProperty("/currentState",jQuery.extend(true,{},{},i));if(!e[S]){e[S]={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState(S)};}C=e[S].customShellState;E=undefined;this._renderShellState();return i;};this.setLeftPaneVisibility=function(V,h,S){this.updateStateProperty("showPane",V,h,S);};this.setHeaderHiding=function(h){this.updateStateProperty("headerHiding",h,true);};this.setHeaderVisibility=function(V,h,S){this.updateStateProperty("headerVisible",V,h,S);};this.showLogo=function(h,S){this.updateStateProperty("showLogo",true,h,S,false);};this.addHeaderItem=function(i,h,S){this._addHeaderItemInCorrectOrder("headItems",i,h,S);};this._removeReservedItemId=function(r,h,i){var j=false,R=i.indexOf(r);if(R>-1){i.splice(R,1);j=true;}R=h.indexOf(r);if(R>-1){h.splice(R,1);j=true;}return j;};this._addHeaderItemInCorrectOrder=function(p,i,h,S){var j=this;function V(k,l,q){var r=3-k.length;l.forEach(function(w,x){var y=(w==='meAreaHeaderButton'||w==='backBtn'||w==='homeBtn');if(k[w]===-1&&!y){r--;}});if(r<0){jQuery.sap.log.warning("Maximum of three items has been reached, cannot add more items.");return false;}return true;}function U(k,l,q){jQuery.sap.measure.start("FLP:AppLifeCycle.fnUpdate","update shell head end items","FLP");var r=q.getProperty(k),w=[],x=l.slice(0);if(j._removeReservedItemId("meAreaHeaderButton",r,x)===true){w.push("meAreaHeaderButton");}if(j._removeReservedItemId("backBtn",r,x)===true){w.push("backBtn");}if(j._removeReservedItemId("homeBtn",r,x)===true){w.push("homeBtn");}r.some(function(y){if(w.length<3){w.push(y);}else{return true;}});x.some(function(y){if(w.length<3){w.push(y);}else{return true;}});q.setProperty(k,w);jQuery.sap.measure.end("FLP:AppLifeCycle.fnUpdate");}this._setShellItem(p,i,h,S,V,U);};this.removeHeaderItem=function(i,h,S){this._removeShellItem("headItems",i,h,S);};this.addHeaderEndItem=function(i,h,S,D){if(i.length){this._addUpToSixItem("headEndItems",i,h,S,D);}};this.removeHeaderEndItem=function(i,h,S){this._removeShellItem("headEndItems",i,h,S);};this.addSubHeader=function(i,h,S){if(i.length){this._addShellItem("subHeader",i,h,S);}};this.removeSubHeader=function(i,h,S){this._removeShellItem("subHeader",i,h,S);};this.addActionButton=function(i,h,S,j){if(j){this._addActionButtonAtStart("actions",i,h,S);}else{this._addActionButton("actions",i,h,S);}};this.removeActionButton=function(i,h,S){this._removeShellItem("actions",i,h,S);};this.addToolAreaItem=function(i,h,S){if(i.length){this._addToolAreaItem("toolAreaItems",i,h,S);}};this.removeToolAreaItem=function(i,h,S){this._removeShellItem("toolAreaItems",i,h,S);};this.addLeftPaneContent=function(i,h,S){if(i.length){this._addShellItem("paneContent",i,h,S);}};this.removeLeftPaneContent=function(i,h,S){this._removeShellItem("paneContent",i,h,S);};this.addRightFloatingContainerItem=function(i,h,S){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,h,S);}};this.removeRightFloatingContainerItem=function(i,h,S){this._removeShellItem("RightFloatingContainerItems",i,h,S);};this.showSettingsButton=function(h,S){this.addActionButton(["userSettingsBtn"],h,S,false);};this.showSignOutButton=function(h,S){this.addActionButton(["logoutBtn"],h,S,false);};this.showRightFloatingContainer=function(S){this._showRightFloatingContainer(S);};this.addFloatingActionButton=function(i,h,S){if(i.length){this._addShellItem("floatingActions",i,h,S);}};this.removeFloatingActionButton=function(i,h,S){this._removeShellItem("floatingActions",i,h,S);};this.updateStateProperty=function(p,V,h,S,D){this._setShellItem(p,V,h,S,v,u,D);};this._handleTriggers=function(N){var T,h,i=[],j={};g=false;while(t.length>0){T=t.pop();if(N[T.sName]){i.push(T);j[T.sName]=T;}else{T.fnUnRegister(this);}}for(var k in N){if(N.hasOwnProperty(k)){if(!j[k]){h=N[k];h.fnRegister(this);i.push(h);}}}t=i;g=true;};this._registerTriggers=function(T){var i;g=false;for(i=0;i<T.length;i++){T[i].fnRegister(this);t.push(T[i]);}g=true;};this.createTriggers=function(T,h,S){var N=[];var U=function(T,r){var w;if(!r.aTriggers){r.aTriggers=[];}for(w=0;w<T.length;w++){var x={sName:T[w].sName,fnRegister:T[w].fnRegister,fnUnRegister:T[w].fnUnRegister};N.push(x);r.aTriggers.push(x);}};if(h===true){var j=s.getProperty("/currentState/");U(T,j);if(!I){this._registerTriggers(N);}}else{var i,k=s.getProperty('/currentState/stateName');for(i=0;i<S.length;i++){var l=S[i],p="/states/"+l,q=M.getProperty(p);N=[];U(T,q);if(k===l){if(!I){this._registerTriggers(N);}}}}};this.createInspection=function(h,j,k,S){var l=function(M,h,j){var y,z;if(!M.oCheckPoints){M.oCheckPoints=[];}if(!M.oCheckPoints[h]){M.oCheckPoints[h]=[];}y=M.oCheckPoints[h];for(z=0;z<j.length;z++){p=j[z];y.push({fnCondition:p.fnCondition,fnCheckPoint:p.fnAction});}};if(k===true){var p,q=s.getProperty("/currentState");l(q,h,j);if(!f&&!I){l(C.getProperty("/currentState"),h,j);}this._renderShellState();}else{var i,r=s.getProperty('/currentState/stateName');for(i=0;i<S.length;i++){var w=S[i],P="/states/"+w,x=M.getProperty(P);l(x,h,j);if(r===w){if(!I){this._renderShellState();}}}}};this.showShellItem=function(p,S,V){var h,j,k=this._getModelStates(S),l=this.getModel().getData().states,q="/currentState"+p;for(var i=0;i<k.length;i++){j=l[k[i]];h="/states/"+j.stateName+p;s.setProperty(h,V);}if(s.getProperty("/currentState/stateName")===S){s.setProperty(q,V);}};this.addCustomItems=function(S,i,h,j){if(this._isValidStateEntry(S)){this._isValidStateEntry(S).fnAdd(i,h,j);}else{throw new Error("Invalid state entry:"+S);}};this.removeCustomItems=function(S,i,h,j){if(this._isValidStateEntry(S)){this._isValidStateEntry(S).fnRemove(i,h,j);}else{throw new Error("Invalid state entry:"+S);}};this.createExtendedShellState=function(S,h){var B=M.getProperty("/currentState/stateName"),i,j=this._createCustomShellState(S);if(!e[B]){e[B]={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}i=e[B].extendedShellStates;if(i[S]){return false;}s=j;f=true;h();if(i[S]){i[S].customState=j;}else{i[S]={managedObjects:[],customState:j};}s=M;f=false;return true;};this.applyExtendedShellState=function(S){E=S;this._renderShellState();};this.addEntryInShellStates=function(h,i,j,r,S){var k,l;if(!c[h]){c[h]={fnAdd:j,fnHide:r};var p=this._getStatesList();for(k=0;k<p.length;k++){l=p[k];M.setProperty("/states/"+l+"/"+h,S[l]);}this["remove"+i]=r;this["add"+i]=j;}else{throw new Error("State entry already exsists:"+h);}};this.addElementToManagedQueue=function(i){var S=s.getProperty("/currentState/stateName"),B=M.getProperty("/currentState/stateName"),h,j=i.getId();if(!e[B]){e[B]={extendedShellStates:{},oCheckPoints:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}h=e[B].extendedShellStates;if(!h[S]){h[S]={managedObjects:[],customState:undefined};}h[S].managedObjects.push(j);var k=o[j];if(k){k.nRefCount++;}else{k={oItem:i,nRefCount:1};o[j]=k;}};this.updateNeededTriggersMap=function(S,T){var i;if(!T){return;}for(i=0;i<T.length;i++){S[T[i].sName]=T[i];}};this._renderShellState=function(){var B=M.getProperty("/currentState/stateName"),p=B[0]==="/"?B:"/states/"+B,h,i,S=jQuery.extend(true,{},{},M.getProperty(p)),j=e[B],k,N={};if(j){k=j.customShellState.getProperty("/currentState");}var l=new sap.ui.model.json.JSONModel({"currentState":jQuery.extend(true,{},{},S)});s=l;I=true;if(E){if(j.extendedShellStates[E]){h=j.extendedShellStates[E].customState;i=h.getProperty("/currentState");this._addCustomShellStates(i);}}if(k){this._addCustomShellStates(k);}s=M;if(S&&S.aTriggers){this.updateNeededTriggersMap(N,S.aTriggers);}if(i&&i.aTriggers){this.updateNeededTriggersMap(N,i.aTriggers);}if(k&&k.aTriggers){this.updateNeededTriggersMap(N,k.aTriggers);}if(g){this._handleTriggers(N);}M.setProperty("/currentState",l.getProperty("/currentState"));I=false;l.destroy();};this._addCustomShellStates=function(T){this.addHeaderItem(T.headItems,true);this.addToolAreaItem(T.toolAreaItems,true);this.addHeaderEndItem(T.headEndItems,true);this.addSubHeader(T.subHeader,true);this.addRightFloatingContainerItem(T.RightFloatingContainerItems,true);this.addActionButton(T.actions,true,undefined,false);this.addLeftPaneContent(T.paneContent,true);this.addFloatingActionButton(T.floatingActions,true);this._setCurrentApplicationInformation(T.application);this.showRightFloatingContainer(T.showRightFloatingContainer);this.setHeaderHiding(T.headerHiding);this.setHeaderVisibility(T.headerVisible,true);if(T.showLogo){this.showLogo(true);}};this._createCustomShellState=function(S){var h={"currentState":{"stateName":S,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}};var i=M.getProperty("/customStatesDelta"),j=i[S];if(j){jQuery.extend(h.currentState,j);}return new sap.ui.model.json.JSONModel(h);};this._setCurrentApplicationInformation=function(h){if(!h){h={};}this.updateStateProperty("application",h,true);};this._showRightFloatingContainer=function(S){this._setShellItem("showRightFloatingContainer",S,true,[],v,u);};this._addActionButtonAtStart=function(p,i,h,S){function U(j,k,l){var q=l.getProperty(j),r=[],O=k.indexOf("openCatalogBtn");if(O>-1){k.splice(O,1);r.push("openCatalogBtn");}else{if(q[0]==="openCatalogBtn"){q.splice(0,1);r.push("openCatalogBtn");}}r=r.concat(k).concat(q);l.setProperty(j,r);}this._setShellItem(p,i,h,S,n,U);};this._addActionButton=function(p,i,h,S){function U(j,k,l){var q=l.getProperty(j);var L=q.indexOf("logoutBtn");if(L>-1){q.splice.apply(q,[L,0].concat(k));}else{q=q.concat(k);}var O=q.indexOf("openCatalogBtn"),r=[];if(O>-1){q.splice(O,1);r.push("openCatalogBtn");r=r.concat(q);}else{r=q;}l.setProperty(j,r);}this._setShellItem(p,i,h,S,n,U);};this.setFloatingContainerContent=function(p,i,h,S){function V(j,i,k){return i.length===1;}function U(j,i,k){k.setProperty(j,i);}this._setShellItem(p,i,h,S,V,U);};this._addUpToSixItem=function(p,i,h,S,D){function V(j,k,l){var q=0,r,w;if(k.length===1&&k[0]==="endItemsOverflowBtn"){return true;}for(r=0;r<j.length;r++){w=j[r];if(w!=="endItemsOverflowBtn"){q++;}if(q+k.length>6){jQuery.sap.log.warning("maximum of six items has reached, cannot add more items.");return false;}if(k.indexOf(w)>-1){return false;}}return true;}function U(j,k,l){var q=l.getProperty(j),r=q.slice(0);r=r.sort();var w=r.indexOf("sf");if(w!=-1){r.splice(w,1);r.splice(0,0,"sf");}r=r.concat(k);var x=r.indexOf("NotificationsCountButton");if(x!=-1){r.splice(x,1);r.splice(r.length,0,"NotificationsCountButton");}var y=r.indexOf("copilotBtn");if(y!=-1){r.splice(y,1);if(r.indexOf("sf")!=-1){r.splice(1,0,"copilotBtn");}else{r.splice(0,0,"copilotBtn");}}l.setProperty(j,r);}this._setShellItem(p,i,h,S,V,U,D);};this._addShellItem=function(p,i,h,S){function V(j,i,k){if(j.length>0){jQuery.sap.log.warning("You can only add one item. Replacing existing item: "+j[0]+" in state: "+k+", with the new item: "+i[0]+".");}return true;}function U(j,k,l){l.setProperty(j,i.slice(0));}this._setShellItem(p,i,h,S,V,U);};this._addRightFloatingContainerItem=function(p,i,h,S){function U(j,k,l){var q=l.getProperty(j);q=q.concat(k);l.setProperty(j,q);}this._setShellItem(p,i,h,S,n,U);};this._addToolAreaItem=function(p,i,h,S){function U(k,i,l){var q=l.getProperty(k);q.push(i);l.setProperty(k,q);}var j,P=this._getPassStates(S);for(j=0;j<P.length;j++){this.showShellItem("/toolAreaVisible",P[j],true);}this._setShellItem(p,i,h,S,n,U);};this._removeShellItem=function(p,i,h,S){function V(j,k){var l,i,q;for(q=0;q<k.length;q++){i=k[q];l=j.indexOf(i);if(l<0){jQuery.sap.log.warning("You cannot remove Item: "+i+", the headItem does not exists.");return false;}}return true;}function U(j,k,l){var q=l.getProperty(j),r,i,w;for(w=0;w<k.length;w++){i=k[w];r=q.indexOf(i);if(r>-1){q.splice(r,1);}}l.setProperty(j,q);}this._setShellItem(p,i,h,S,V,U);};this._commitCheckPoints=function(h,i,j){var k;for(k=0;k<h.length;k++){if(h[k].fnCondition(i,j,this)){h[k].fnCheckPoint(i,j,this);}}};this._setShellItem=function(p,O,h,S,V,U,D){var k,l;var q=Array.isArray(O)?O.slice(0):O;if(h===true){k="/currentState/"+p;l=s.getProperty(k);if(V(l,q,"currentState")===false){return;}if(I&&!d){var B=M.getProperty("/currentState/stateName"),P="/states/"+B,r=M.getProperty(P),w=e[B];d=true;if(r.oCheckPoints){var x=r.oCheckPoints[p];if(x&&x.length){this._commitCheckPoints(x,l,q);}}if(E){if(w.extendedShellStates[E]){var y=w.extendedShellStates[E].customState,z=y.getProperty("/currentState");if(z&&z.oCheckPoints&&z.oCheckPoints[p]){this._commitCheckPoints(z.oCheckPoints[p],l,q);}}}var F=w.customShellState.getProperty("/currentState");if(F&&F.oCheckPoints&&F.oCheckPoints[p]){x=F.oCheckPoints[p];if(x&&x.length){this._commitCheckPoints(x,l,q);}}d=false;}if(!f&&!I){U(k,q,C);sap.ui.getCore().getEventBus().publish('launchpad','updateShell',{oModel:s,path:k,aIds:q,sProperty:p});this._renderShellState();}else{U(k,q,s);}}else{var G=D?S:this._getPassStates(S),i,H=s.getProperty('/currentState/stateName');for(i=0;i<G.length;i++){var J=G[i],j;k="/states/"+J+"/"+p;l=s.getProperty(k);if(V(l,q,J)===false){continue;}var K=this._getModelStates(J,D);for(j=0;j<K.length;j++){k="/states/"+K[j]+"/"+p;U(k,q,s);if(H===K[j]){if(!I){this._renderShellState();}}}}}};this._getPassStates=function(S){var p=[],i;S=S||[];for(i=0;i<S.length;i++){if(S[i]!==undefined){if(S[i]!=="home"&&S[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(S[i]);}}if(!p.length){p=["app","home"];}return p;};this._getModelStates=function(S,D){var h=[];if(S==="app"&&!D){var i=["app","minimal","standalone","embedded","headerless","merged","blank"];h=h.concat(i);}else if(S==="home"&&!D){var i=["home","embedded-home","headerless-home","merged-home","blank-home"];h=h.concat(i);}else{h.push(S);}return h;};this._getStatesList=function(){var S=M.getProperty("/states");return Object.keys(S);};this._destroyManageQueue=function(h){var S,i,j,k,B,l,p;for(S in e){if(e.hasOwnProperty(S)){if(!h||h.indexOf(S)===-1){B=e[S].extendedShellStates;for(l in B){if(B.hasOwnProperty(l)){p=B[l].managedObjects;for(i=0;i<p.length;i++){j=p[i];k=o[j];k.nRefCount--;if(k.nRefCount===0){k.oItem.destroy();}}delete B[l];}}delete e[S];}}}};this._isValidStateEntry=function(N){return!!c[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(h,i){f=i;s=h;};}var b=new A();return b;},true);sap.ui.predefine('sap/ushell/functionBindPrototype',function(){"use strict";if(!Function.prototype.bind){Function.prototype.bind=function(t){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var a=Array.prototype.slice.call(arguments,1),b=this,n=function(){},B=function(){return b.apply(this instanceof n&&t?this:t,a.concat(Array.prototype.slice.call(arguments)));};n.prototype=this.prototype;B.prototype=new n();return B;};}},false);sap.ui.predefine('sap/ushell/iconfonts',['sap/ui/core/IconPool'],function(I){"use strict";var a={};a.registerFiori2IconFont=function(){var l={fontFamily:"BusinessSuiteInAppSymbols",collectionName:"BusinessSuiteInAppSymbols",icons:[["icon-heart","E000"],["icon-quarter","E001"],["icon-year","E002"],["icon-equalizer","E003"],["icon-component","E004"],["icon-component-private","E005"],["icon-raw-material","E006"],["icon-sms","E007"],["icon-add-note","E008"],["icon-change-time-horizon","E009"],["icon-table-chart-customization","E00a"],["icon-delegated-important-task","E00b"],["icon-forklift","E00c"],["icon-coins","E00d"],["icon-filter-menu","E00e"],["icon-target-to-date","E00f"],["icon-program","E010"],["icon-phase","E011"],["icon-checklist","E012"],["icon-mirrored-task","E013"],["icon-sub-project","E014"],["icon-checklist-item","E015"],["icon-adhoc-analysis","E016"],["icon-change-analysis","E017"],["icon-review-demands","E018"],["icon-project-definition","E019"],["icon-data-access","E01a"],["icon-define-shortage","E01b"],["icon-review-supplies","E01c"],["icon-change-log","E01d"],["icon-priority-1","E01e"],["icon-priority-2","E01f"],["icon-jam","E020"],["icon-milestone","E021"],["icon-bulleting-with-numbers","E022"],["icon-decrease-indent","E023"],["icon-increase-indent","E024"],["icon-bold","E025"],["icon-italic","E026"],["icon-strike-through","E027"],["icon-underline","E028"],["icon-save-as","E029"],["icon-segmentation","E02A"],["icon-context-menu","E02B"],["icon-snapshot","E02C"],["icon-substraction-b-a","E02D"],["icon-substraction-a-b","E02E"],["icon-intersection","E02F"],["icon-union","E030"],["icon-top","E031"],["icon-bottom","E032"],["icon-page-up","E033"],["icon-page-down","E034"],["icon-create-dashboard","E035"],["icon-excelsius-file","E036"],["icon-open-folder","E037"],["icon-neutral","E038"],["icon-split-segmentation","E039"],["icon-manage-budget","E03A"],["icon-blocked","E03B"],["icon-pipette","E03C"],["icon-top-recipe","E03D"],["icon-recipe","E03E"],["icon-ingredients","E03F"],["icon-multiple-charts","E040"],["icon-descending-bars","E041"],["icon-descending-stacked-bars","E042"],["icon-scatter-plot","E043"],["icon-spill","E044"],["icon-fire","E045"],["icon-stratification","E046"],["icon-relationship","E047"],["icon-margin-decomposition","E048"],["icon-control-group","E049"],["icon-bullet-chart","E04A"],["icon-responsible-area","E04B"],["icon-increase","E04C"],["icon-decrease","E04D"],["icon-current-stock","E04E"],["icon-expedite","E04F"],["icon-postpone","E050"],["icon-approved","E051"],["icon-partially-delivered","E052"],["icon-line-bar-chart","E053"],["icon-expand-all","E054"],["icon-submission","E055"],["icon-change-request","E056"],["icon-column-unselected","E057"],["icon-column-selected","E058"],["icon-row-unselected","E059"],["icon-row-selected","E05A"],["icon-stock-requirements","E05B"],["icon-gender-male-and-female","E05C"],["icon-icon-marital-status","E05D"],["icon-birthday","E05E"],["icon-classification","E05F"],["icon-marked-for-deletion","E060"],["icon-bullet-chart","E061"],["icon-remove-filter","E062"],["icon-bank-account","E063"],["icon-savings-account","E064"],["icon-debit-card","E065"],["icon-vip-customer","E066"],["icon-undesirable-customer","E067"],["icon-answered-change-request","E068"],["icon-collected-change-request","E069"],["icon-draw-freehand","E06A"],["icon-draw-circle","E06B"],["icon-completed","E06C"],["icon-answered","E06D"],["icon-traffic-cone","E06E"],["icon-traffic-lights","E06F"],["icon-container","E070"],["icon-container-loading","E071"],["icon-traffic-jam","E072"],["icon-products","E073"],["icon-sidepanel","E074"],["icon-split-screen","E075"],["icon-truck-driver","E076"],["icon-keep-segment","E077"],["icon-exclude-segment","E078"],["icon-separate-segments","E079"],["icon-distribute-segments","E07A"],["icon-next-open-item","E07B"],["icon-where-used","E07C"],["icon-outbound-delivery","E07D"],["icon-outbound-delivery-inactive","E07E"],["icon-outbound-delivery-active","E07F"],["icon-target","E080"],["icon-source","E081"],["icon-material","E082"],["icon-due-date","E083"],["icon-overdue","E084"],["icon-set-as-default","E085"],["icon-face-very-bad","E086"],["icon-face-bad","E087"],["icon-face-skeptical","E088"],["icon-face-neutral","E089"],["icon-face-astonished","E08A"],["icon-face-happy","E08B"],["icon-face-very-happy","E08C"],["icon-face-awful","E08D"],["icon-face-devastated","E08E"],["icon-face-okey-dokey","E08F"],["icon-alarm","E090"],["icon-activate","E091"],["icon-segment-preview-reference-objects","E092"],["icon-radius","E093"],["icon-polygon-black","E094"],["icon-polygon-white","E095"],["icon-polygon","E096"],["icon-no-filter","E097"],["icon-grip","E098"],["icon-water","E09A"],["icon-liquid","E09C"],["icon-gas","E09B"],["icon-gas-2","e09d"],["icon-water-2","e09e"],["icon-operator","e09f"],["icon-target-filter","e0a0"],["icon-equipment","E0A1"],["icon-gis-layer","E0A2"],["icon-section","E0A3"],["icon-kohorte","E0A4"],["icon-female","E0A5"],["icon-male","E0A6"],["icon-model","E0A7"],["icon-hourglass","E0A8"],["icon-plain-grid-layout","E0A9"],["icon-top-panel-layout","E0AA"],["icon-2x1-grid-layout","E0AB"],["icon-1x2-grid-layout","E0AC"],["icon-side-panel-left-layout","E0AD"],["icon-2x2-grid-layout","E0AE"],["icon-inverse-t-layout","E0AF"],["icon-t-layout","E0B0"],["icon-top-side-panel-layout","E0B1"],["icon-side-top-panel-layout","E0B2"],["icon-4x4-grid-layout","E0B3"],["icon-add-point","E0B4"],["icon-add-polyline","E0B5"],["icon-add-polygone","E0B6"],["icon-email-send-delayed","E0B7"],["icon-email-not-opened","E0B8"],["icon-link-not-clicked","E0B9"],["icon-sms-send-delayed","E0BA"],["icon-ab-testing","E0BB"],["icon-tv","E0BC"],["icon-radio","E0BD"],["icon-outdoor","E0BE"],["icon-event","E0BF"],["icon-paid-search","E0C0"],["icon-display-ads","E0C1"],["icon-call-center","E0C2"],["icon-social","E0C3"],["icon-event2","E0C4"],["icon-official-service-group","E0C5"],["icon-time-deposit","E0C6"],["icon-early-widthdrawal-for-time-deposits","E0C7"],["icon-aggregated-view","E0C8"],["icon-detailed-view","E0C9"],["icon-rescheduling","E0CA"],["icon-resequencing","E0CB"],["icon-movement-warning","E0CC"],["icon-multiple-warnings","E0CD"],["icon-box-truck","E0CE"],["icon-box-truck-empty","E0CF"],["icon-tractor","E0C0"],["icon-driver","E0D1"],["icon-driver-warning","E0D2"],["icon-overlap","E0D3"],["icon-expand-overlap","E0D4"],["icon-collapse-overlap","E0D5"],["icon-utilization","E0D6"],["icon-expand-utilization","E0D7"],["icon-collapse-utilization","E0D8"],["icon-trailer","E0D7"],["icon-container-closed","E0DA"],["icon-railcar","E0DB"],["icon-warehouse","E0DC"],["icon-goods","E0DD"],["icon-ship","E0DE"],["icon-truck-driver","E0DF"],["icon-return-delivery","E0E0"],["icon-return-order","E0E1"],["icon-contract","E0E2"],["icon-business-partner","E0E3"],["icon-business-partner-verified","E0E4"],["icon-business-partner-anonymous","E0E5"],["icon-business-partner-self-identified","E0E6"],["icon-money-withdrawal","E0E7"],["icon-truck-load","E0E8"],["icon-truck-load-unload","e0ea"],["icon-truck-unload","e0e9"],["icon-pharmacy","e0eb"],["icon-medicine-syrup","e0ec"],["icon-reminder","e0ed"],["icon-medicine-pill","e0ee"],["icon-medicine-ointment","e0ef"],["icon-medicine-drops","e0f0"],["icon-blood-test","e0f1"],["icon-temperature","e0f2"],["icon-allergies","e0f9"],["icon-immunization","e0f8"],["icon-blood-pressure","e0f7"],["icon-health-tracking","e0f6"],["icon-weight","e0f5"],["icon-foot-steps","e0f4"],["icon-medicine-inhaler","e0f3"],["icon-rescheduling2","e0fa"],["icon-resequencing2","e0fb"],["icon-no-time-change","e0fc"],["icon-time-change","e0fd"],["icon-smart-matcher","e0fe"],["icon-3D","e0ff"],["icon-parallel-sequence","e100"],["icon-alternative-sequence","e101"],["icon-main-sequence","e102"],["icon-refinery","e103"],["icon-terminal","e104"],["icon-vessel","e105"],["icon-barge","e106"],["icon-road","e107"],["icon-pipeline","e108"],["icon-delay","e109"],["icon-legal-section","e10a"],["icon-causes","e10b"],["icon-effects","e10c"],["icon-shared-by-me","e10d"],["icon-shared-with-me","e10e"],["icon-main-milestone","e10f"],["icon-indicator-groups","e110"]]},f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0018","e0c3"],["F0019","e0c3"],["F0020","e0c3"],["F0021","e10d"],["F0366","e129"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},A={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E213"],["F0429","E2A6"],["F0xx1","E240"],["F0xx2","E241"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E21C"],["F0251","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2BC"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"],["F0600","E38A"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F0834","E31D"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E383"],["F0718","E384"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1030","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1563","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},t={fontFamily:"SAPIconsTNT",collectionName:"TNTIcons",icons:[["Technical System","e000"],["Java System","e001"],["ABAP System","e002"],["System","e004"],["System TREX","e005"],["System Tracks","e006"],["System Recommendation","e003"],["System HANA","e00e"],["Technical Scenario","e007"],["Technical Instance","e008"],["Throughput Backlog","e009"],["Batch Processing","e00a"],["Database Consistency","e00b"],["Intermediate Message","e00c"],["Exceptions","e00d"],["Python","e00f"],["Raise fault","e010"],["Code1","e011"],["Code2","e012"],["Spike arrest","e013"],["Verify API","e014"],["User","e015"],["Note","e016"],["Throwing message","e017"],["Catching message","e018"],["Start event","e019"],["End event","e01a"],["Gateway","e01b"],["Sub process marker","e01c"],["Ad hoc marker","e01d"],["Manual task","e01e"],["Send task","e01f"],["Receive task","e020"],["Script task","e021"],["Marquee","e022"],["Data input arrow","e023"],["Data output arrow","e024"],["More","e025"],["Pattern","e026"],["Task","e027"],["Arrow","e028"],["Data","e029"],["Data store","e02a"],["Pool","e02b"],["Swimlane","e02c"],["Select","e02d"],["Cursor","e02e"],["API","e02f"],["O Data","e030"],["Javascript","e031"],["Value mapping","e032"],["Terminate end event","e033"],["Parallel gateway","e034"],["Exclusive gateway","e035"],["Service task","e036"],["Workflow editor","e037"],["Boundary interrupting","e038"],["Boundary non-interrupting","e039"],["Block","e03A"],["Constrain block","e03B"],["Actor","e03C"],["Instance specification","e03D"],["Value type","e03E"],["Interface block","e03F"],["Unit","e040"],["Signal","e041"],["Quantity kind","e042"],["Item flow","e043"],["Dependency","e044"],["Generalization","e045"],["Aggregation","e046"],["Composition","e047"],["Association","e048"],["Port","e049"],["Proxy port","e04A"],["Full port","e04B"],["Operations","e04C"],["Constrains","e04D"],["Receptions","e04E"],["References","e04F"],["Parts","e050"],["Flow","e051"],["Values","e052"],["Bill of material","e053"],["Document info recording","e054"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,A,l,h,o,b,i,c,d,e,g,s,t);};a.registerFonts=function(){var o,i,j;for(i=0;i<arguments.length;i=i+1){o=arguments[i];for(j=0;j<o.icons.length;j=j+1){I.addIcon(o.icons[j][0],o.collectionName,o.fontFamily,o.icons[j][1],false,true);}}};return a;},true);sap.ui.predefine('sap/ushell/library',['sap/m/library','sap/ui/core/Core','sap/ui/core/library','sap/ui/layout/library'],function(l,C,a,b){"use strict";sap.ui.getCore().initLibrary({name:"sap.ushell",dependencies:["sap.ui.core","sap.ui.layout","sap.m"],types:["sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow"],interfaces:[],controls:["sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.HideGroupsButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage","sap.ushell.ui.launchpad.Fiori2LoadingDialog","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.HeaderTile","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.ViewPortContainer","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:[],version:"1.54.6",extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});sap.ushell.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};sap.ushell.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};sap.ushell.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};return sap.ushell;},true);sap.ui.predefine('sap/ushell/navigationMode',[],function(){"use strict";var e={};var _=function(E){var i=true;if(E){if(typeof E!=="object"){i=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA"].indexOf(k)===-1){i=false;}else if(typeof E[k]!=="boolean"){i=false;}});}}if(!i){jQuery.sap.log.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":return true;default:return false;}};var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";default:return undefined;}};var b=function(E,A){if(jQuery.isPlainObject(E)){return E[a(A)];}return false;};e.compute=function(n,E,s,A,o){var i,l,c=["inplace","explace"];_(o);var N={};if(c.indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(c.indexOf(s)>=0){i=e._getInternalNavigationMode(s,n);jQuery.sap.log.debug("Navigation mode was forced to "+i,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=i;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};e._getInternalNavigationMode=function(E,A){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded"},URL:{inplace:"replace",explace:"newWindow"}};if(!i.hasOwnProperty(A)){jQuery.sap.log.error(A+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"){jQuery.sap.log.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace'","sap.ushell.navigationMode");return null;}return i[A][E];};e.getExternalNavigationMode=function(i){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(i)){jQuery.sap.log.error(i+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[i];};var w=["NWBC","WDA","TR"];e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return'newWindowThenEmbedded';}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){jQuery.sap.log.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};e.computeNavigationModeForHomepageTiles=function(A,s,i){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&i){return"embedded";}return this.getNavigationMode(r);};return e;},true);sap.ui.predefine('sap/ushell/override',function(){"use strict";var o={};o.updateAggregation=function(n){if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],g=A._sMutator+"Group",G=B.isGrouped()&&this[g],i=0,I=[],c=jQuery.proxy(function(C){var s=this.getId()+"-"+jQuery.sap.uid(),d=f(s,C);d.setBindingContext(C,b.model);this[A._sMutator](d);},this);if(G){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{I=this[A._sGetter]();for(i=0;i<a.length;++i){if(i<I.length){I[i].setBindingContext(a[i],b.model);}else{c(a[i]);}}for(;i<I.length;++i){I[i].destroy();}I.length=a.length;}}};o.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,g=null,G=null,t=this,I=t.getItems(),l=0,L=0,i,s,T=[];g=B.isGrouped()&&this.addItemGroup;jQuery.each(B.getContexts(),function(a,C){if(g&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==G){var d,h;if(b.groupHeaderFactory){d=b.groupHeaderFactory(N);}h=d||new sap.m.GroupHeaderListItem({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",h,L,true);L=L+1;G=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===sap.m.GroupHeaderListItem){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){jQuery.each(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{s=t.getId()+"-"+L;c=f(s,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){jQuery.each(T,function(i,v){v.destroy();});},1);};o.updateAggregatesFactory=function(n){return function(){jQuery.proxy(o.updateAggregation,this,n)();};};return o;},true);sap.ui.predefine('sap/ushell/renderers/fiori2/AccessKeysHandler',function(){"use strict";var a=function(){};a.prototype={keyCodes:jQuery.sap.KeyCodes,bFocusOnShell:true,bFocusPassedToExternalHandlerFirstTime:true,isFocusHandledByAnotherHandler:false,fnExternalKeysHandler:null,sLastExternalKeysHandlerUrl:null,fnExternalShortcuts:null,isleftAltPressed:false,bForwardNavigation:true,appOpenedHandler:function(){var c=hasher.getHash();if(c!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null;}this.sLastExternalKeysHandlerUrl=c;},handleSearchKey:function(){var s=sap.ui.getCore().byId('sf');if(s&&$('#sf:visible').length===0){return;}jQuery(s).click();},setFocusOnSearchButton:function(e){e.preventDefault();var s=sap.ui.getCore().byId('sf');if(s){jQuery(s).focus();}},handleSearchAppFinderKey:function(e){var b=sap.ui.getCore().byId('appFinderSearch');if(!b||jQuery('#appFinderSearch:visible').length===0){return;}else if(jQuery('.sapUshellViewPortCenter').hasClass('centerClass')){jQuery(b).focus();e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();}},handleNavToMeArea:function(){var m=sap.ui.getCore().byId("meAreaHeaderButton"),M=sap.ui.getCore().byId("mainShell"),s;if(M){s=M.getController().getModelConfiguration().appState;}if(m&&!m.getSelected()&&s!="headerless"){var S=sap.ui.getCore().byId("mainShell").oController;S.loadMeAreaView();m.firePress();}setTimeout(function(){jQuery(".sapUshellActionItem:first").focus();},300);},handleSettingsButton:function(){var m=sap.ui.getCore().byId("meAreaHeaderButton");if(m&&!m.getSelected()){var s=sap.ui.getCore().byId("mainShell").oController;s.loadMeAreaView();m.firePress();}setTimeout(function(){jQuery("#userSettingsBtn").focus();},300);},handleNavToNotifications:function(){var n=sap.ui.getCore().byId("NotificationsCountButton"),m=sap.ui.getCore().byId("mainShell"),s;if(m){s=m.getController().getModelConfiguration().appState;}if(n&&s!="headerless"){n.firePress();setTimeout(function(){jQuery("#notificationsView .sapUshellNotificationsListItem:visible:first").focus();},2000);}},handleSettings:function(){var s,u=sap.ui.getCore().byId('userSettingsBtn');if(!u){s=sap.ui.getCore().byId("mainShell").oController;s.loadMeAreaView();u=sap.ui.getCore().byId('userSettingsBtn');}u.firePress({"hotkeys":"ctrl_comma"});},handleAccessOverviewKey:function(){var t=sap.ushell.resources.i18n,i=this.oModel.getProperty("/searchAvailable"),m=sap.ui.getCore().byId("mainShell"),c=[],s,d,b,o;if(m){b=m.getController().getModelConfiguration().appState;}this.aShortcutsDescriptions.forEach(function(v){c.push(new sap.m.Label({text:v.text}));c.push(new sap.m.Text({text:v.description}));});if(i){c.push(new sap.m.Label({text:"Alt+F"}));c.push(new sap.m.Text({text:t.getText("hotkeyFocusOnSearchButton")}));}if(b!="headerless"){c.push(new sap.m.Label({text:"Alt+M"}));c.push(new sap.m.Text({text:t.getText("hotkeyFocusOnMeArea")}));c.push(new sap.m.Label({text:"Alt+N"}));c.push(new sap.m.Text({text:t.getText("hotkeyFocusOnNotifications")}));}c.push(new sap.m.Label({text:"Alt+S"}));c.push(new sap.m.Text({text:t.getText("hotkeyFocusOnSettingsButton")}));c.push(new sap.m.Label({text:"Ctrl+Comma"}));c.push(new sap.m.Text({text:t.getText("hotkeyOpenSettings")}));if(i){c.push(new sap.m.Label({text:"Ctrl+Shift+F"}));c.push(new sap.m.Text({text:t.getText("hotkeyFocusOnSearchField")}));}s=new sap.ui.layout.form.SimpleForm({editable:false,content:c});o=new sap.m.Button({text:t.getText("okBtn"),press:function(){d.close();}});d=new sap.m.Dialog({id:"hotKeysGlossary",title:t.getText("hotKeysGlossary"),contentWidth:"29.6rem",leftButton:o,afterClose:function(){d.destroy();}});d.addContent(s);d.open();},handleShortcuts:function(e){if(e.altKey&&!e.shiftKey&&!e.ctrlKey){switch(String.fromCharCode(e.keyCode)){case'M':this.handleNavToMeArea();break;case'N':this.handleNavToNotifications();break;case'S':this.handleSettingsButton();break;case'F':this.setFocusOnSearchButton(e);break;}}if(e.ctrlKey){if(e.shiftKey){if(e.keyCode===70){this.handleSearchKey();}}else{if(e.keyCode===188){this.handleSettings();}else if(e.keyCode===112){this.handleAccessOverviewKey();}else if(e.keyCode===83){this.handleSearchAppFinderKey(e);}}}},registerAppKeysHandler:function(h){this.fnExternalKeysHandler=h;this.sLastExternalKeysHandlerUrl=hasher.getHash();},resetAppKeysHandler:function(){this.fnExternalKeysHandler=null;},getAppKeysHandler:function(){return this.fnExternalKeysHandler;},registerAppShortcuts:function(h,s){this.fnExternalShortcuts=h;this.aShortcutsDescriptions=s;},_handleFocusBackToMe:function(e,i){this.bFocusOnShell=true;if(i){jQuery("#"+i).focus();}else if(!e){jQuery("#meAreaHeaderButton").focus();}else if(e.shiftKey){this.bForwardNavigation=false;if(e.keyCode===jQuery.sap.KeyCodes.TAB){jQuery("#sapUshellHeaderAccessibilityHelper").focus();}else if(e.keyCode===jQuery.sap.KeyCodes.F6){e.preventDefault();jQuery("#meAreaHeaderButton").focus();}}else{this.bForwardNavigation=true;e.preventDefault();if(!jQuery("#meAreaHeaderButton").length){jQuery("#sapUshellHeaderAccessibilityHelper").focus();}else{jQuery("#meAreaHeaderButton").focus();}}this.bFocusPassedToExternalHandlerFirstTime=true;},setIsFocusHandledByAnotherHandler:function(h){this.isFocusHandledByAnotherHandler=h;},sendFocusBackToShell:function(p){var e=undefined,i=undefined;var P=typeof p;if(P==="string"){i=p;}else if(P==="object"){e=p;}this._handleFocusBackToMe(e,i);},_handleEventUsingExteranlKeysHandler:function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(this.fnExternalKeysHandler&&jQuery.isFunction(this.fnExternalKeysHandler)){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.setIsFocusHandledByAnotherHandler(false);},init:function(m){this.oModel=m;document.addEventListener("keydown",function(e){if(e.keyCode===16){return;}if(e.shiftKey){this.bForwardNavigation=false;}else{this.bForwardNavigation=true;}if(e.keyCode===this.keyCodes.TAB||e.keyCode===this.keyCodes.F6){setTimeout(function(){this._handleEventUsingExteranlKeysHandler(e);}.bind(this),0);}else{this._handleEventUsingExteranlKeysHandler(e);}if(e.keyCode===18){if(e.location===window.KeyboardEvent.DOM_KEY_LOCATION_LEFT){this.isleftAltPressed=true;}else{this.isleftAltPressed=false;}}if(this.isleftAltPressed||!e.altKey){this.handleShortcuts(e);if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}}}.bind(this),true);}};var A=new a();sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",a.prototype.appOpenedHandler.bind(A));return A;},true);sap.ui.predefine('sap/ushell/renderers/fiori2/History',function(){"use strict";var H=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};H.prototype.hashChange=function(n,o){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};H.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};H.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};H.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};H.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};H.prototype.getHashIndex=function(h){return this._history.indexOf(h);};H.prototype.getHistoryLength=function(){return this._history.length;};return H;},true);sap.ui.predefine('sap/ushell/renderers/fiori2/Lifecycle',function(){"use strict";var l="sap.ushell",e,E={rendererLoaded:{oldNamespace:"sap.ushell.renderers.fiori2.Renderer",newEventName:"rendererLoaded"},componentCreated:{oldNamespace:"sap.ushell.components.container.ApplicationContainer",newEventName:"appComponentLoaded"},appOpened:{oldNamespace:"launchpad",newEventName:"appOpened"},appClosed:{oldNamespace:"launchpad",newEventName:"appClosed"},coreExtLoaded:{oldNamespace:"launchpad",newEventName:"coreResourcesFullyLoaded"}};function _(n,e,d){setTimeout(function(){sap.ui.getCore().getEventBus().publish(l,e,d);},0);}function a(n,s,d){var m=E[s];if(m!==undefined){_(l,m.newEventName,d);}}for(e in E){sap.ui.getCore().getEventBus().subscribe(E[e].oldNamespace,e,a);}},false);sap.ui.predefine('sap/ushell/renderers/fiori2/Navigation',function(){"use strict";var N=function(){this.SEARCH={ID:"ShellSearch",SEMANTICOBJECT:"shell",ACTION:"search"};sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"Search App Container",isApplicable:function(h){return h==="#Action-search";},resolveHashFragment:function(h){var d=new jQuery.Deferred(),r={};if(h==="#Action-search"){r={"additionalInformation":"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container","applicationType":"URL","url":jQuery.sap.getResourcePath("sap/ushell/renderers/fiori2/search/container"),"loadCoreExt":true,"loadDefaultDependencies":false};}d.resolve(r);return d.promise();}});};sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"FLP Resolver",isApplicable:function(h){h=(typeof h==="string")?h:"";h=h.split("?")[0];return h==="#Shell-home"||h==="#shell-catalog";},resolveHashFragment:function(h){var d=new jQuery.Deferred(),r={};h=(typeof h==="string")?h:"";h=h.split("?")[0];if(h==="#Shell-home"||h==="#shell-catalog"){r={"additionalInformation":"SAPUI5.Component=sap.ushell.components.flp","applicationType":"URL","url":jQuery.sap.getResourcePath("sap/ushell/components/flp"),"loadCoreExt":false,"loadDefaultDependencies":false,"applicationDependencies":{asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]}}};}d.resolve(r);return d.promise();}});var N=new N();return N;},true);sap.ui.predefine('sap/ushell/renderers/fiori2/Renderer',['sap/ui/core/UIComponent','./RendererExtensions','sap/ushell/resources',"sap/ushell/components/applicationIntegration/API"],function(U,R,r,m){"use strict";var a=U.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.54.6",dependencies:{version:"1.54.6",libs:["sap.ui.core","sap.m"],components:[]}}});a.prototype.addRightViewPort=function(v){this.shellCtrl.oViewPortContainer.addRightViewPort(v);this.shellCtrl.oViewPortContainer.navTo('rightViewPort',v.getId(),'show');};a.prototype.addLeftViewPort=function(v){this.shellCtrl.oViewPortContainer.addLeftViewPort(v);this.shellCtrl.oViewPortContainer.navTo('leftViewPort',v.getId(),'show');};a.prototype.getShellController=function(){return this.shellCtrl;};a.prototype.createContent=function(){var p=jQuery.sap.getUriParameters().get("appState")||jQuery.sap.getUriParameters().get("sap-ushell-config"),w,v=this.getComponentData()||{},P,A={applications:{"Shell-home":{}},rootIntent:"Shell-home"},V;var b=function(){var c=false,d={};function M(h,n,s,i){this.hash=h;this.name=n;this.start=s;this.end=0;this.duration=0;this.info=i;};function B(h,n,s,e,g){this.hash=h;this.name=n;this.scenario=e;this.sequence=g;this.start=s;this.end=0;this.percent=null;this.duration=0;this.funcs={};}this.start=function(s,e,g){var t=jQuery.sap.now(),o;if(!c){return;}if(d[s]===undefined||d[s]===null){d[s]={};}if(d[s][e]===undefined){d[s][e]=null;}if(d[s][e]===null){o=new B(this.hash(),e,t,s,g);d[s][o.name]=o;}};this.startFunc=function(s,e,g,h,i){if(!c)return;var t=jQuery.sap.now();var j=null;if(d[s]===undefined||d[s]===null){d[s]={};}if(d[s][e]===undefined){d[s][e]=null;}if(d[s][e]===null){j=new B(this.hash(),e,t,s,g);d[s][e]=j;}var k=new M(this.hash(),h,t,i);d[s][e].funcs[k.hash]=k;return k.hash;};this.end=function(s,e){if(!c)return;var t=jQuery.sap.now();if(d[s][e]===undefined){d[s][e]=null;}if(d[s][e]!=null){d[s][e].end=t;d[s][e].duration=Math.round(d[s][e].end-d[s][e].start);}};this.endFunc=function(s,e,g){if(!c)return;var t=jQuery.sap.now();if(d[s][e]===undefined){d[s][e]=null;}if(d[s][e]!=null){d[s][e].end=t;d[s][e].duration=Math.round(d[s][e].end-d[s][e].start);d[s][e].funcs[g].end=t;d[s][e].funcs[g].duration=Math.round(d[s][e].funcs[g].end-d[s][e].funcs[g].start);}};this.calc=function(){if(!c)return;return d;};this.hash=function(){if(!c)return;var e=(new Date()).valueOf().toString()+Math.random().toString();var h=5381;for(var i=0;i<e.length;i++){var g=e.charCodeAt(i);h=((h<<5)+h)+g;}return h;};this.getActive=function(){return c;};this.setActive=function(o,C){if(c===o){return;}c=o;document.addEventListener('keyup',function(e){if(e.shiftKey&&e.ctrlKey&&e.altKey&&e.keyCode==77){window.calc=JSON.stringify(jQuery.sap.flpmeasure.calc());window.open(jQuery.sap.getResourcePath("sap/ushell/renderers/fiori2/stat.html"));}},false);return c;};var f=location.href.match(/sap-flp-measure=([^\&]*)/);if(f&&f[1]){if(f[1]==="true"||f[1]==="x"||f[1]==="X"){this.setActive(true);}else{this.setActive(true,f[1]);}}};jQuery.sap.flpmeasure=new b();w=(p==="headerless-opt")?"headerless":p;if(w){if(!v.config){v.config={};}v.config.appState=w;v.config.appStateOrig=p;v.config.inHeaderLessOpt=(p==="headerless-opt");}if(v.config){P=["enablePersonalization","enableTagFiltering","enableLockedGroupsCompactLayout","enableCatalogSelection","enableSearchFiltering","enableTilesOpacity","enableDragIndicator","enableActionModeMenuButton","enableActionModeMenuButton","enableActionModeFloatingButton","enableTileActionsIcon","enableHideGroups"];if(v.config.rootIntent===undefined){v.config.migrationConfig=true;}v.config=jQuery.extend(A,v.config);if(v.config.applications["Shell-home"]){P.forEach(function(s){var c=v.config[s];if(c!==undefined){v.config.applications["Shell-home"][s]=c;}if(s!=="enablePersonalization"){delete v.config[s];}});}}jQuery.sap.flpmeasure.start(0,"Creating Shell",0);if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(s){var V=v.config.customViews[s];sap.ui.view(s,{type:V.viewType,viewName:V.viewName,viewData:V.componentData});});}V=sap.ui.view('mainShell',{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.Shell",viewData:v});sap.ushell.renderers.fiori2.utils.init(V.getController());this.shellCtrl=V.oController;this.oShellModel=sap.ushell.components.applicationIntegration.AppLifeCycle;return V;};a.prototype.createExtendedShellState=function(s,c){return this.oShellModel.createExtendedShellState(s,c);};a.prototype.applyExtendedShellState=function(s,c){this.oShellModel.applyExtendedShellState(s,c);};a.prototype.showLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.addLeftPaneContent([i],c,s);}else{this.oShellModel.addLeftPaneContent(i,c,s);}};a.prototype.showHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderItem([i],c,s);}else{this.oShellModel.addHeaderItem(i,c,s);}};a.prototype.showRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addRightFloatingContainerItem([i],c,s);}else{this.oShellModel.addRightFloatingContainerItem(i,c,s);}};a.prototype.showRightFloatingContainer=function(s){this.oShellModel.showRightFloatingContainer(s);};a.prototype.showToolAreaItem=function(i,c,s){this.oShellModel.addToolAreaItem(i,c,s);};a.prototype.showActionButton=function(i,c,s,I){var b=[],A=[],B;if(typeof i==="string"){i=[i];}b=i.filter(function(d){B=sap.ui.getCore().byId(d);return B instanceof sap.m.Button&&!(B instanceof sap.ushell.ui.launchpad.ActionItem);});A=i.filter(function(d){B=sap.ui.getCore().byId(d);return B instanceof sap.ushell.ui.launchpad.ActionItem;});if(b.length){this.convertButtonsToActions(b,c,s,I);}if(A.length){this.oShellModel.addActionButton(A,c,s,I);}this.toggleOverFlowActions();};a.prototype.showFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.addFloatingActionButton([i],c,s);}else{this.oShellModel.addFloatingActionButton(i,c,s);}};a.prototype.showHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderEndItem([i],c,s);}else{this.oShellModel.addHeaderEndItem(i,c,s);}};a.prototype.setHeaderVisibility=function(v,c,s){this.oShellModel.setHeaderVisibility(v,c,s);};a.prototype.showSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.addSubHeader([i],c,s);}else{this.oShellModel.addSubHeader(i,c,s);}};a.prototype.showSignOutItem=function(c,s){this.oShellModel.showSignOutButton(c,s);};a.prototype.showSettingsItem=function(c,s){this.oShellModel.showSettingsButton(c,s);};a.prototype.setFooter=function(f){this.shellCtrl.setFooter(f);};a.prototype.setShellFooter=function(p){var d=new jQuery.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(this.lastFooterId){this.removeFooter();}this.lastFooterId=oInnerControl.getId();this.shellCtrl.setFooter(C);d.resolve(C);}}if(b){c=b.replace(/\./g,"/");sap.ui.require([c],function(e){C=new e(o);if(t.lastFooterId){t.removeFooter();}t.oShellModel.addElementToManagedQueue(C);t.lastFooterId=C.getId();t.shellCtrl.setFooter(C);d.resolve(C);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};a.prototype.setFooterControl=function(c,C){var s=c.replace(/\./g,"/"),o=sap.ui.require(s),b,f,d=false;if(o){d=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(d){return new o(C);}else{var e=jQuery.sap.getObject(c);return new e(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};b=this.createItem(C,undefined,undefined,f);if(this.lastFooterId){this.removeFooter();}this.lastFooterId=b.getId();this.shellCtrl.setFooter(b);return b;};a.prototype.hideHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],c,s);}else{this.oShellModel.removeHeaderItem(i,c,s);}};a.prototype.removeToolAreaItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeToolAreaItem([i],c,s);}else{this.oShellModel.removeToolAreaItem(i,c,s);}};a.prototype.removeRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],c,s);}else{this.oShellModel.removeRightFloatingContainerItem(i,c,s);}};a.prototype.hideActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeActionButton([i],c,s);}else{this.oShellModel.removeActionButton(i,c,s);}this.toggleOverFlowActions();};a.prototype.toggleOverFlowActions=function(){jQuery.sap.measure.start("FLP:Shell.controller.toggleMeAreaView","show or hide actionbox if no actions in me area","FLP");var b=sap.ui.getCore().byId('meArea');var B={};try{if(b){if(b.actionBox){if(b.actionBox._getControlsIds().length===0){sap.ui.getCore().byId('overflowActions').setVisible(false);}else{b.actionBox._getControlsIds().forEach(function(c){var d=sap.ui.getCore().byId(c);if(d.getVisible()){throw B;}});sap.ui.getCore().byId('overflowActions').setVisible(false);}}}}catch(e){if(e!==B){throw e;}else{sap.ui.getCore().byId('overflowActions').setVisible(true);}}jQuery.sap.measure.end("FLP:Shell.controller.toggleMeAreaView");};a.prototype.hideLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],c,s);}else{this.oShellModel.removeLeftPaneContent(i,c,s);}};a.prototype.hideFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],c,s);}else{this.oShellModel.removeFloatingActionButton(i,c,s);}};a.prototype.hideHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],c,s);}else{this.oShellModel.removeHeaderEndItem(i,c,s);}};a.prototype.hideSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],c,s);}else{this.oShellModel.removeSubHeader(i,c,s);}};a.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var f=sap.ui.getCore().byId(this.lastFooterId);if(f){f.destroy();}this.lastFooterId=undefined;}};a.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState();};a.prototype.addShellSubHeader=function(p){var d=new jQuery.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){this.showSubHeader(C.getId(),e,s);}d.resolve(C);}}if(b){c=b.replace(/\./g,"/");sap.ui.require([c],function(f){C=new f(o);if(i){t.showSubHeader(C.getId(),e,s);t.oShellModel.addElementToManagedQueue(C);}d.resolve(C);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};a.prototype.addSubHeader=function(c,C,i,b,s){var d=c.replace(/\./g,"/"),o=sap.ui.require(d),e,f,g=false;if(o){g=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(g){return new o(C);}else{var h=jQuery.sap.getObject(c);return new h(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};e=this.createItem(C,b,s,f);if(i){this.showSubHeader(e.getId(),b,s);}return e;};a.prototype.addUserAction=function(p){var d=new jQuery.Deferred(),t=this,M=this.oShellModel.getModelToUpdate(),c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates,I=p.bIsFirst||true,n;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(b){if(b==="sap.m.Button"){b="sap.ushell.ui.launchpad.ActionItem";}c=b.replace(/\./g,"/");sap.ui.require([c],function(f){var O=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(M,true);var g;if(o){if(o.id){g=o.id;}}C=sap.ui.getCore().byId(g)||new f(o);if(!C.getActionType){C=new f(o);}if(i){t.showActionButton(C.getId(),e,s,I);t.oShellModel.addElementToManagedQueue(C);}t.oShellModel.setModelToUpdate(O,false);d.resolve(C);});}else{n="You must specify control type in order to create it";jQuery.sap.log.warning(n);d.reject(n);}return d.promise();};a.prototype.addActionButton=function(c,C,i,b,s,I){var d,o,e,f,g=false;if(c==="sap.m.Button"){c="sap.ushell.ui.launchpad.ActionItem";}d=c.replace(/\./g,"/");o=sap.ui.require(d);if(o){g=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(g){return new o(C);}else{var h=jQuery.sap.getObject(c);return new h(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};e=this.createItem(C,b,s,f);if(i){this.showActionButton(e.getId(),b,s,I);}return e;};a.prototype.addFloatingButton=function(p){var d=new jQuery.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){t.oShellModel.addElementToManagedQueue(C);t.showFloatingActionButton(oItem.getId(),e,s);}d.resolve(C);}}if(b){c=b.replace(/\./g,"/");}else{c="sap/m/Button";}sap.ui.require([c],function(f){C=new f(o);if(i){this.showFloatingActionButton(oItem.getId(),e,s);}d.resolve(C);});return d.promise();};a.prototype.addFloatingActionButton=function(c,C,i,b,s){var d,o,e,f,g=false;if(!c){c="sap.m.Button";}d=c.replace(/\./g,"/");o=sap.ui.require(d);if(o){g=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(g){return new o(C);}else{var h=jQuery.sap.getObject(c);return new h(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};e=this.createItem(C,b,s,f);if(i){this.showFloatingActionButton(e.getId(),b,s);}return e;};a.prototype.addSidePaneContent=function(p){var d=new jQuery.Deferred(),t=this,c,C,b=false,e=p.controlType,o=p.oControlProperties,i=p.bIsVisible,f=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(e){c=e.replace(/\./g,"/");sap.ui.require([c],function(g){C=new g(o);if(i){t.oShellModel.addElementToManagedQueue(C);t.showLeftPaneContent(oItem.getId(),f,s);}d.resolve(C);});}else{jQuery.sap.log.warning("You must specify control type in order to create it");}return d.promise();};a.prototype.addLeftPaneContent=function(c,C,i,b,s){var t=this,d=c.replace(/\./g,"/"),o=sap.ui.require(d),e,f,g;if(o){g=true;}else{if(!jQuery.sap.getObject(c)){jQuery.sap.require(c);}}f=function(C){if(c){if(g){return new o(C);}else{var h=jQuery.sap.getObject(c);return new h(C);}}else{jQuery.sap.log.warning("You must specify control type in order to create it");}};e=this.createItem(C,b,s,f);if(i){this.showLeftPaneContent(e.getId(),b,s);}return e;};a.prototype.addHeaderItem=function(c,C,i,b,s){if(typeof(arguments[0])==='object'&&typeof(arguments[1])==='boolean'){C=arguments[0];i=arguments[1];b=arguments[2];s=arguments[3];}else{jQuery.sap.log.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var p=C;p.showSeparator=false;var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderItem(I.getId(),b,s);}return I;};a.prototype.addRightFloatingContainerItem=function(c,i,C,s){var f=function(c){return new sap.m.NotificationListItem(c);},I=this.createItem(c,C,s,f);if(i){this.showRightFloatingContainerItem(I.getId(),C,s);}return I;};a.prototype.addToolAreaItem=function(c,i,C,s){var f=function(c){return new sap.ushell.ui.shell.ToolAreaItem(c);},I=this.createItem(c,C,s,f);if(i){this.showToolAreaItem(I.getId(),C,s);}return I;};a.prototype.addHeaderEndItem=function(c,C,i,b,s){var p=C;p.showSeparator=false;var f=function(C){return new sap.ushell.ui.shell.ShellHeadItem(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderEndItem(I.getId(),b,s);}return I;};a.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};a.prototype.addEndUserFeedbackCustomUI=function(c,s){this.shellCtrl.addEndUserFeedbackCustomUI(c,s);};a.prototype.addUserPreferencesEntry=function(e){return this.shellCtrl.addUserPreferencesEntry(e);};a.prototype.setHeaderTitle=function(t,c,C){var s,o=null,b,l=a.prototype.LaunchpadState;if(C&&C.id&&sap.ui.getCore().byId(C.id)){o=sap.ui.getCore().byId(C.id);this.shellCtrl.setHeaderTitle(t,o);}else if(c){s=c.replace(/\./g,"/");b=sap.ui.require(s);if(b){o=new b(C);this.shellCtrl.setHeaderTitle(t,o);}else{sap.ui.require([s],function(b){o=new b(C);this.shellCtrl.setHeaderTitle(t,o);});}}else{this.shellCtrl.setHeaderTitle(t,o);}};a.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};a.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};a.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};a.prototype.setFloatingContainerContent=function(c,C,s){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[c.getId()],C,s);};a.prototype.setFloatingContainerVisibility=function(v){this.shellCtrl.setFloatingContainerVisibility(v);};a.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState();};a.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility();};a.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility();};a.prototype.setFloatingContainerDragSelector=function(e){this.shellCtrl.setFloatingContainerDragSelector(e);};a.prototype.makeEndUserFeedbackAnonymousByDefault=function(e){this.shellCtrl.makeEndUserFeedbackAnonymousByDefault(e);};a.prototype.showEndUserFeedbackLegalAgreement=function(s){this.shellCtrl.showEndUserFeedbackLegalAgreement(s);};a.prototype.LaunchpadState={App:"app",Home:"home"};a.prototype.createInspection=function(A,c,C,s){this.oShellModel.createInspection(A,c,C,s);};a.prototype.createTriggers=function(t,c,s){this.oShellModel.createTriggers(t,c,s);};a.prototype.convertButtonsToActions=function(i,c,s,I){var p={},b,t=this;i.forEach(function(d){b=sap.ui.getCore().byId(d);p.id=b.getId();p.text=b.getText();p.icon=b.getIcon();p.tooltip=b.getTooltip();p.enabled=b.getEnabled();p.visible=b.getVisible();if(b.mEventRegistry&&b.mEventRegistry.press){p.press=b.mEventRegistry.press[0].fFunction;}b.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,c,s,I);});};a.prototype.createItem=function(c,C,s,f){var i;if(c&&c.id){i=sap.ui.getCore().byId(c.id);}if(!i){i=f(c);if(C){this.oShellModel.addElementToManagedQueue(i);}}return i;};a.prototype.addEntryInShellStates=function(n,e,A,f,s){this.oShellModel.addEntryInShellStates(n,e,A,f,s);};a.prototype.removeCustomItems=function(s,i,c,S){if(typeof i==="string"){this.oShellModel.removeCustomItems(s,[i],c,S);}else{this.oShellModel.removeCustomItems(s,i,c,S);}};a.prototype.addCustomItems=function(s,i,c,S){if(typeof i==="string"){this.oShellModel.addCustomItems(s,[i],c,S);}else{this.oShellModel.addCustomItems(s,i,c,S);}};a.prototype.logRecentActivity=function(o){if(!o.appType){o.appType="App";}if(!o.appId){o.appId=o.url;}return this.shellCtrl._logRecentActivity(o);};return a;});sap.ui.predefine('sap/ushell/renderers/fiori2/RendererExtensions',function(){"use strict";function _(C){a("rendererLoaded",{rendererName:"fiori2"});}function a(E,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",E,D);},0);}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;function b(I,L,x){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[L,x]);}function c(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[L,x]);}function d(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[L,x]);}function e(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[L,x]);}function f(B,L,x){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[L,x]);}function g(B,L,x){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[L,x]);}function h(C,L,x){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[L,x]);}function i(L,x){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[L,x]);}function j(I,L,x){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[L,x]);}function k(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[L,x]);}function l(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[L,x]);}function m(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[L,x]);}function n(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}function o(I,L,T,x){var y=sap.ui.getCore().byId(I);if(x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(y.getId(),T,[L]);}}function p(C,S){sap.ushell.Container.getRenderer("fiori2").addEndUserFeedbackCustomUI(C,S);}function q(x){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(x);}function r(T){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(T);}function s(L,V){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(L,V);}function t(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}function u(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}function v(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}var w=new R();return w;},true);sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.controller',['sap/ushell/ui5service/ShellUIService','sap/ui/core/IconPool','sap/ushell/CanvasShapesManager','./AccessKeysHandler','./History','./Lifecycle','sap/ushell/components/applicationIntegration/AppLifeCycle','sap/ushell/services/AppConfiguration','sap/ushell/services/AppType','sap/ushell/services/Message','sap/ushell/services/ShellNavigation','sap/ushell/ui/launchpad/Fiori2LoadingDialog','sap/ushell/utils','sap/ushell/components/container/ApplicationContainer'],function(S,I,C,A,H,L,a,b,c,M,d,F,u,f){"use strict";var g=true,h=true,p=false,B=false,s,m,n={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},o={},j,k=['minimal','app','standalone','embedded','headerless','merged','home','blank'];sap.ui.controller("sap.ushell.renderers.fiori2.Shell",{onInit:function(){h=true;B=false;g=true;var e=window.matchMedia("(min-width: 600px)"),i;var o=(this.getView().getViewData()?this.getView().getViewData().config:{})||{};this.oStatefulApplicationContainer=this._parseStatefulContainerConfiguration(o.statefulApplicationContainer);this.bMeAreaSelected=false;this.oEndUserFeedbackConfiguration={showAnonymous:true,anonymousByDefault:true,showLegalAgreement:true,showCustomUIContent:true,feedbackDialogTitle:true,textAreaPlaceholder:true,customUIContent:undefined};this.bMeAreaLoaded=false;this.bNotificationsSelected=false;o["enableBackGroundShapes"]=o.enableBackGroundShapes===undefined?true:o.enableBackGroundShapes;j=this._historyBackNavigation;this.initShellModel(o);i=function(q){m.setProperty('/isPhoneWidth',!q.matches);};if(e.addListener){e.addListener(i);i(e);}this.getView().setModel(m);this.getView().setModel(sap.ushell.resources.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);this._setConfigurationToModel();if(o.moveEditHomePageActionToShellHeader){sap.ui.getCore().getEventBus().subscribe("showCatalog",this._hideEditButton,this);}sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this._loadCoreExt,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this.setBackGroundShapes,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","coreResourcesFullyLoaded",this._postCoreExtActivities,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this.delayedCloseLoadingScreen,this);sap.ui.getCore().getEventBus().subscribe("launchpad","toggleContentDensity",this.toggleContentDensity,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this._loadCoreExtNonUI5,this);sap.ui.getCore().getEventBus().subscribe("launchpad","appClosed",this.logApplicationUsage,this);sap.ui.getCore().getEventBus().subscribe("launchpad","shellFloatingContainerDockedIsResize",this._onResizeWithDocking,this);sap.ui.getCore().getEventBus().subscribe("launchpad","launchpadCustomRouterRouteMatched",this._centerViewPort,this);sap.ushell.Container.getService("AppLifeCycle");s.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);this.history=new H();this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");this.oNotificationsCountButton=sap.ui.getCore().byId("NotificationsCountButton");this.oFiori2LoadingDialog=sap.ui.getCore().byId("Fiori2LoadingDialog");this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this._handleEmptyHash,this));this.oShellNavigation.init(jQuery.proxy(this.doHashChange,this));this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this.handleDataLoss,this));sap.ushell.Container.getService("Message").init(jQuery.proxy(this.doShowMessage,this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());this.bContactSupportEnabled=sap.ushell.Container.getService("SupportTicket").isEnabled();A.init(m);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()){if(!sap.ushell.resources.browserI18n){sap.ushell.resources.browserI18n=sap.ushell.resources.getTranslationModel(window.navigator.language).getResourceBundle();}return sap.ushell.resources.browserI18n.getText("dataLossExternalMessage");}};if(m.getProperty("/contentDensity")){this._applyContentDensityClass();}sap.ui.Device.media.attachHandler(this.onScreenSizeChange.bind(this),null,sap.ui.Device.media.RANGESETS.SAP_STANDARD);this.onScreenSizeChange(sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD));this.initShellUIService();if(this.getView().oShellNavigationMenu){this.getView().oShellNavigationMenu.setModel(m);}sap.ui.getCore().attachThemeChanged(this.redrawBackGroundShapes);if(o.sessionTimeoutIntervalInMinutes){var l=20000,t=this;setTimeout(function(){t._createSessionHandler(o);},l);}},_parseStatefulContainerConfiguration:function(e){var i={};if(!e){return i;}var l={"GUI":true};Object.keys(e).filter(function(q){return true===e[q]&&l[q];}).map(function(U){var q=U;if(q==="GUI"){q="TR";}return q;}).forEach(function(q){i[q]=null;});return i;},initShellModel:function(o){s=a;s.init(o);m=s.getModel();},redrawBackGroundShapes:function(){if(o.enableBackGroundShapes){C.drawShapes();}},setBackGroundShapes:function(){var v=this.getView(),m=v.getModel(),e=m.getProperty('/animationMode')!=='minimal';if(!B&&o.enableBackGroundShapes){B=true;C.drawShapes();C.enableAnimationDrawing(e);}},initShellUIService:function(){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService._attachHierarchyChanged(this.onHierarchyChange.bind(this));this.oShellUIService._attachTitleChanged(this.onTitleChange.bind(this));this.oShellUIService._attachRelatedAppsChanged(this.onRelatedAppsChange.bind(this));this.oShellUIService._attachBackNavigationChanged(this.onBackNavigationChange.bind(this));if(o.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(U){this.oUserStatus=new U({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oUserStatus.attachEnabledStatusChanged(function(e){this.getModel().setProperty("/userStatusEnabled",e.mParameters.data);}.bind(this));this.oUserStatus.attachStatusChanged(function(e){this.getModel().setProperty("/userStatus",e.mParameters.data);if(e.mParameters.data==null){this.getModel().setProperty("/userStatusUserEnabled",false);}else{this.getModel().setProperty("/userStatusUserEnabled",true);}}.bind(this));}.bind(this));}},onHierarchyChange:function(e){this.isHierarchyChanged=true;var i=e.getParameters().data,l,E=[],q;if(!i){i=[];}l=this.getHierarchyDefaultValue();i.forEach(function(r,t){E[t]=jQuery.extend({},r);});E=E.concat(l);q=m.getProperty("/currentState");if(q&&q.stateName==="home"){s.updateStateProperty("application/hierarchy",E,false,["home"]);}s.updateStateProperty("application/hierarchy",E,true);},onTitleChange:function(e){this.isTitleChanged=true;var t=e.getParameters().data,i;if(!t){t=this.getTitleDefaultValue();}i=m.getProperty("/currentState");if(i&&i.stateName==="home"){s.updateStateProperty("application/title",t,false,["home"]);}s.updateStateProperty("application/title",t,true);window.document.title=t;},onBackNavigationChange:function(e){this.isBackNavigationChanged=true;var i=e.getParameters().data,m=this.getModel(),l=m.getProperty('/currentState/');if(i){j=i;if(l.stateName==='minimal'||l.stateName==='standalone'||l.stateName==='embedded'){sap.ushell.Container.getRenderer('fiori2').showHeaderItem('backBtn',true);}}else{j=this._historyBackNavigation;}},onRelatedAppsChange:function(e){this.isRelatedAppsChanged=true;var r=e.getParameters().data,i;if(!r){r=[];}i=m.getProperty("/currentState");if(i&&i.stateName==="home"){s.updateStateProperty("application/relatedApps",r,false,["home"]);}s.updateStateProperty("application/relatedApps",r,true);},getHierarchyDefaultValue:function(){var e=[],i=m.getProperty("/currentState");if(i&&(i.stateName==="app"||i.stateName==="embedded")){e=[{icon:"sap-icon://home",title:sap.ushell.resources.i18n.getText("actionHomePage"),intent:o.rootIntent?"#"+o.rootIntent:"#"}];}return e;},getTitleDefaultValue:function(){var t="",e=b.getMetadata();if(e&&e.title){t=e.title;}return t;},getAppIcon:function(){var i="sap-icon://folder",e=b.getMetadata();if(e&&e.icon){i=e.icon;}return i;},_isCompactContentDensityByDevice:function(){var i;if(!sap.ui.Device.support.touch||sap.ui.Device.system.combi){i=true;}else{i=false;}return i;},_applyContentDensityByPriority:function(i){if(i===undefined){if(sap.ui.Device.system.combi){var e=sap.ushell.Container.getService("UserInfo"),U=e.getUser(),l="autoDetect";if(U){l=U.getContentDensity();}switch(l){case"cozy":i=false;break;case"compact":i=true;break;default:var q=b.getMetadata();if(q.compactContentDensity&&!q.cozyContentDensity){i=true;}else{i=false;}}}else{var q=b.getMetadata();if(q.compactContentDensity&&!q.cozyContentDensity){i=true;}else{if(!q.compactContentDensity&&q.cozyContentDensity){i=false;}else{i=this._isCompactContentDensityByDevice();}}}}this._applyContentDensityClass(i);},_applyContentDensityClass:function(i){if(i===undefined){var e=sap.ushell.Container.getService("UserInfo"),U=e.getUser?e.getUser():undefined;if(U&&U.getContentDensity()==='cozy'){i=false;}else{i=this._isCompactContentDensityByDevice();}}if(i){jQuery('body').removeClass('sapUiSizeCozy');jQuery('body').addClass('sapUiSizeCompact');}else{jQuery('body').removeClass('sapUiSizeCompact');jQuery('body').addClass('sapUiSizeCozy');}},toggleContentDensity:function(e,E,D){var i=D.contentDensity==="compact";this._applyContentDensityByPriority(i);},loadMeAreaView:function(){},_handleEmptyHash:function(e){e=(typeof e==="string")?e:"";e=e.split("?")[0];if(e.length===0){var v=this.getView()?this.getView().getViewData():{};o=v.config||{};if(o.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(o.rootIntent){setTimeout(function(){hasher.setHash(o.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var v=this.getView().getViewData(),e,i;if(v){o=v.config||{};}if(o){if(o.states){i=m.getProperty('/states');for(e in o.states){if(o.states.hasOwnProperty(e)){i[e]=o.states[e];}}m.setProperty('/states',i);}if(o.appState==="headerless"||o.appState==="merged"||o.appState==="blank"){m.setProperty("/personalization",false);o.enablePersonalization=false;}else if(o.enablePersonalization!==undefined){m.setProperty("/personalization",o.enablePersonalization);}if(o.changeEndUserFeedbackTitle!==undefined){this.oEndUserFeedbackConfiguration.feedbackDialogTitle=o.changeEndUserFeedbackTitle;}if(o.changeEndUserFeedbackPlaceholder!==undefined){this.oEndUserFeedbackConfiguration.textAreaPlaceholder=o.changeEndUserFeedbackPlaceholder;}if(o.showEndUserFeedbackAnonymousCheckbox!==undefined){this.oEndUserFeedbackConfiguration.showAnonymous=o.showEndUserFeedbackAnonymousCheckbox;}if(o.makeEndUserFeedbackAnonymousByDefault!==undefined){this.oEndUserFeedbackConfiguration.anonymousByDefault=o.makeEndUserFeedbackAnonymousByDefault;}if(o.showEndUserFeedbackLegalAgreement!==undefined){this.oEndUserFeedbackConfiguration.showLegalAgreement=o.showEndUserFeedbackLegalAgreement;}if(o.enableSetTheme!==undefined){m.setProperty("/setTheme",o.enableSetTheme);}m.setProperty("/contentDensity",o.enableContentDensity===undefined?true:o.enableContentDensity);if(o.title){m.setProperty("/title",o.title);}if(o.migrationConfig!==undefined){m.setProperty("/migrationConfig",o.migrationConfig);}if(o.enableUserDefaultParameters!==undefined){m.setProperty("/userDefaultParameters",o.enableUserDefaultParameters);}if(o.disableHomeAppCache!==undefined){m.setProperty("/disableHomeAppCache",o.disableHomeAppCache);}m.setProperty("/enableHelp",!!o.enableHelp);m.setProperty("/searchAvailable",(o.enableSearch!==false));m.bindProperty('/animationMode').attachChange(this.handleAnimationModeChange.bind(this));m.setProperty("/animationMode",o.animationMode);this._getPersonalizer({container:"flp.launchpad.animation.mode",item:"animationMode"}).getPersData().then(function(U){m.setProperty("/animationMode",U?U:o.animationMode);o.animationMode=U?U:o.animationMode;}.bind(this));var l=this._getTrackingUserActivies();l.done(function(q){if(q!==undefined){m.setProperty("/enableTrackingActivity",q);}else{m.setProperty("/enableTrackingActivity",true);}});s.updateStateProperty("headerHiding",false,false,["home","app"]);}},_getTrackingUserActivies:function(){'use strict';var e=this._getPersonalizer({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).getPersData();e.fail(function(i){jQuery.sap.log.error("Failed to load anchor bar state from the personalization",i,"sap.ushell.components.flp.settings.FlpSettings");});return e;},_hideEditButton:function(){var e=sap.ui.getCore().byId("ActionModeBtn");if(e){e.setVisible(false);}},_getPreviousPageDirty:function(){return p;},_setPreviousPageDirty:function(e){p=e;},getModelConfiguration:function(){var v=this.getView().getViewData(),e,i;if(v){e=v.config||{};i=jQuery.extend({},e);}delete i.applications;return i;},_getLogonFrameProvider:function(){var v=this.getView();return{create:function(){return v.createIFrameDialog();},show:function(){v.showIFrameDialog();},destroy:function(){v.destroyIFrameDialog();}};},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRendered",this._loadCoreExt,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this.setBackGroundShapes,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this.delayedCloseLoadingScreen,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","toggleContentDensity",this.toggleContentDensity,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",this._loadCoreExtNonUI5,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","appClosed",this.logApplicationUsage,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","coreResourcesFullyLoaded",this._postCoreExtActivities,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","launchpadCustomRouterRouteMatched",this._centerViewPort,this);sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("showCatalog",this._hideEditButton,this);sap.ui.Device.media.detachHandler(this.onScreenSizeChange.bind(this),null,sap.ui.Device.media.RANGESETS.SAP_STANDARD);this.oShellNavigation.hashChanger.destroy();this.getView().aDanglingControls.forEach(function(e){if(e.destroyContent){e.destroyContent();}e.destroy();});sap.ushell.UserActivityLog.deactivate();s.destroy();s=undefined;},handleAnimationModeChange:function(){var v=this.getView(),m=v.getModel(),e=m.getProperty('/animationMode'),E=e!=='minimal';C.enableAnimationDrawing(E);sap.ui.getCore().getEventBus().publish("launchpad","animationModeChange",e);},getAnimationType:function(){return"show";},onCurtainClose:function(e){jQuery.sap.log.warning("Closing Curtain",e);},handleDataLoss:function(e,i){if(!h){h=true;this.closeLoadingScreen();return this.oShellNavigation.NavigationFilterStatus.Custom;}if(sap.ushell.Container.getDirtyFlag()){if(!sap.ushell.resources.browserI18n){sap.ushell.resources.browserI18n=sap.ushell.resources.getTranslationModel(window.navigator.language).getResourceBundle();}if(confirm(sap.ushell.resources.browserI18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);p=true;return this.oShellNavigation.NavigationFilterStatus.Continue;}h=false;window.history.back();return this.oShellNavigation.NavigationFilterStatus.Custom;}return this.oShellNavigation.NavigationFilterStatus.Continue;},doShowMessage:function(t,i,P){sap.ui.require(["sap/m/MessageToast","sap/m/MessageBox"],function(l,q){if(t===M.Type.ERROR){if(sap.ushell.Container&&sap.ushell.Container.getService("SupportTicket").isEnabled()&&i!==sap.ushell.resources.i18n.getText("supportTicketCreationFailed")){sap.ui.require(["sap/ushell/ui/launchpad/EmbeddedSupportErrorMessage"],function(E){try{var r=new E("EmbeddedSupportErrorMessage",{title:P.title||sap.ushell.resources.i18n.getText("error"),content:new sap.m.Text({text:i})});r.open();}catch(e){q.show(i,q.Icon.ERROR,P.title||sap.ushell.resources.i18n.getText("error"));}});}else{q.show(i,q.Icon.ERROR,P.title||sap.ushell.resources.i18n.getText("error"));}}else if(t===M.Type.CONFIRM){if(P.actions){q.show(i,q.Icon.QUESTION,P.title,P.actions,P.callback);}else{q.confirm(i,P.callback,P.title);}}else{l.show(i,{duration:P.duration||3000});}});},_isColdStart:function(){if(this.history.getHistoryLength()<=1){return true;}this._isColdStart=function(){return false;};return false;},_setEnableHashChange:function(v){h=v;},_logRecentActivity:function(r){if(this._getConfig().enableRecentActivity&&sap.ushell.components.applicationIntegration.AppLifeCycle.getModel().getProperty("/enableTrackingActivity")){setTimeout(function(){if(sap.ushell.Container){b.addActivity(r);}},700);}},_logOpenAppAction:function(e){if(o&&o.enableTilesOpacity&&o.enableRecentActivity&&sap.ushell.components.applicationIntegration.AppLifeCycle.getModel().getProperty("/enableTrackingActivity")){setTimeout(function(){if(sap.ushell.Container){var U=sap.ushell.Container.getService("UserRecents");U.addAppUsage(e);}},700);}},_applicationIsStatefulType:function(e){return this.oStatefulApplicationContainer.hasOwnProperty(e);},_getStatefulContainer:function(e){return this.oStatefulApplicationContainer[e];},_setStatefulContainer:function(e,i){return this.oStatefulApplicationContainer[e]=i;},_statefulContainerForTypeExists:function(e){return!!this._getStatefulContainer(e);},doHashChange:function(e,i,O,l,P){jQuery.sap.measure.start("FLP:ShellController.doHashChange","doHashChange","FLP");u.addTime("ShellControllerHashChange");return this._doHashChange(this,e,i,O,l,P).then(function(){jQuery.sap.measure.end("FLP:ShellController.doHashChange");},function(E){jQuery.sap.measure.end("FLP:ShellController.doHashChange");});},_doHashChange:function(e,i,l,O,q,P){var r,t;e.lastApplicationFullHash=q?O+q:O;if(!h){h=true;e.closeLoadingScreen();return jQuery.when();}if(P){e.hashChangeFailure(e.history.getHistoryLength(),P.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return jQuery.when();}if(sap.m.InstanceManager&&g){sap.m.InstanceManager.closeAllDialogs();sap.m.InstanceManager.closeAllPopovers();}g=true;e.openLoadingScreen();if(u.getParameterValueBoolean("sap-ushell-no-ls")){e.closeLoadingScreen();}r=e.history.getHistoryLength();t=e.fixShellHash(i);e.history.hashChange(t,O);e.currentAppBeforeNav=b.getCurrentApplication();jQuery.sap.flpmeasure.end(0,"Creating Shell");jQuery.sap.flpmeasure.start(0,"targetResolution",1);return e._resolveHashFragment(t).then(function(R,v){jQuery.sap.flpmeasure.end(0,"targetResolution");jQuery.sap.flpmeasure.start(0,"CreateComponent",3);var w=v?v.semanticObject+"-"+v.action:"",o=e._getConfig(),T,x=R&&R.ui5ComponentName,y=!!x,z=!!(R&&R.componentHandle);R=e._calculateNavigationMode(v,R);if(R&&(R.navigationMode===n.newWindow||u.isNativeWebGuiNavigation(R))){if(o&&o.enableRecentActivity){var D=b.getMetadata(R);var E={};E.title=D.title;E.appType=R.applicationType;E.url=t;E.appId=t;e._logRecentActivity(E);}e._openAppInNewWindowAndRestore(R);return;}if(e.getModel().getProperty("/migrationConfig")){o.migrationConfig=false;e.getModel().setProperty("/migrationConfig",false);if(R&&t==='#'){o.rootIntent="";}else if(t==='#'){setTimeout(function(){hasher.setHash(o.rootIntent);},0);return;}}if(z||!y){e._initiateApplication(R,t,v,r);return;}if(o&&o.applications&&o.applications[w]){R.applicationConfiguration=o.applications[w];}T=e._getViewPortControlByIntent(w);if(e._isShellHomeIntent(w)&&T){e._initiateApplication(R,t,v,r);return;}if(e._applicationIsStatefulType(R.applicationType)&&T){}if(T){e.oViewPortContainer.removeCenterViewPort(T.getId(),true);T.destroy();}b.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:x});jQuery.sap.measure.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(R,v,e._createWaitForRendererCreatedPromise()).done(function(G){jQuery.sap.measure.end("FLP:ShellController.UI5createComponent");jQuery.sap.flpmeasure.end(0,"CreateComponent");e._initiateApplication(R,t,v,r);}).fail(function(G){b.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(r,"Failed to load UI5 component for navigation intent "+t,G,"sap.ushell.renderers.fiori2.Shell.controller",false);});},function(v){var E;E="Failed to resolve navigation target: \""+t+"\""+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration"+" or by missing role assignment.";e.hashChangeFailure(r,E,v,"sap.ushell.renderers.fiori2.Shell.controller",false);});},_initiateApplication:function(r,e,P,O){jQuery.sap.measure.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var i=b.getMetadata(r);if(i.title){window.document.title=i.title;}else{jQuery.sap.log.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined");}if(this.bContactSupportEnabled){sap.ushell.UserActivityLog.activate();}this._logOpenAppAction(e);try{this.navigate(P,e,i,r);}catch(E){if(E.stack){jQuery.sap.log.error("Application initialization (Intent: \n"+e+"\n failed due to an Exception:\n"+E.stack);}this.hashChangeFailure(O,E.name,E.message,i?i.title:"",false);}finally{if(r&&r.coreResourcesFullyLoaded&&!this._pluginLoadingTriggered){this._loadRendererExtensionPlugins();}}jQuery.sap.measure.end("FLP:ShellController._initiateApplication");},_resolveHashFragment:function(e){jQuery.sap.measure.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var r,P,i=sap.ushell.Container.getService("URLParsing").parseShellHash(e),D=new jQuery.Deferred(),o=this._getConfig();P=i&&i.params||{};if(i&&i.contextRaw&&i.contextRaw==="navResCtx"&&P&&P.additionalInformation&&(P.additionalInformation[0]||P.additionalInformation[0]==="")&&P.applicationType&&P.applicationType[0]&&P.url&&P.url[0]&&P.navigationMode&&(P.navigationMode[0]||P.additionalInformation[0]==="")){P=i.params||{};r={additionalInformation:P.additionalInformation[0],applicationType:P.applicationType[0],url:P.url[0],navigationMode:P.navigationMode[0]};if(P.title){r.text=P.title[0];}D.resolve(r,i);}else{if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(l){D.resolve(l.resolvedHashFragment,i);delete window["sap-ushell-async-libs-promise-directstart"];},function(l){D.reject(l);delete window["sap-ushell-async-libs-promise-directstart"];});return D.promise();}sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(e).done(function(r){if(i&&(i.semanticObject+"-"+i.action)===o.rootIntent){r.navigationMode="embedded";}jQuery.sap.measure.end("FLP:ShellController._resolveHashFragment");D.resolve(r,i);}).fail(function(l){D.reject(l);});}return D.promise();},_calculateNavigationMode:function(P,r){if(!r){return undefined;}var N=r.navigationMode;if(N===n.newWindowThenEmbedded){if(this._isColdStart()||(P.contextRaw&&P.contextRaw==="navResCtx")||this.history.backwards){r.navigationMode=n.embedded;}else{r.navigationMode=n.newWindow;if(!u.isNativeWebGuiNavigation(r)){r.url=this._getCurrentLocationHash();}}return r;}if(N===n.newWindow&&this._isColdStart()){r.navigationMode=n.replace;return r;}return r;},_usesNavigationRedirect:function(e){if(!e){return new jQuery.Deferred().reject().promise();}var t=this,i=e.getInstance({});if(i&&typeof i.navigationRedirect==="function"){var D=new jQuery.Deferred();var N=i.navigationRedirect();if(N&&typeof N.then==="function"){N.then(function(l){jQuery.sap.log.warning("Performing navigation redirect to hash "+l);i.destroy();t.history.pop();sap.ushell.Container.getService("ShellNavigation").toExternal({target:{shellHash:l}},undefined,false);D.resolve(true);},function(){D.reject();});return D.promise();}}return new jQuery.Deferred().reject().promise();},navigate:function(P,e,i,r){jQuery.sap.measure.start("FLP:ShellController.navigate","navigate","FLP");var N=(jQuery.isPlainObject(r)?r.navigationMode:null),t=this;if(N===null){if(this._isColdStart()){hasher.setHash("");return;}h=false;this.history.pop();this._windowHistoryBack(1);return;}r=this._calculateNavigationMode(P,r);N=(jQuery.isPlainObject(r)?r.navigationMode:null);if(N===n.embedded){var D=this._usesNavigationRedirect(r.componentHandle);D.then(null,function(){t._handleEmbeddedNavMode(e,P,i,r);if(P&&P.contextRaw==="navResCtx"){jQuery.sap.log.error(" This path will no longer be supported in 1.40");h=false;if(P&&P.params&&P.params.original_intent&&P.params.original_intent[0]){hasher.replaceHash(P.params.original_intent[0]);t.history._history[0]=P.params.original_intent[0];}}});jQuery.sap.measure.end("FLP:ShellController.navigate");return;}if(N===n.replace){h=false;this._changeWindowLocation(r.url);return;}if(N===n.newWindow){this._openAppInNewWindowAndRestore(r);return;}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);},_openAppInNewWindowAndRestore:function(r){h=false;if(u.isNativeWebGuiNavigation(r)){try{var U=u.appendUserIdToUrl("sap-user",r.url);var E=u.getPrivateEpcm();E.doNavigate(U);}catch(e){if(e.stack){jQuery.sap.log.error("Application initialization failed due to an Exception:\n"+e.stack);}this.hashChangeFailure(this.history.getHistoryLength(),e.name,e.message,r.text,false);}}else{this._openAppNewWindow(r.url);}this.history.pop();var v=r.componentHandle&&r.componentHandle.getInstance&&r.componentHandle.getInstance({});if(v){v.destroy();}this._windowHistoryBack(1);b.setCurrentApplication(this.currentAppBeforeNav);return;},_handleEmbeddedNavMode:function(e,P,i,r){jQuery.sap.measure.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var l,q,t,v,w,R;this.resetShellUIServiceHandlers();this.setAppIcons(i);l='-'+P.semanticObject+'-'+P.action;t=(r.applicationType==="NWBC"||r.applicationType==="TR");v=e==="#"||(o.rootIntent&&o.rootIntent===P.semanticObject+"-"+P.action);if(v&&!o.disableHomeAppCache){this._saveHomePageComponent();}w=P?P.semanticObject+"-"+P.action:"";if(t&&!r.explicitNavMode){if(r.applicationType==="NWBC"&&o.appState&&o.appState==="headerless"){this.switchViewState("headerless");}else{this.switchViewState("minimal");}}else if(v){this.switchViewState("home");this.oShellUIService.setBackNavigation();}else{this.switchViewState("app");}q=this._getViewPortControlByIntent(w);R=this._statefulContainerForTypeExists(r.applicationType);if(!q){q=this.getWrappedApplicationWithMoreStrictnessInIntention(w,i,r,l,r.fullWidth||i.fullWidth||t);}else if(w===o.rootIntent){this.closeLoadingScreen();}else if(!R){this.oViewPortContainer.removeCenterViewPort(q.getId(),true);q.destroy();q=this.getWrappedApplicationWithMoreStrictnessInIntention(w,i,r,l,r.fullWidth||i.fullWidth||t);}this.oViewPortContainer.navTo('centerViewPort',q.getId(),'show');this._centerViewPort();if(R){q.setNewApplicationContext(r.applicationType,r.url).then(function(){q.toggleStyleClass("hidden",false);jQuery.sap.log.info("New application context opened successfully in an existing transaction UI session.");},function(E){jQuery.sap.log.error(E&&E.message||E);});}this.closeLoadingScreen();if(this.currentAppBeforeNav){var x=this._getStatefulContainer(this.currentAppBeforeNav.applicationType);if(x){x.onApplicationOpened(r.applicationType)}}jQuery.sap.measure.end("FLP:ShellController._handleEmbeddedNavMode");},_centerViewPort:function(){this.oViewPortContainer.switchState("Center");},_getViewPortControlByIntent:function(i){return this.oViewPortContainer&&(this.oViewPortContainer.getViewPortControl('centerViewPort',"application"+'-'+i)||this.oViewPortContainer.getViewPortControl('centerViewPort',"applicationShellPage"+'-'+i));},_isShellHomeIntent:function(i){return i==="#"||i===o.rootIntent;},_getExistingAppAndDestroyIfNotRoot:function(i){var v;v=this._getViewPortControlByIntent(i);if(!v){return;}if(i===o.rootIntent){return v;}this.oViewPortContainer.removeCenterViewPort(v.getId(),true);v.destroy();return null;},getWrappedApplicationWithMoreStrictnessInIntention:function(i,e,r,l,q){var t,v=this;setTimeout(function(){setTimeout(function(){var w;if(m.getProperty("/currentState/stateName")==="app"){w="shellAppTitle";}A.sendFocusBackToShell(w);setTimeout(function(){v.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",r);jQuery.sap.log.info('app is being opened');},0);if(o.applications){r.applicationConfiguration=o.applications[i];}t=this._getAppContainer(l,r);r.sShellHash=i;this.publishNavigationStateEvents(t,r);t.addStyleClass('sapUshellApplicationPage');if(!q){t.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia('(min-width: 106.4rem)').matches){t.addStyleClass("sapUShellDockingContainer");t.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){t.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}t.toggleStyleClass('sapUshellDefaultBackground',!e.hideLightBackground);this._applyContentDensityByPriority();t.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};t.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};this.oViewPortContainer.addCenterViewPort(t);setTimeout(function(){v.closeLoadingScreen();},0);jQuery.sap.measure.end("FLP:ShellController.getWrappedApplication");return t;},getWrappedApplication:function(i,e,r,l,q){jQuery.sap.flpmeasure.end(0,"CreateComponent");jQuery.sap.measure.start("FLP:ShellController.getWrappedApplication","getWrappedApplication","FLP");var E,t,v=this;E=this._getExistingAppAndDestroyIfNotRoot(i,l);if(E){this.closeLoadingScreen();return E;}setTimeout(function(){setTimeout(function(){var w;if(m.getProperty("/currentState/stateName")==="app"){w="shellAppTitle";}A.sendFocusBackToShell(w);setTimeout(function(){v.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",r);jQuery.sap.log.info('app is being opened');},0);if(o.applications){r.applicationConfiguration=o.applications[i];}t=this._getAppContainer(l,r);r.sShellHash=i;this.publishNavigationStateEvents(t,r);t.addStyleClass('sapUshellApplicationPage');if(!q){t.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia('(min-width: 106.4rem)').matches){t.addStyleClass("sapUShellDockingContainer");t.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){t.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}t.toggleStyleClass('sapUshellDefaultBackground',!e.hideLightBackground);this._applyContentDensityByPriority();t.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};t.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};this.oViewPortContainer.addCenterViewPort(t);setTimeout(function(){v.closeLoadingScreen();},0);jQuery.sap.measure.end("FLP:ShellController.getWrappedApplication");return t;},resetShellUIServiceHandlers:function(){this.isHierarchyChanged=false;this.isTitleChanged=false;this.isRelatedAppsChanged=false;this.isBackNavigationChanged=false;},_publicEventDataFromResolutionResult:function(e){var P={};if(!e){return e;}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(i){P[i]=e[i];});Object.freeze(P);return P;},onAppAfterRendering:function(e){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appOpened",e);jQuery.sap.log.info('app was opened');},0);var i=this._publicEventDataFromResolutionResult(e);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",i);if(this.oShellUIService){if(!this.isHierarchyChanged){this.oShellUIService.setHierarchy();}if(!this.isTitleChanged){this.oShellUIService.setTitle();}if(!this.isRelatedAppsChanged){this.oShellUIService.setRelatedApps();}if(!this.isBackNavigationChanged){this.oShellUIService.setBackNavigation();}}s.updateStateProperty("application/icon",this.getAppIcon(),true);s.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_getAppContainer:function(e,r){var i;if(!this.oShellUIService){this.initShellUIService();}r.shellUIService=this.oShellUIService.getInterface();r.targetNavigationMode=this._isColdStart()?"explace":"inplace";if(this._applicationIsStatefulType(r.applicationType)){i=this._getStatefulContainer(r.applicationType);if(!i){i=new f("application"+e,r);this._setStatefulContainer(r.applicationType,i);i.setIsStateful(true);}}return i||new f("application"+e,r);},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var t=this,e="sap.ushell.components.container.ApplicationContainer",l=function(E,i,D){t.oHomeApp=D.component;sap.ui.getCore().getEventBus().unsubscribe(e,'componentCreated',l);};sap.ui.getCore().getEventBus().subscribe(e,'componentCreated',l);},hashChangeFailure:function(i,e,D,l,E){this.reportError(e,D,l);this.closeLoadingScreen();this.delayedMessageError(sap.ushell.resources.i18n.getText("fail_to_start_app_try_later"));g=false;if(i===0){hasher.setHash("");}else{if(jQuery.sap.getUriParameters().get("bFallbackToShellHome")){hasher.setHash("");}else{h=E;sap.ushell.Container.setDirtyFlag(p);this._windowHistoryBack(1);}}},reportError:function(e,D,i){jQuery.sap.log.error(e,D,i);},delayedMessageError:function(e){setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getService("Message").error(e);}},0);},fixShellHash:function(e){if(!e){e='#';}else if(e.charAt(0)!=='#'){e='#'+e;}return e;},publishNavigationStateEvents:function(e,i){var l,q=e.getId?e.getId():"",t=this;var r=b.getMetadata(),v=r.icon,T=r.title;e.addEventDelegate({onAfterRendering:this.onAppAfterRendering.bind(this,i)});l=e.exit;e.exit=function(){if(l){l.apply(this,arguments);}t._applyContentDensityByPriority();setTimeout(function(){var E=jQuery.extend(true,{},i);delete E.componentHandle;E["appId"]=q;E["usageIcon"]=v;E["usageTitle"]=T;sap.ui.getCore().getEventBus().publish("launchpad","appClosed",E);jQuery.sap.log.info('app was closed');},0);var P=t._publicEventDataFromResolutionResult(i);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",P);};},_openAppNewWindow:function(U){var e=window.open(U);if(!e){var i=sap.ushell.resources.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(i);}},_windowHistoryBack:function(i){window.history.back(i);},_changeWindowLocation:function(U){window.location.href=U;},setAppIcons:function(e){sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){jQuery.sap.measure.start("FLP:ShellController.setAppIcons","setAppIcons","FLP");var i=jQuery.sap.getModulePath("sap.ushell"),l=(e&&e.homeScreenIconPhone)||(i+'/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png'),q=(e&&e["homeScreenIconPhone@2"])||(i+'/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png'),r=(e&&e.homeScreenIconTablet)||(i+'/themes/base/img/launchicons/72_iPad_Desktop_Launch.png'),t=(e&&e["homeScreenIconTablet@2"])||(i+'/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png'),v=(e&&e.favIcon)||(this._getDefaultFavIcon(P)),w=this.getFavIconHref();if(sap.ui.Device.os.ios){jQuery.sap.setIcons({'phone':l,'phone@2':q,'tablet':r,'tablet@2':t,'favicon':v,'precomposed':false});}else if(w!==v){jQuery.sap.setIcons({'phone':'','phone@2':'','tablet':'','tablet@2':'','favicon':v,'precomposed':true});}jQuery.sap.measure.end("FLP:ShellController.setAppIcons");}.bind(this));},_getDefaultFavIcon:function(P){var e=P.get('sapUiShellFavicon');if(e){var i=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(e);if(i){e=i[1];}else if(e==="''"||e==="none"){e=null;}}if(!e){var l=jQuery.sap.getModulePath("sap.ushell");return l+'/themes/base/img/launchpad_favicon.ico';}return e;},handleEndItemsOverflow:function(P){var e=this.getModel().getProperty("/currentState/headEndItems");if(e.length===1||(e.length===2&&e.indexOf("NotificationsCountButton")!=-1)){return;}function r(){s.removeHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);var i=sap.ui.getCore().byId('headEndItemsOverflow');if(i){i.destroy();}}if(P.name==='Phone'||P.name==='Tablet'){if(e.indexOf("endItemsOverflowBtn")===-1){s.addHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);}else{r();s.addHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);}}else if(P.name==="Desktop"){if(P.showOverFlowBtn){if(e.indexOf("endItemsOverflowBtn")===-1){s.addHeaderEndItem(["endItemsOverflowBtn"],false,["home","app"]);}}else{r();}}},isHeadEndItemOverflow:function(){var e=this.getModel().getProperty("/currentState/headEndItems");if(e.indexOf("endItemsOverflowBtn")===-1){return false;}else{var i=sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD).name;var l=3;if(i==="Phone"){l=1;}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return e.length>l+1;}else{return e.length>l;}}},isHeadEndItemInOverflow:function(e){return e!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(e);},isHeadEndItemNotInOverflow:function(e){if(this.isHeadEndItemOverflow()){if(e==="NOTIFICATIONSCOUNTBUTTON"||e==="ENDITEMSOVERFLOWBTN"){return true;}else{var i=sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD).name;if(i==="Tablet"){if(e==="SF"||e==="FLOATINGCONTAINERBUTTON"){return true;}else{return false;}}else if(i==="Desktop"){if(e==="SF"||e==="FLOATINGCONTAINERBUTTON"||e==="COPILOTBTN"){return true;}else{return false;}}else if(i==="Phone"){return false;}else{return true;}}}else if(e==="ENDITEMSOVERFLOWBTN"){return false;}else{return true;}},pressEndItemsOverflow:function(e){if(!sap.ui.Device.system.desktop){var i=m.getProperty("/currentState").headerHiding;if(i){m.setProperty("/currentState/headerHiding",false);}}var P=sap.ui.getCore().byId('headEndItemsOverflow');function l(){if(P.isOpen()){P.close();}}var q;if(P){q=P.getContent()[0];}else{var r=new sap.ui.model.Filter('','EQ','a');r.fnTest=this.isHeadEndItemInOverflow.bind(this);q=new sap.ui.layout.VerticalLayout({content:{path:"/currentState/headEndItems",filters:[r],factory:function(t,v){var w=sap.ui.getCore().byId(v.getObject());w.detachPress(l);w.attachPress(l);return w;}}});P=new sap.m.Popover("headEndItemsOverflow",{placement:sap.m.PlacementType.Bottom,showHeader:false,showArrow:false,content:q}).addStyleClass("sapUshellPopupContainer");P.addStyleClass("sapMPopoverheadEndItemsOverflow");q.updateAggregation=this.getView().updateShellAggregation;P.setModel(m);this.getView().aDanglingControls.push(P);P.attachAfterClose(P,function(){if(!sap.ui.Device.system.desktop){if(i){m.setProperty("/currentState/headerHiding",i);}}});}if(P.isOpen()){P.close();}else{q.updateAggregation("content");P.openBy(e.getSource());}},getFavIconHref:function(){return jQuery('link').filter('[rel="shortcut icon"]').attr('href')||'';},externalSearchTriggered:function(e,E,D){m.setProperty("/searchTerm",D.searchTerm);D.query=D.searchTerm;},onAfterNavigate:function(e){this.closeLoadingScreen();var i="application"+"-"+o.rootIntent,l=e.getParameter("fromId"),q=e.getParameter("from");if(l&&((l!==i)||o.disableHomeAppCache)&&!this._applicationIsStatefulType(q.getApplicationType())){this.oViewPortContainer.removeCenterViewPort(l,true);q.destroy();}u.addTime("ShellController.onAfterNavigate");if(e.mParameters&&e.mParameters.toId===i){var r=sap.ui.getCore().byId("configBtn");if(r){r.focus();}if(this.oHomeApp&&this.oHomeApp.setInitialConfiguration){this.oHomeApp.setInitialConfiguration();}}},logApplicationUsage:function(e,N,i){if(o&&o.enableRecentActivity){var l=i.appId,q=l,r={};r.title=i.usageTitle;r.appType=c.APP;r.url='#'+this.lastApplicationFullHash;if(l.indexOf('-')>0){q=l.substr(l.indexOf('-')+1);}r.appId='#'+q;if(q==="Action-search"){r.appType=c.SEARCH;}this._logRecentActivity(r);}},openLoadingScreen:function(){jQuery.sap.measure.start("FLP:ShellController.openLoadingScreen","openLoadingScreen","FLP");if(this.oFiori2LoadingDialog){var e=m.getProperty('/animationMode');var e=e||'full';this.oFiori2LoadingDialog.openLoadingScreen(e);}jQuery.sap.measure.end("FLP:ShellController.openLoadingScreen");},closeLoadingScreen:function(){if(this.oFiori2LoadingDialog){this.oFiori2LoadingDialog.closeLoadingScreen();}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=sap.ushell.resources.i18n.getText("loadingComplete");setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML="";},0);}},delayedCloseLoadingScreen:function(){setTimeout(function(){this.closeLoadingScreen();}.bind(this),600);},togglePane:function(e){var i=e.getSource(),l=i.getSelected();sap.ui.getCore().getEventBus().publish("launchpad","togglePane",{currentContent:i.getModel().getProperty("/currentState/paneContent")});if(e.getParameter("id")==="categoriesBtn"){i.getModel().setProperty("/currentState/showCurtainPane",!l);}else{i.getModel().setProperty("/currentState/showPane",!l);}},_switchViewPortStateByControl:function(O,e){var i=false,v=this.oViewPortContainer;if(O&&O.setEnabled&&typeof O.setEnabled==="function"){i=true;}if(i){O.addStyleClass("sapUshellShellHeadItemOverrideDisableStyle");O.setEnabled(false);}function l(){O.setEnabled(true);O.removeStyleClass("sapUshellShellHeadItemOverrideDisableStyle");v.detachAfterSwitchStateAnimationFinished(l);}if(i){v.attachAfterSwitchStateAnimationFinished(l);}v.switchState(e);},onScreenSizeChange:function(P){this.validateShowLogo(P);this.handleNavMenuTitleVisibility(P);this._handleHomeAndBackButtonsVisibility(P);this.handleEndItemsOverflow(P);},_handleHomeAndBackButtonsVisibility:function(P){var m=a.getModel(),i=jQuery("#mainShell").width()<1024&&jQuery(".sapUshellContainerDocked").length>0,e=m.getProperty('/currentViewPortState')==='Center',l=sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD).name,q=sap.ui.getCore().byId("homeBtn"),r=sap.ui.getCore().byId("backBtn"),t=l==="Desktop",v=l!=="Phone"||e;if(i){if(q){t=false;}}if(q){q.setVisible(t);}if(r){r.setVisible(v);}},validateShowLogo:function(P){var e;var i=this.getModel().getProperty('/currentState/stateName');var l=i==='merged'||i==='headerless';if(P){e=P.name;}else{e=sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD).name;}var q=true;if(e==="Phone"&&!this.bMeAreaSelected||l){q=false;}s.updateStateProperty("showLogo",q,false,["home","app","blank","blank-home","minimal"],true);},handleNavMenuTitleVisibility:function(P){this.bNavMenuTitleVisible=false;if(P.name!=="Desktop"){this.bNavMenuTitleVisible=true;}s.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},navigateFromShellApplicationNavigationMenu:function(i){this.oViewPortContainer.switchState("Center");hasher.setHash(i);var e=sap.ui.getCore().byId("shellAppTitle");if(e){e.close();}},_loadCoreExtNonUI5:function(e,E,i){if(i&&(i.applicationType=="NWBC"||i.applicationType=="TR")){setTimeout(this._loadCoreExt.bind(this),2000);}},_postCoreExtActivities:function(){sap.ushell.Container.getService("UsageAnalytics").init(sap.ushell.resources.i18n.getText("usageAnalytics"),sap.ushell.resources.i18n.getText("i_agree"),sap.ushell.resources.i18n.getText("i_disagree"),sap.ushell.resources.i18n.getText("remind_me_later"));try{sap.ushell.Container.getService("EndUserFeedback").isEnabled().done(function(){m.setProperty('/showEndUserFeedback',true);}).fail(function(){m.setProperty('/showEndUserFeedback',false);});}catch(e){jQuery.sap.log.error("EndUserFeedback adapter is not found",e.message||e);m.setProperty('/showEndUserFeedback',false);}this.getView().createPostCoreExtControls();},_loadRendererExtensionPlugins:function(){var v=this.getView()?this.getView().getViewData():{},o=v.config||{},D=jQuery.sap.getUriParameters().get("sap-ushell-xx-pluginmode")==="delayed",t=this;if(!this._pluginLoadingTriggered){this._pluginLoadingTriggered=true;if(!sap.ushell.Container.getService("PluginManager").getRegisteredPlugins().RendererExtensions.init){sap.ushell.Container.getService("PluginManager").registerPlugins({init:{component:"sap.ushell.components.shell.defaults",url:jQuery.sap.getResourcePath("sap/ushell/components/shell/defaults")}});}jQuery.sap.log.info("Triggering load of 'RendererExtension' plug-ins after loading core-ext module (after home page content rendered)",null,"sap.ushell.renderers.fiori2.Shell");if(!o.inHeaderLessOpt){if(D){setTimeout(function(){sap.ushell.Container.getService("PluginManager").loadPlugins("RendererExtensions").always(function(){t._publishCoreExtLoadedEvent();});},5000);}else{sap.ushell.Container.getService("PluginManager").loadPlugins("RendererExtensions").always(function(){t._publishCoreExtLoadedEvent();});}}else{this._publishCoreExtLoadedEvent();}}},_loadCoreExt:function(){jQuery.sap.measure.end("FLP:Container.InitLoading");var e=window['sap-ui-debug']?['sap/fiori/core-ext-light-dbg.js']:['sap/fiori/core-ext-light-0.js','sap/fiori/core-ext-light-1.js','sap/fiori/core-ext-light-2.js','sap/fiori/core-ext-light-3.js'],t=this,P=[];e.forEach(function(i){P.push(jQuery.sap._loadJSResourceAsync(i));});Promise.all(P).then(function(){t._loadRendererExtensionPlugins();}).catch(function(){t._loadRendererExtensionPlugins();jQuery.sap.log.warning('failed to load sap.fiori.core-ext-light');});},_publishCoreExtLoadedEvent:function(){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","coreExtLoaded");},0);setTimeout(function(){sap.ui.getCore().getEventBus().publish("shell","FLP-FMP");},5000);},getCurrentViewportState:function(){var v=m.getProperty('/currentViewPortState');return v;},makeEndUserFeedbackAnonymousByDefault:function(e){this.oEndUserFeedbackConfiguration.anonymousByDefault=e;},showEndUserFeedbackLegalAgreement:function(e){this.oEndUserFeedbackConfiguration.showLegalAgreement=e;},_activateFloatingUIActions:function(w){if(w<417){this.oFloatingUIActions.disable();}else{this.oFloatingUIActions.enable();}},setFloatingContainerDragSelector:function(e){jQuery(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(U){if(!this.oFloatingUIActions){this.oFloatingUIActions=new sap.ushell.UIActions({containerSelector:".sapUiBody",wrapperSelector:'.sapUshellShellFloatingContainerWrapper',draggableSelector:'.sapUshellShellFloatingContainerWrapper',rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1000,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:jQuery.sap.debug()});}else{this.oFloatingUIActions.elementsToCapture=jQuery(e);}this._activateFloatingUIActions(jQuery(window).width());var t;jQuery(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._activateFloatingUIActions(jQuery(window).width()),300);}.bind(this));}.bind(this));},_doDock:function(e){jQuery.sap.measure.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var D=sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD);if(D.name=="Desktop"){var w=jQuery(window).width();if(e){e.docked={};var i=e.docked;if(e.moveX>=w-64){i.dockPos="right";i.setIsDockingAreaOpen=true;this._openDockingArea(e);}else if(e.moveX<64){i.dockPos="left";i.setIsDockingAreaOpen=true;this._openDockingArea(e);}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e);}if(jQuery("#canvas").hasClass('sapUshellContainerDocked')){this._handleCloseCanvas(e);}}}}jQuery.sap.measure.end("FLP:Shell.controller._doDock");},_finishDoDock:function(D){this._openDockingArea(false);var e=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");e.put("lastState","docked:"+D.dockPos);this._handleOpenCanvas(D);var w=jQuery('#sapUshellFloatingContainerWrapper');w.css("height","100%");jQuery("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked",D.dockPos);if(jQuery(".sapUShellApplicationContainerLimitedWidth").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellApplicationContainerLimitedWidth");jQuery('#application-Action-toappnavsample').addClass("sapUShellDockingContainer");}},_onResizeWithDocking:function(){this.onScreenSizeChange(sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD));setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking");},300);},_onDragStartUI:function(e){jQuery.sap.measure.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var i=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","floating");jQuery("#sapUshellFloatingContainerWrapper").removeClass('sapUshellContainerDocked');$(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");jQuery("#sapUshellFloatingContainerWrapper").addClass('sapUshellContainerDockedMinimizeCoPilot');jQuery(jQuery(".sapUshellContainerDockedMinimizeCoPilot")).on('webkitAnimationEnd oanimationend msAnimationEnd animationend',this._handleAnimations(false));this._handleCloseCanvas(e);}jQuery.sap.measure.end("FLP:Shell.controller._onDragStartUI");},_handleAnimations:function(i,D){var e=jQuery('#canvas');var w=jQuery('#sapUshellFloatingContainerWrapper');if(i){e.addClass("sapUshellContainerDockedLaunchpadTranisation");if(e.hasClass('sapUshellContainer-Narrow-Right')||D=="right"){jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("closeRight",true);}else{jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("closeLeft",true);}w.addClass(" sapUshellContainerDockedExtendCoPilot");setTimeout(function(){if(e.hasClass('sapUshellContainer-Narrow-Right')||D=="right"){jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("closeRight",false);jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("openRight",true);}else if(e.hasClass('sapUshellContainer-Narrow-Left')||D=="left"){jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("closeLeft",false);jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("openLeft",true);}},300);this._onResizeWithDocking();}else{jQuery("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot");if(e.hasClass('sapUshellContainer-Narrow-Right')||D=="right"){jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("openRight",false);}else{jQuery(".sapUshellContainerDockedLaunchpadTranisation").toggleClass("openLeft",false);}setTimeout(function(){e.removeClass("sapUshellContainerDockedLaunchpadTranisation  closeLeft  openLeft closeRight openRight")},550);}var l=sap.ui.getCore().byId('shell-header');l._handleResizeChange();},_openDockingArea:function(e){var D=e?e.docked:false;var i=D?D.setIsDockingAreaOpen:false;if(i&&jQuery("#DockinaAreaDiv").length==0){var l=sap.ui.getCore().getConfiguration().getRTL();if((D.dockPos==="right"&&e.clone&&!l)||(D.dockPos==="left"&&e.clone&&l)){jQuery('<div id="DockinaAreaDiv"  class="sapUshellShellDisplayDockingAreaRight">').appendTo(e.clone.parentElement);}else if((D.dockPos==="left"&&e.clone&&!l)||(D.dockPos==="right"&&e.clone&&l)){jQuery('<div id="DockinaAreaDiv"  class="sapUshellShellDisplayDockingAreaLeft">').appendTo(e.clone.parentElement);}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=D.dockPos;}else if(!i){this._closeDockingArea();}},_closeDockingArea:function(e){setTimeout(function(){jQuery('.sapUshellShellDisplayDockingAreaRight').remove();jQuery('.sapUshellShellDisplayDockingAreaLeft').remove();},150);var i=sap.ui.getCore().byId('shell-header');if(i){i._handleResizeChange();}},_isDock:function(){return(jQuery('.sapUshellContainerDocked').size()!=0);},_isDockingAreaOpen:function(){return(jQuery('.sapUshellShellDisplayDockingAreaRight').size()!=0||jQuery('.sapUshellShellDisplayDockingAreaLeft').size()!=0);},_handleOpenCanvas:function(D){var e=jQuery('#canvas');var w=jQuery('#sapUshellFloatingContainerWrapper');var i=sap.ui.getCore().getConfiguration().getRTL();if((D.dockPos==="right"&&!i)||(D.dockPos==="left"&&i)){e.addClass('sapUshellContainer-Narrow-Right sapUshellContainerDocked ');}if((D.dockPos==="left"&&!i)||(D.dockPos==="right"&&i)){e.addClass('sapUshellContainer-Narrow-Left sapUshellContainerDocked ');}var v=sap.ui.getCore().byId("viewPortContainer");if(v){v._handleSizeChange();}},_handleCloseCanvas:function(e){var i=jQuery('#canvas');if(e){e.docked.setIsDockingAreaOpen=false;}if(i.hasClass('sapUshellContainer-Narrow-Right')){i.removeClass('sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight');this._openDockingArea(e);this._setFloatingContainerHeight();}if(i.hasClass('sapUshellContainer-Narrow-Left')){i.removeClass('sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft');this._openDockingArea(e);this._setFloatingContainerHeight();}if(jQuery(".sapUShellDockingContainer").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellDockingContainer");jQuery('#application-Action-toappnavsample').addClass("sapUShellApplicationContainerLimitedWidth");}this._onResizeWithDocking();var v=sap.ui.getCore().byId("viewPortContainer");if(v){v._handleSizeChange();}},_setFloatingContainerHeight:function(e){var w=jQuery(window).width();var W=jQuery('#sapUshellFloatingContainerWrapper');if(this._isDock()){if(e&&(e.clientX>=w-64||e.clientX<64)){W.addClass(' sapUshellContainerDocked');W.addClass("sapUshellContainerDockedMinimizeCoPilot");jQuery(W).on('webkitAnimationEnd oanimationend msAnimationEnd animationend',this._handleAnimations(true));}}else if(!this._isDock()){jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");}},_handleFloatingContainerDrop:function(e,i,D){jQuery.sap.measure.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var l=i.firstChild?sap.ui.getCore().byId(i.firstChild.id):undefined,q=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),w=jQuery(window).width(),W=jQuery(window).height(),P=D.deltaX/w,r=D.deltaY/W,O=i.style.visibility,t=i.style.display,v=parseFloat(i.style.left.replace("%","")),x=parseFloat(i.style.top.replace("%",""));i.style.visibility='hidden';i.style.display='block';if(typeof(v)==='number'){P=v+100*D.deltaX/w;}if(typeof(x)==='number'){r=x+100*D.deltaY/W;}if(this._isDockingAreaOpen()){r=0;}i.setAttribute("style","left:"+P+"%;top:"+r+"%;position:absolute;");i.visibility=O;i.display=t;q.put("floatingContainerStyle",i.getAttribute("style"));if(l){l.handleDrop();if(!!D.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(D.clone.oDockedProp);}}jQuery.sap.measure.end("FLP:Shell.controller.handleFloatingContainerDrop");},_handleFloatingContainerUIStart:function(i,l){jQuery.sap.measure.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var q=l;q.style.display="none";if(window.getSelection){var r=window.getSelection();try{r.removeAllRanges();}catch(e){}}jQuery.sap.measure.end("FLP:Shell.controller._handleFloatingContainerUIStart");},getFloatingContainerState:function(){var e=jQuery.sap.storage(jQuery.sap.storage.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var l="floating";if(e!=null){l=e.get("lastState");if(l==null){l="floating";}}return l;},setFloatingContainerVisibility:function(v){var l=this.getFloatingContainerState();if(l){if(l=="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}else if(l.indexOf("docked")!=-1){if(v==true){var D=sap.ui.Device.media.getCurrentRange(sap.ui.Device.media.RANGESETS.SAP_STANDARD);if(D.name=="Desktop"){var w=jQuery('#sapUshellFloatingContainerWrapper');w.addClass("sapUshellContainerDocked");jQuery("#canvas").addClass("sapUshellContainerDocked");w.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}if(sap.ui.getCore().getConfiguration().getRTL()){if(l.indexOf("right")!=-1){jQuery("#canvas").addClass('sapUshellContainer-Narrow-Left');this._handleAnimations(true,"left");}else{jQuery("#canvas").addClass('sapUshellContainer-Narrow-Right');this._handleAnimations(true,"right");}}else{if(l.indexOf("right")!=-1){jQuery("#canvas").addClass('sapUshellContainer-Narrow-Right');this._handleAnimations(true,"right");}else{jQuery("#canvas").addClass('sapUshellContainer-Narrow-Left');this._handleAnimations(true,"left");}}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}.bind(this),400);}else{storage.put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}if(jQuery(".sapUShellApplicationContainerLimitedWidth").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellApplicationContainerLimitedWidth");jQuery('#application-Action-toappnavsample').addClass("sapUShellDockingContainer");}}else{if(sap.ui.getCore().getConfiguration().getRTL()){if(l.indexOf("right")!=-1){this._handleAnimations(false,"left");}else{this._handleAnimations(false,"right");}}else{if(l.indexOf("right")!=-1){this._handleAnimations(false,"right");}else{this._handleAnimations(false,"left");}}var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(v);}.bind(this),400);if(jQuery(".sapUShellDockingContainer").length>0){jQuery('#application-Action-toappnavsample').removeClass("sapUShellDockingContainer");jQuery('#application-Action-toappnavsample').addClass("sapUShellApplicationContainerLimitedWidth");}}jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible();},setFloatingContainerContent:function(P,i,e,l){s.setFloatingContainerContent(P,i,e,l);},getRightFloatingContainerVisibility:function(){var r=this.getView().getOUnifiedShell().getRightFloatingContainer(),R=r&&r.getVisible();return R;},setHeaderTitle:function(t,i){if(typeof t!=="string"){throw new Error("sTitle type is invalid");}this.getView().getOUnifiedShell().getHeader().setTitleControl(t,i);},addEndUserFeedbackCustomUI:function(e,i){if(e){this.oEndUserFeedbackConfiguration.customUIContent=e;}if(i===false){this.oEndUserFeedbackConfiguration.showCustomUIContent=i;}},setFooter:function(e){if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid");}if(this.getView().oShellPage.getFooter()!==null){jQuery.sap.log.warning("You can only set one footer. Replacing existing footer: "+this.getView().oShellPage.getFooter().getId()+", with the new footer: "+e.getId()+".");}this.getView().oShellPage.setFooter(e);},removeFooter:function(){if(this.getView().oShellPage.getFooter()===null){jQuery.sap.log.warning("There is no footer to remove.");return;}this.getView().oShellPage.setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}var i=sap.ui.getCore().byId('shell-header');i._handleResizeChange();}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},switchViewState:function(e,i){var l=e;if(e==='home'&&(o.appState==='embedded'||o.appState=='headerless'||o.appState=='merged'||o.appState=='blank')){l=o.appState+'-home';}else if(e==='app'&&k.indexOf(o.appState)>=0){l=o.appState;}var q=s.switchState(l,i);if(e==="searchResults"){m.setProperty("/lastSearchScreen",'');if(!hasher.getHash().indexOf("Action-search")===0){var r=sap.ui.getCore().getModel("searchModel");hasher.setHash("Action-search&/searchTerm="+r.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(r.getProperty("/uiFilter/dataSource").getJson()));}}this._handleHomeAndBackButtonsVisibility();sap.ui.getCore().getEventBus().publish("launchpad","shellViewStateChanged",q);},_createSessionHandler:function(o){var t=this;sap.ui.require(["sap/ushell/SessionHandler"],function(e){t.oSessionHandler=new e();t.oSessionHandler.init({oModel:t.getModel(),keepSessionAlivePopupText:o.keepSessionAlivePopupText,pageReloadPopupText:o.pageReloadPopupText,preloadLibrariesForRootIntent:o.preloadLibrariesForRootIntent,sessionTimeoutReminderInMinutes:o.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:o.sessionTimeoutIntervalInMinutes,enableAutomaticSignout:o.enableAutomaticSignout});});},_getSessionHandler:function(){return this.oSessionHandler;},_navBack:function(){this.bMeAreaSelected=false;j();},_historyBackNavigation:function(){window.history.back();},_updateUserPrefModel:function(e){var i=this._getModelEntryFromEntryObject(e),l=m.getProperty("/userPreferences/entries");l.push(i);l=this._reorderUserPrefEntries(l);m.setProperty("/userPreferences/entries",l);},_updateProfilingModel:function(e){var i=this._getModelEntryFromEntryObject(e),l=m.getProperty("/userPreferences/profiling")||[];l.push(i);m.setProperty("/userPreferences/profiling",l);},_getModelEntryFromEntryObject:function(e){return{"entryHelpID":e.entryHelpID,"title":e.title,"editable":e.content?true:false,"valueArgument":e.value,"valueResult":null,"onSave":e.onSave,"onCancel":e.onCancel,"contentFunc":e.content,"contentResult":null,"icon":e.icon};},_reorderUserPrefEntries:function(e){var l,t;for(var i=0;i<e.length;i++){if(e[i].entryHelpID==="flpSettingsEntry"){l=i;}else if(e[i].entryHelpID==="themes"){t=i;}if(l!=undefined&&t!=undefined){var q=e.splice(l,1);e.splice(t+1,0,q[0]);break;}}return e;},onAfterViewPortSwitchState:function(e){var t=e.getParameter("to");var i=sap.ui.getCore().byId("shellAppTitle");m.setProperty("/currentViewPortState",t);if(this.applicationKeyHandler){A.registerAppKeysHandler(this.applicationKeyHandler);this.applicationKeyHandler=undefined;}sap.ui.getCore().getEventBus().publish("launchpad","afterSwitchState",e);if(t==="Center"){i.setVisible(true);this.bMeAreaSelected=false;}else{i.setVisible(false);if(t==="Right"){this.bMeAreaSelected=false;}else if(t=="RightCenter"){this.applicationKeyHandler=A.getAppKeysHandler();A.bFocusOnShell=false;if(sap.ui.getCore().byId("notificationsView")){A.registerAppKeysHandler(sap.ui.getCore().byId("notificationsView").getController().keydownHandler.bind(sap.ui.getCore().byId("notificationsView")));}}}this.validateShowLogo();this._handleHomeAndBackButtonsVisibility();},getModel:function(){return m;},_getConfig:function(){return o?o:{};},_createWaitForRendererCreatedPromise:function(){var P,r;r=sap.ushell.Container.getRenderer();if(r){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}else{P=new Promise(function(e,i){var O;O=function(){jQuery.sap.log.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(O);};r=sap.ushell.Container.getRenderer();if(r){jQuery.sap.log.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e();}else{sap.ushell.Container.attachRendererCreatedEvent(O);}});return[P];}},_getPersonalizer:function(P){var e=sap.ushell.Container.getService("Personalization");var i=sap.ui.core.Component.getOwnerComponentFor(this.getView());var l={keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true};return e.getPersonalizer(P,l,i);},_getCurrentLocationHash:function(){return window.location.hash;}});},false);sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.view',['sap/ushell/UserActivityLog','./Navigation','sap/ushell/ui/launchpad/ActionItem','sap/ushell/ui/launchpad/Fiori2LoadingDialog','sap/ushell/ui/launchpad/ViewPortContainer','sap/ushell/ui/shell/RightFloatingContainer','sap/ushell/ui/shell/ShellLayout'],function(U,N,A,F,V,R,S){"use strict";function s(i,c){return sap.ui.getCore().byId(c.getObject());}sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(c){this.oShellAppTitleStateEnum={SHELL_NAV_MENU_ONLY:0,ALL_MY_APPS_ONLY:1,SHELL_NAV_MENU:2,ALL_MY_APPS:3};var t=this,v=this.getViewData()||{},C=v.config||{},b=(C.appState==="embedded")?true:false,f=new F({id:"Fiori2LoadingDialog",text:""}),o=new sap.ushell.ui.shell.ShellHeadItem({id:"configBtn",tooltip:"{i18n>showGrpsBtn_tooltip}",ariaLabel:"{i18n>showGrpsBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("menu2"),selected:{path:"/currentState/showPane"},press:[c.togglePane,c]}),B=sap.ui.getCore().getConfiguration().getRTL()?"feeder-arrow":"nav-back",h=new sap.ushell.ui.shell.ShellHeadItem({id:"homeBtn",tooltip:"{i18n>homeBtn_tooltip}",ariaLabel:"{i18n>homeBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("home"),target:C.rootIntent?"#"+C.rootIntent:"#"}),a=new sap.ushell.ui.shell.ShellHeadItem({id:"backBtn",tooltip:"{i18n>backBtn_tooltip}",ariaLabel:"{i18n>backBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI(B),press:c._navBack.bind(c)}),d,n,m;this._allowUpToThreeActionInShellHeader(C);a.setShowSeparator(false);h.setShowSeparator(false);h.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-disabled",value:"false",writeToDom:true}));h.addEventDelegate({onsapskipback:function(i){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}},onsapskipforward:function(i){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});o.addEventDelegate({onsapskipforward:function(i){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}},onfocusin:function(){sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=true;sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusPassedToExternalHandlerFirstTime=true;}});this.aDanglingControls=[];var e;d=this.initViewPortContainer(c);var g=jQuery.sap.getObject("services.Notifications.config.enabled",undefined,window["sap-ushell-config"]);if(g){n=new sap.ushell.ui.shell.ShellHeadItem({id:"NotificationsCountButton",icon:sap.ui.core.IconPool.getIconURI("ui-notifications"),visible:true,enabled:false}).addStyleClass("sapUshellPlaceHolders");n.setShowSeparator(false);this.aDanglingControls.push(n);}m=new sap.ushell.ui.shell.ShellHeadItem({id:"meAreaHeaderButton",icon:'{/userImage/personPlaceHolder}',visible:true,enabled:false}).addStyleClass("sapUshellPlaceHolders");m.setShowSeparator(false);this.aDanglingControls.push(m);if(C.enablePersonalization!==false){var j="openCatalogBtn";var k=sap.ushell.resources.i18n.getText("open_appFinderBtn");var l='sap-icon://sys-find';var p=function(){jQuery.sap.measure.start("FLP:AppFinderLoadingStartToEnd","AppFinderLoadingStartToEnd","FLP");var i="Shell-home&/appFinder/catalog";if(this.data("isShellHeader")){var O=new RegExp("^"+i);if(O.test(hasher.getHash())){window.location.reload();return;}}setTimeout(function(){var P=sap.ushell.Container.getService("CrossApplicationNavigation");P.toExternal({target:{shellHash:"#"+i}});},!!sap.ui.Device.system.desktop?0:500);};var q=!C.disableAppFinder;if(C.moveAppFinderActionToShellHeader){if(!this.oOpenCatalogItem){this.oOpenCatalogItem=new sap.ushell.ui.shell.ShellHeadItem(j,{icon:l,tooltip:k,text:k,press:p,showSeparator:false,visible:q});if(C.enableHelp){this.oOpenCatalogItem.addStyleClass('help-id-openCatalogActionItem');}this.oOpenCatalogItem.data("isShellHeader",true);}}else{if(!this.oOpenCatalogItem){this.oOpenCatalogItem=new A(j,{text:k,icon:l,actionType:'action',press:p,visible:q});if(C.enableHelp){this.oOpenCatalogItem.addStyleClass('help-id-openCatalogActionItem');}}}this.aDanglingControls.push(this.oOpenCatalogItem);if(C.moveEditHomePageActionToShellHeader){jQuery.sap.measure.start("FLP:Shell.view.createContent","create the edit home page button as shell head enditem","FLP");if(!this.oTileActionsButton){this.oTileActionsButton=new sap.ushell.ui.shell.ShellHeadItem("ActionModeBtn",{icon:'sap-icon://edit',visible:false,showSeparator:false});this.oTileActionsButton.data("isShellHeader",true);if(C.enableHelp){this.oTileActionsButton.addStyleClass('help-id-openCatalogActionItem');}}this.aDanglingControls.push(this.oTileActionsButton);jQuery.sap.measure.end("FLP:Shell.view.createContent");}}var E=new sap.ushell.ui.shell.ShellHeadItem({id:"endItemsOverflowBtn",tooltip:"{i18n>shellHeaderOverflowBtn_tooltip}",ariaLabel:"{i18n>shellHeaderOverflowBtn_tooltip}",icon:"sap-icon://overflow",press:[c.pressEndItemsOverflow,c],visible:true,showSeparator:false});this.aDanglingControls.push(E);var r=new sap.ushell.ui.shell.SplitContainer({id:'shell-split',showSecondaryContent:{path:"/currentState/showPane"},secondaryContent:{path:"/currentState/paneContent",factory:s},content:d,subHeader:{path:"/currentState/subHeader",factory:s}});var u=new sap.ushell.ui.shell.ToolArea({id:'shell-toolArea',toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});var w=new R({id:'right-floating-container',top:'6.875',hideItemsAfterPresentation:true,visible:'{/currentState/showRightFloatingContainer}',floatingContainerItems:{path:"/currentState/RightFloatingContainerItems",factory:s},insertItemsWithAnimation:{path:'/animationMode',formatter:function(i){return i!=='minimal';}}});var x=new sap.ushell.ui.shell.ShellTitle("shellTitle",{text:{path:"/title"}});var H=function(O,P){var Q=P.getProperty("icon");var T=P.getProperty("title");var W=P.getProperty("subtitle");var X=P.getProperty("intent");if(!Q){Q="sap-icon://circle-task-2";}var Y=(new sap.m.StandardListItem({type:sap.m.ListType.Active,title:T,description:W,icon:Q,customData:[new sap.ui.core.CustomData({key:"intent",value:X})],press:function(Z){var $=Z.getSource().getCustomData();if($&&$.length>0){for(var i=0;i<$.length;i++){if($[i].getKey()==="intent"){var a1=$[i].getValue();if(a1&&a1[0]==="#"){c.navigateFromShellApplicationNavigationMenu(a1);return;}}}}}})).addStyleClass("sapUshellNavigationMenuListItems");return Y;};var y=function(i,O){var P=O.getProperty("icon");var T=O.getProperty("title");var Q=O.getProperty("subtitle");var W=O.getProperty("intent");if(!Q&&!P){P="sap-icon://documents";}jQuery.sap.require("sap.ushell.ui.shell.NavigationMiniTile");return new sap.ushell.ui.shell.NavigationMiniTile({title:T,subtitle:Q,icon:P,intent:W,press:function(){var X=this.getIntent();if(X&&X[0]==='#'){c.navigateFromShellApplicationNavigationMenu(X);}}});};var z=new sap.ushell.ui.shell.ShellNavigationMenu("shellNavigationMenu",{title:"{/currentState/application/title}",icon:"{/currentState/application/icon}",showTitle:{path:"/currentState/application/showNavMenuTitle"},items:{path:"/currentState/application/hierarchy",factory:H.bind(this)},miniTiles:{path:"/currentState/application/relatedApps",factory:y.bind(this)},visible:{path:'/ShellAppTitleState',formatter:function(i){return i===this.oShellAppTitleStateEnum.SHELL_NAV_MENU;}.bind(this)}});this.oShellNavigationMenu=z;var D;D=new sap.ushell.ui.shell.ShellAppTitle({id:"shellAppTitle",text:"{/currentState/application/title}",tooltip:sap.ushell.resources.i18n.getText("shellNavMenu_openMenuTooltip"),navigationMenu:z});D.addEventDelegate({onsapskipforward:function(i){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});var G=new sap.ui.model.Filter('','EQ','a'),I,J;G.fnTest=c.isHeadEndItemNotInOverflow.bind(c);I=new sap.ushell.ui.shell.ShellHeader({id:'shell-header',showLogo:{path:"/currentState/showLogo"},headItems:{path:"/currentState/headItems",factory:s},headEndItems:{path:"/currentState/headEndItems",factory:s,filters:[G]},title:x,appTitle:D,showSeparators:false});J=new S({id:"shell",header:I,toolArea:u,rightFloatingContainer:w,floatingContainerVisible:false,canvasSplitContainer:r,toolAreaVisible:{path:"/currentState/toolAreaVisible"},headerHiding:{path:"/currentState/headerHiding"},headerVisible:{path:"/currentState/headerVisible"},backgroundColorForce:false,showBrandLine:false,showAnimation:false,enableCanvasShapes:C.enableBackGroundShapes===undefined?true:C.enableBackGroundShapes});J._setStrongBackground(true);this.setOUnifiedShell(J);if(e){I.setUser(e);}if(I){var K=I.onAfterRendering;I.onAfterRendering=function(){var i=this.getModel().getProperty("/currentState/headerVisible");if(i){if(K){K.apply(this,arguments);}if(this.getModel().getProperty("/enableHelp")){jQuery('#actionsBtn').addClass('help-id-actionsBtn');jQuery('#configBtn').addClass('help-id-configBtn');jQuery('#homeBtn').addClass('help-id-homeBtn');}jQuery(".sapUshellHeadTitle").removeAttr("tabindex",0);var O=jQuery("#sapUshellHeaderAccessibilityHelper");O.focusin(function(P){var Q=sap.ui.getCore().byId('viewPortContainer'),T=Q.getCurrentState(),W;if(sap.ushell.renderers.fiori2.AccessKeysHandler.bForwardNavigation){switch(T){case"Center":var X=sap.ushell.renderers.fiori2.AccessKeysHandler;if(X.getAppKeysHandler()){setTimeout(function(){X.fnExternalKeysHandler(P,X.bFocusPassedToExternalHandlerFirstTime);X.bFocusOnShell=false;},0);}else{var Y=jQuery(":focusable").filter("[tabindex!='-1']"),Z=Y.index(document.activeElement),W=Y.eq(Z+1);if(!W.length){W=Y[0];}}break;case"LeftCenter":W=jQuery("#logoutBtn");if(W.length===0){W=jQuery("#userStatusOpener");}break;case"RightCenter":W=jQuery("#sapUshellNotificationIconTabByDate");sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;break;}}else{var $=sap.ui.getCore().byId("shell-header"),a1=$.getHeadEndItems(),b1;if(a1.length>0){b1=a1[a1.length-1];W=b1;}else W=$.getAppTitle();}setTimeout(function(){if(W){W.focus();}},0);});}};}this.oShellPage=this.pageFactory("shellPage",J,true);if(b){I.setLogo(sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'));}else{this.initShellBarLogo(I);}this.setDisplayBlock(true);this.aDanglingControls=this.aDanglingControls.concat([sap.ui.getCore().byId('viewPortContainer'),this.oShellPage,f,h,a,o]);J.updateAggregation=this.updateShellAggregation;I.updateAggregation=this.updateShellAggregation;u.updateAggregation=this.updateShellAggregation;w.updateAggregation=this.updateShellAggregation;r.updateAggregation=this.updateShellAggregation;var L=(C.enableSearch!==false);if(L){var _=function(i){if(!t._searchShellHelperDeferred){t._searchShellHelperDeferred=jQuery.Deferred();sap.ui.require(['sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader'],function(){var O=sap.ui.require('sap/ushell/renderers/fiori2/search/SearchShellHelper');if(i){O.init();}t._searchShellHelperDeferred.resolve(O);});}return t._searchShellHelperDeferred;};t.oShellSearchBtn=new sap.ushell.ui.shell.ShellHeadItem({id:"sf",tooltip:"{i18n>searchbox_tooltip}",text:"{i18n>searchBtn}",ariaLabel:"{i18n>searchbox_tooltip}",icon:sap.ui.core.IconPool.getIconURI("search"),visible:true,showSeparator:false,press:function(i){_(false).done(function(O){O.onShellSearchButtonPressed(i);});}});if(C.openSearchAsDefault){_(true).done(function(i){i.setDefaultOpen(true);i.openSearch(false,false);});}var M=function(){var i=sap.ui.core.routing.HashChanger.getInstance();i.attachEvent("shellHashChanged",function(O){var P=O.mParameters;sap.ui.require(['sap/ushell/renderers/fiori2/search/HashChangeHandler'],function(Q){Q.handle(P);});});};sap.ui.getCore().getEventBus().subscribeOnce("sap.ushell","coreResourcesFullyLoaded",M);t.oShellSearchBtn.addEventDelegate({onsapskipforward:function(i){i.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsapskipback:function(i){i.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onAfterRendering:function(){jQuery("#sf").attr("aria-pressed",false);}});t.aDanglingControls.push(t.oShellSearchBtn);}this.logonIFrameReference=null;return new sap.m.App({pages:this.oShellPage});},_allowUpToThreeActionInShellHeader:function(c){if(Object.keys(c).length!=0){var C=[c.moveAppFinderActionToShellHeader,c.moveUserSettingsActionToShellHeader,c.moveGiveFeedbackActionToShellHeader,c.moveContactSupportActionToShellHeader,c.moveEditHomePageActionToShellHeader];var a=0;for(var i=0;i<5;i++){if(a===3){C[i]=false;}else{if(C[i]){a++;}}}c.moveAppFinderActionToShellHeader=C[0];c.moveUserSettingsActionToShellHeader=C[1];c.moveGiveFeedbackActionToShellHeader=C[2];c.moveContactSupportActionToShellHeader=C[3];c.moveEditHomePageActionToShellHeader=C[4];}},createPostCoreExtControls:function(){jQuery.sap.require("sap.ushell.ui.shell.FloatingContainer");jQuery.sap.require("sap.ushell.ui.shell.ShellFloatingActions");var o=new sap.ushell.ui.shell.FloatingContainer({id:'shell-floatingContainer',content:{path:"/currentState/floatingContainerContent",factory:s}});o.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"tabindex",value:"-1",writeToDom:true}));o.addEventDelegate({onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipback:function(e){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});var a=sap.ui.getCore().byId("shell"),m=a.getModel();o.setModel(m);this.aDanglingControls.push(o);var b=new sap.ushell.ui.shell.ShellFloatingActions({id:'shell-floatingActions',floatingActions:{path:"/currentState/floatingActions",factory:s}});b.updateAggregation=this.updateShellAggregation;var c=this.getOUnifiedShell();c.setFloatingContainer(o);c.setFloatingActionsContainer(b);this._createAllMyAppsView();},_createAllMyAppsView:function(){var t=this,_=function(){return t.getModel();};if(sap.ushell.Container.getService("AllMyApps").isEnabled()){this.oAllMyAppsView=sap.ui.view("allMyAppsView",{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps",viewData:{_fnGetShellModel:_},height:"100%",visible:{path:'/ShellAppTitleState',formatter:function(c){return c!==this.oShellAppTitleStateEnum.SHELL_NAV_MENU;}.bind(this)}}).addStyleClass("sapUshellAllMyAppsView");this.oAllMyAppsView.addCustomData(new sap.ushell.ui.launchpad.AccessibilityCustomData({key:"aria-label",value:sap.ushell.resources.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(this.oAllMyAppsView);}},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(u){this.oUnifiedShell=u;},_getIconURI:function(i){var r=null;if(i){var m=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(i);if(m){r=m[1];}}return r;},initShellBarLogo:function(o){var m=jQuery.sap.getModulePath("sap.ushell");jQuery.sap.require("sap.ui.core.theming.Parameters");o.setLogo(m+'/themes/base/img/sap_55x27.png');var t=this;sap.ui.getCore().attachThemeChanged(function(){if(o.bIsDestroyed){return;}var n=sap.ui.core.theming.Parameters.get("sapUiGlobalLogo");if(n){n=t._getIconURI(n);if(n){o.setLogo(n);}else{o.setLogo(m+'/themes/base/img/sap_55x27.png');}}else{o.setLogo(m+'/themes/base/img/sap_55x27.png');}});},initViewPortContainer:function(c){var v=new V({id:"viewPortContainer",defaultState:sap.ushell.ui.launchpad.ViewPortState.Center,afterNavigate:jQuery.proxy(c.onAfterNavigate,c),afterSwitchState:jQuery.proxy(c.onAfterViewPortSwitchState,c)});return v;},updateShellAggregation:function(n){var b=this.mBindingInfos[n],a=this.getMetadata().getJSONKeys()[n],c;jQuery.each(this[a._sGetter](),jQuery.proxy(function(i,v){this[a._sRemoveMutator](v);},this));jQuery.each(b.binding.getContexts(),jQuery.proxy(function(i,v){c=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[a._sMutator](c);},this));},disableBouncing:function(p){p.onBeforeRendering=function(){sap.m.Page.prototype.onBeforeRendering.apply(p);var o=this._oScroller,O=o.onAfterRendering;o.onAfterRendering=function(){O.apply(o);if(o._scroller){o._scroller.options.bounce=false;}};};return p;},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},pageFactory:function(i,c,d){var p=new sap.m.Page({id:i,showHeader:false,content:c,enableScrolling:!!sap.ui.Device.system.desktop}),e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"],D={};jQuery.each(e,function(I,E){D[E]=jQuery.proxy(function(a){jQuery.each(this.getContent(),function(I,c){c._handleEvent(a);});},p);});p.addEventDelegate(D);if(d&&sap.ui.Device.system.desktop){this.disableBouncing(p);}return p;},createIFrameDialog:function(){var d=null,l=this.logonIFrameReference,c;var _=function(){if(l){l.remove();}return jQuery('<iframe id="SAMLDialogFrame" src="" frameborder="0" height="100%" width="100%"></iframe>');};var a=function(){d.addStyleClass('sapUshellSamlDialogHidden');jQuery('#sap-ui-blocklayer-popup').addClass('sapUshellSamlDialogHidden');};this.destroyIFrameDialog();var b=new sap.m.Button({text:sap.ushell.resources.i18n.getText("samlCloseBtn"),press:function(){sap.ushell.Container.cancelLogon();}});var h=new sap.ui.core.HTML("SAMLDialogFrame");this.logonIFrameReference=_();h.setContent(this.logonIFrameReference.prop('outerHTML'));d=new sap.m.Dialog({id:"SAMLDialog",title:sap.ushell.resources.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",rightButton:b}).addStyleClass("sapUshellIframeDialog");c=sap.ushell.Container.getService("SupportTicket").isEnabled();if(c){jQuery.sap.require("sap.ushell.ui.footerbar.ContactSupportButton");var C=new sap.ushell.ui.footerbar.ContactSupportButton();C.setWidth('150px');C.setIcon('');d.setLeftButton(C);}d.addContent(h);d.open();a();this.logonIFrameReference=jQuery('#SAMLDialogFrame');return this.logonIFrameReference[0];},destroyIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.destroy();}this.logonIFrameReference=null;},showIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.removeStyleClass('sapUshellSamlDialogHidden');jQuery('#sap-ui-blocklayer-popup').removeClass('sapUshellSamlDialogHidden');}}});},false);sap.ui.predefine('sap/ushell/resources',['sap/ui/model/resource/ResourceModel'],function(R){"use strict";var r={};r.getTranslationModel=function(l){var t=new R({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:l});return t;};r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r;},true);sap.ui.predefine('sap/ushell/services/AllMyApps',[],function(){"use strict";function A(c,p,s){var S=s&&s.config,e=false,d={},P={HOME:0,EXTERNAL:1,CATALOG:2};this.isEnabled=function(){e=(!S||(S.enabled!==false))?true:false;return e;};this.isHomePageAppsEnabled=function(){return(!S||(S.showHomePageApps!==false))?true:false;};this.isCatalogAppsEnabled=function(){return(!S||(S.showCatalogApps!==false))?true:false;};this.isExternalProviderAppsEnabled=function(){return(!S||(S.showExternalProviders!==false))?true:false;};this.registerExternalProvider=function(a,o){if(!a||(a==="")){return;}if(!o.getTitle||!o.getData){return;}d[a]=o;};this.getDataProviders=function(){return d;};this.getProviderTypeEnum=function(){return P;};this.init=function(){};}A.hasNoAdapter=true;return A;},true);sap.ui.predefine('sap/ushell/services/AppConfiguration',["sap/ushell/utils"],function(u){"use strict";function A(){var m={},a=true,c=null,C=null,I=[],b=[];sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appOpened",d,this);function d(f,E,D){a=false;C=D;if(b.length){for(var i=0;i<b.length;i++){b[i]();}b.length=0;}}this.addActivity=function(r){var U=sap.ushell.Container.getService("UserRecents");return U.addActivity(r);};this.setApplicationInInitMode=function(){a=true;};this.getApplicationRequestQueue=function(){return b;};this.getCurrentAppliction=function(o){return c;};this.getCurrentApplication=this.getCurrentAppliction;this.getMetadata=function(o){if(!o){o=c;}if(o){var h=hasher&&hasher.getHash?hasher.getHash():'',k=this._processKey(h);if(!(m.hasOwnProperty(k))||!m[k].complete){this.addMetadata(o,k);}if(!m[k]){m[k]={complete:false};}if(!m[k].title){m[k].title=o.text||sap.ushell.resources.i18n.getText("default_app_title");}return m[k];}return{};};this._processKey=function(f){var i=f.split('?')[0],p=f.split('?')[1],S,P={},g,h='',j='',o;if(p){S=p.split('&');S.forEach(function(k){var l=k.split('=');P[l[0]]=l[1];});g=Object.keys(P).sort();g.forEach(function(k,l){j=l?'&':'?';h+=j+k+'='+P[k];});return i+h;}o=sap.ushell.Container.getService("URLParsing").parseShellHash(f);i=o?o.semanticObject+"-"+o.action:"";return i;};this.setCurrentApplication=function(o){c=o;if(b.length){b.length=0;}};this.setHeaderHiding=function(h){if(sap.ui.Device.system.phone){if(c===C){s(h);}else{b.push(function(){s(h);});}}else{jQuery.sap.log.warning("Application configuration could not be trigger setHeaderHiding on Shell as the running device is not a phone");}};function s(h){var r=sap.ushell.Container.getRenderer("fiori2");if(r){r.setHeaderHiding(h);}}this.addApplicationSettingsButtons=function(B){if(a){b.push(function(){e(B);});}else{e(B);}};function e(B){var i,f=[],r=sap.ushell.Container.getRenderer("fiori2");for(i=0;i<B.length;i++){var o=B[i];f.push(o.getId());o.setIcon(o.getIcon()||sap.ui.core.IconPool.getIconURI('customize'));if(sap.ushell.resources.i18n.getText("userSettings")===o.getProperty("text")){o.setProperty("text",sap.ushell.resources.i18n.getText("userAppSettings"));}o.setType(sap.m.ButtonType.Unstyled);}if(sap.ushell.Container&&r){if(I.length){r.hideActionButton(I,true);}I=f;r.showActionButton(f,true,undefined,true);}}this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){jQuery.sap.setIcons(i);};this.setApplicationFullWidth=function(v){var V=sap.ui.getCore().byId("viewPortContainer");V.setApplicationFullWidth(v);};this.getSettingsControlAsync=function(){var D=new jQuery.Deferred();sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(S){D.resolve(new S());});return D.promise();};this.getSettingsControl=function(){var S="sap/ushell/ui/footerbar/SettingsButton",o="sap.ushell.ui.footerbar.SettingsButton",f=sap.ui.require(S);if(f){return new f();}jQuery.sap.require(o);f=jQuery.sap.getObject(o);return new f();};this.getApplicationName=function(o){var M,f=(o&&o.additionalInformation)||null;if(f){M=/^SAPUI5\.Component=(.+)$/i.exec(f);if(M){return M[1];}}return null;};this.getApplicationUrl=function(o){var U=(o&&o.url)||null,S="P_TCODE",i;if(U){if(o.applicationType==="NWBC"&&U.indexOf(S)){return U;}i=U.indexOf("?");if(i>=0){U=U.slice(0,i);}if(U.slice(-1)!=='/'){U+='/';}}return U;};this.getPropertyValueFromConfig=function(o,p,r){var v;if(r&&o.hasOwnProperty(p+"Resource")){v=r.getText(o[p+"Resource"]);}else if(o.hasOwnProperty(p)){v=o[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var M=p[P].manifestEntryKey,f=p[P].path,o=l.getManifestEntry(M);return jQuery.sap.getObject(f,undefined,o);};this.addMetadata=function(o,k){try{var f=this.getApplicationName(o),U=this.getApplicationUrl(o),l,g,p={"fullWidth":{"manifestEntryKey":"sap.ui","path":"fullWidth"},"hideLightBackground":{"manifestEntryKey":"sap.ui","path":"hideLightBackground"},"title":{"manifestEntryKey":"sap.app","path":"title"},"icon":{"manifestEntryKey":"sap.ui","path":"icons.icon"},"favIcon":{"manifestEntryKey":"sap.ui","path":"icons.favIcon"},"homeScreenIconPhone":{"manifestEntryKey":"sap.ui","path":"icons.phone"},"homeScreenIconPhone@2":{"manifestEntryKey":"sap.ui","path":"icons.phone@2"},"homeScreenIconTablet":{"manifestEntryKey":"sap.ui","path":"icons.tablet"},"homeScreenIconTablet@2":{"manifestEntryKey":"sap.ui","path":"icons.tablet@2"},"startupImage320x460":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x920":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x1096":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x1096"},"startupImage768x1004":{"manifestEntryKey":"sap.ui","path":"icons.startupImage768x1004"},"startupImage748x1024":{"manifestEntryKey":"sap.ui","path":"icons.startupImage748x1024"},"startupImage1536x2008":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1536x2008"},"startupImage1496x2048":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1496x2048"},"compactContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.compact"},"cozyContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.cozy"}},h,i,j,M,P,n,r,q=o&&o.componentHandle;if(k){if(!(m.hasOwnProperty(k))){m[k]={complete:false};}if(!m[k].complete){if(q){l=q.getMetadata();}else if(f){jQuery.sap.log.warning("No component handle available for '"+f+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return;}if(l){g=l.getConfig();M=(l.getManifest()!==undefined);m[k].complete=true;if(g){n=g.resourceBundle||"";if(n){if(n.slice(0,1)!=='/'){n=U+n;}r=jQuery.sap.resources({url:n,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(M){m[k][P]=this.getPropertyValueFromManifest(l,p,P);}if(g&&m[k][P]===undefined){m[k][P]=this.getPropertyValueFromConfig(g,P,r);}}}m[k].version=l.getVersion();m[k].technicalName=l.getComponentName();}else if(u.isApplicationTypeNWBCRelated(o.applicationType)){var w="/~canvas;window=app/wda/",t=o.url.indexOf(w),W="/bc/gui/sap/its/webgui",v=o.url.indexOf(W);if(t>=0){m[k].technicalName=o.url.substring((t+w.length),o.url.indexOf("/",(t+w.length)));}m[k].complete=true;if(v>=0){var E="etransaction=",x=o.url.indexOf(E,v+W.length),y=o.url.indexOf("&",x),z=(y>=0)?y:o.url.length;m[k].technicalName=o.url.substring(x+E.length,z)+" (TCODE)";}}else{jQuery.sap.log.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration");}}h=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];i=(U&&U[U.length-1]==='/')?U.substring(0,U.length-1):U;j=function(U){if(U.match(/^https?:\/\/.*/)){return false;}return U&&U[0]!=='/';};h.forEach(function(D){var O=m[k][D],F=null;if(O){F=j(O)?i+"/"+O:O;}m[k][D]=F;});}}catch(B){jQuery.sap.log.warning("Application configuration could not be parsed");}};}return new A();},true);sap.ui.predefine('sap/ushell/services/AppLifeCycle',["sap/ui/base/EventProvider"],function(E){"use strict";var S="appLoaded";function A(a,c,p,C){var o,e,v;this.getCurrentApplication=function(){return o;};this.attachAppLoaded=function(d,f,l){e.attachEvent(S,d,f,l);};this.detachAppLoaded=function(f,l){e.detachEvent(S,f,l);};e=new E();v=sap.ui.getCore().byId("viewPortContainer");if(!v||typeof v.attachAfterNavigate!=="function"){jQuery.sap.log.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return;}v.attachAfterNavigate(function(b){var d,s,f,h=false;if(b.mParameters.toId.indexOf("applicationShellPage")===0){d=b.mParameters.to.getApp();}else if(b.mParameters.toId.indexOf("application")===0){d=b.mParameters.to;}if(d&&typeof d.getComponentHandle==="function"&&d.getComponentHandle()){f=d.getComponentHandle().getInstance();}if(f&&f.getId()==="application-Shell-home-component"){h=true;}s=d&&typeof d.getApplicationType==="function"&&d.getApplicationType();if((!s||s==="URL")&&f){s="UI5";}o={applicationType:s,componentInstance:f,homePage:h};setTimeout(function(){e.fireEvent(S,o);},0);});}A.hasNoAdapter=true;return A;},true);sap.ui.predefine('sap/ushell/services/AppState',["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/LimitedBuffer","sap/ushell/services/_AppState/Sequentializer","sap/ushell/utils","sap/ushell/services/Container"],function(W,S,A,L,a,u,C){"use strict";function g(c){return u.isDefined(c)&&u.isDefined(c.transient)?!!c.transient:true;}function b(o,c,p,d){this._oConfig=d&&d.config;this._sSessionKey="";this._oAdapter=new S(o);this._oAdapter=new W(this,this._oAdapter,d);}b.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};b.prototype.getAppState=function(k){var d=new jQuery.Deferred(),t=this,o;this._loadAppState(k).done(function(k,D){o=new A(t,k,false,D);d.resolve(o);}).fail(function(m){o=new A(t,k);d.resolve(o);});return d.promise();};b.prototype._getGeneratedKey=function(){var s=sap.ushell.Container.getService("Personalization").getGeneratedKey();s=("AS"+s).substring(0,40);return s;};b.prototype.createEmptyAppState=function(c,t){var k=this._getGeneratedKey(),o,s="",d="",U=u.isDefined(t)?t:g(this._oConfig);if(c){if(!(c instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(c.getMetadata&&c.getMetadata()&&typeof c.getMetadata().getName==="function"){s=c.getMetadata().getName()||"";}if(!s&&c.getMetadata&&c.getMetadata().getLibraryName){s=c.getMetadata().getLibraryName();}if(c.getMetadata&&c.getMetadata()&&typeof c.getMetadata().getManifest==="function"&&typeof c.getMetadata().getManifest()==="object"&&typeof c.getMetadata().getManifest()["sap.app"]==="object"){d=c.getMetadata().getManifest()["sap.app"].ach||"";}}o=new A(this,k,true,undefined,s,d,U);return o;};b.prototype.createEmptyUnmodifiableAppState=function(c){var k=this._getGeneratedKey(),o;o=new A(this,k,false);return o;};b.prototype._saveAppState=function(k,d,s,c,t){var e=this._getSessionKey(),U=u.isDefined(t)?t:g(this._oConfig);return this._oAdapter.saveAppState(k,e,d,s,c,U);};b.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};b._getSequentializer=function(){return new a();};b.WindowAdapter=W;b.hasNoAdapter=false;return b;},true);sap.ui.predefine('sap/ushell/services/AppType',[],function(){"use strict";return{OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",APP:"Application",getDisplayName:function(a){switch(a){case this.OVP:case this.SEARCH:case this.FACTSHEET:case this.COPILOT:return a;default:return"App";}}};});sap.ui.predefine('sap/ushell/services/ClientSideTargetResolution',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/AppConfiguration","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/navigationMode"],function(u,c,b,S,I,d,V,f,l,F,n){"use strict";function C(a,o,p,s){this._init.apply(this,arguments);};var g="";var O={apply:"apply",applied:"applied"};C.prototype._init=function(a,o,p,s){this._iLogId=0;if(!this._implementsServiceInterface(a)){jQuery.sap.log.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return;}this._oInboundProvider=new I(a.getInbounds.bind(a));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._validateServiceConfiguration(s);this._oServiceConfiguration=s;this._oAdapter=a;};C.prototype._validateServiceConfiguration=function(s){var e=jQuery.sap.getObject("config.enableInPlaceForClassicUIs",undefined,s),a=true;if(e){if(typeof e!=="object"){a=false;}else{Object.keys(e).forEach(function(k){if(["GUI","WDA"].indexOf(k)===-1){a=false;}else if(typeof e[k]!=="boolean"){a=false;}});}}if(!a){jQuery.sap.log.error("Invalid service configuration: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual config: "+JSON.stringify(s),"sap.ushell.services.ClientSideTargetResolution");}};C.prototype._implementsServiceInterface=function(a){if(typeof a.getInbounds==="function"){return true;}return false;};C.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};C.prototype.isInPlaceConfiguredFor=function(t){var e=jQuery.sap.getObject("config.enableInPlaceForClassicUIs",undefined,this._oServiceConfiguration);if(!e){return false;}return e[t]?true:false;};C.prototype._isFullLocalWDAResolution=function(m){var o=m.inbound,r=o&&o.resolutionResult;if(this._oServiceConfiguration&&this._oServiceConfiguration.config&&this._oServiceConfiguration.config["enableWdaLocalResolution"]===false){return false;}return!(!o||!r||!(r["sap.wda"])||!(r.applicationType==="WDA"));};C.prototype._isLocalWDAResolution=function(m){var o=m.inbound,r=o&&o.resolutionResult;if(this._oServiceConfiguration&&this._oServiceConfiguration.config&&this._oServiceConfiguration.config["enableWdaLocalResolution"]===false){return false;}return!(!o||!r||!(r.applicationType==="WDA"));};C.prototype._isFullLocalWebguiResolution=function(m){var o=m.inbound,r=o&&o.resolutionResult;if(this._oServiceConfiguration&&this._oServiceConfiguration.config&&this._oServiceConfiguration.config["enableWebguiLocalResolution"]===false){return false;}return!(!o||!r||!(r["sap.gui"])||!(r.applicationType==="TR"));};C.prototype._isLocalWebguiNowrapResolution=function(m){var o=m.inbound,r=o&&o.resolutionResult;if(this._oServiceConfiguration&&this._oServiceConfiguration.config&&this._oServiceConfiguration.config["enableWebguiLocalResolution"]===false){return false;}return!(!o||!r||!(r.applicationType==="TR")||!(r.url.indexOf("/~canvas;")>=0)||!(r.url.indexOf("app/transaction/APB_LPD_CALL_")===-1));};C.prototype._isLocalWebguiWrapResolution=function(m){var o=m.inbound,r=o&&o.resolutionResult;if(this._oServiceConfiguration&&this._oServiceConfiguration.config&&this._oServiceConfiguration.config["enableWebguiLocalResolution"]===false){return false;}return!(!o||!r||!(r.applicationType==="TR")||!(r.url.indexOf("/~canvas;")>=0)||!(r.url.indexOf("app/transaction/APB_LPD_CALL_")>=0));};C.prototype._isLocalNativeWebguiWrapResolution=function(m){var o=m.inbound,r=o&&o.resolutionResult;if(this._oServiceConfiguration&&this._oServiceConfiguration.config&&this._oServiceConfiguration.config["enableNativeWebguiLocalResolution"]===false){return false;}return!(!o||!r||!(r.applicationType==="TR")||!(r.url.indexOf("/its/webgui")>=0)||!(r.url.indexOf("APB_LPD_CALL_")!==-1));};C.prototype._isLocalNativeWebguiNowrapResolution=function(m){var o=m.inbound,r=o&&o.resolutionResult;if(this._oServiceConfiguration&&this._oServiceConfiguration.config&&this._oServiceConfiguration.config["enableNativeWebguiLocalResolution"]===false){return false;}return!(!o||!r||!(r.applicationType==="TR")||!(r.url.indexOf("/its/webgui")>=0)||!(r.url.indexOf("APB_LPD_CALL_")===-1));};C.prototype._hasRenameTo=function(m){return m.inbound&&m.inbound.signature&&m.inbound.signature.parameters&&Object.keys(m.inbound.signature.parameters).some(function(k){return!!(m.inbound.signature.parameters[k].renameTo);});};C.prototype._removeUnusedComplexParameterValuesFromDefaultList=function(m){m.defaultedParamNames=m.defaultedParamNames.filter(function(N){if(m.intentParamsPlusAllDefaults[N]&&!jQuery.isArray(m.intentParamsPlusAllDefaults[N])){if(!(m.resolutionResult.oNewAppStateMembers&&m.resolutionResult.oNewAppStateMembers[N])){return false;}}return true;});};C.prototype._mapDefaultParameterNames=function(m){var p=jQuery.sap.getObject("inbound.signature.parameters",undefined,m)||{},M={};m.defaultedParamNames.forEach(function(N){var s=(p[N]&&p[N].renameTo)||N;if(M[s]){jQuery.sap.log.error("renaming of defaultedParamNames creates duplicates"+N+"->"+s);}else{M[s]=true;}});m.mappedDefaultedParamNames=Object.keys(M).sort();};C.prototype._mixAppStateIntoResolutionResultAndRename=function(m,a){var D=new jQuery.Deferred(),t=this,N,s,o;function e(T){var q;t._removeUnusedComplexParameterValuesFromDefaultList(T);t._mapDefaultParameterNames(T);q=n.compute(jQuery.sap.getObject("inbound.resolutionResult.applicationType",undefined,T),(T.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(T.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(b.getCurrentApplication()||{}).applicationType,t._oServiceConfiguration&&t._oServiceConfiguration.config&&t._oServiceConfiguration.config.enableInPlaceForClassicUIs);u.shallowMergeObject(T.resolutionResult,q);delete T.resolutionResult.oNewAppStateMembers;D.resolve(T);}function h(m){return(m.resolutionResult.oNewAppStateMembers&&!jQuery.isEmptyObject(m.resolutionResult.oNewAppStateMembers));}function j(L,P){return jQuery.isArray(L)&&L.some(function(q){return(P.indexOf(q)!==-1);});}function k(A,P){var q,v,w;if(A&&A.selectionVariant){q=new S(JSON.stringify(A.selectionVariant));w=q.getSelectOptionsPropertyNames()||[];v=q.getParameterNames()||[];if(j(w,P)||j(v,P)){return true;}}return false;}function r(q,R,P,v){var w=new S(),x=q.getParameterNames()||[],y=q.getSelectOptionsPropertyNames()||[],z,A;x.forEach(function(B){z=q.getParameter(B);if(v&&!P[B]){R.deleted=true;return;}if(P[B]&&P[B].renameTo){if((w.getParameter(P[B].renameTo)===undefined)&&(w.getSelectOption(P[B].renameTo)===undefined)){w.addParameter(P[B].renameTo,z);R.changed=true;}else{jQuery.sap.log.error("renaming of appstate creates duplicates "+B+"->"+P[B].renameTo);}}else{if((w.getParameter(B)===undefined)&&(w.getSelectOption(B)===undefined)){w.addParameter(B,z);}}});y.forEach(function(B){A=q.getSelectOption(B);if(v&&!P[B]){R.deleted=true;return;}if(P[B]&&P[B].renameTo){if((w.getSelectOption(P[B].renameTo)===undefined)&&(w.getParameter(P[B].renameTo)===undefined)){w.massAddSelectOption(P[B].renameTo,A);R.changed=true;}else{jQuery.sap.log.error("renaming of appstate creates duplicates "+B+"->"+P[B].renameTo);}}else{if((w.getSelectOption(B)===undefined)&&(w.getParameter(B)===undefined)){w.massAddSelectOption(B,A);}}});x.forEach(function(B){q.removeParameter(B);});y.forEach(function(B){q.removeSelectOption(B);});w.getParameterNames().forEach(function(B){q.addParameter(B,w.getParameter(B));});w.getSelectOptionsPropertyNames().forEach(function(B){q.massAddSelectOption(B,w.getSelectOption(B));});return q;}function p(q){if(q===undefined||jQuery.isPlainObject(q)){return false;}return true;}function M(q){var v=q.getData()||{},w,x={};var y=m.inbound.signature;if(v.selectionVariant){w=new S(JSON.stringify(v.selectionVariant));}else{w=new S();}if(h(m)){Object.keys(m.resolutionResult.oNewAppStateMembers).forEach(function(A){w.massAddSelectOption(A,m.resolutionResult.oNewAppStateMembers[A].Ranges);});}var z=y.additionalParameters==="ignored";w=r(w,x,y.parameters,z);if(w.getParameterNames().length!==0||w.getSelectOptionsPropertyNames().length!==0||x.deleted){v.selectionVariant=w.toJSONObject();}if(!x.changed&&!x.deleted&&!h(m)){e(m);return;}q.setData(v);q.save().done(function(){m.intentParamsPlusAllDefaults["sap-xapp-state"]=[q.getKey()];m.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[q.getKey()];e(m);});}if(!h(m)&&!t._hasRenameTo(m)){e(m);}else{s=m.intentParamsPlusAllDefaults["sap-xapp-state"]&&m.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(s){a.getAppState(s).done(function(q){var P=c.constructParameterDominatorMap(m.inbound.signature.parameters);o=q.getData();if(p(o)){delete m.resolutionResult.oNewAppStateMembers;e(m);}if(m.resolutionResult.oNewAppStateMembers){Object.keys(m.resolutionResult.oNewAppStateMembers).forEach(function(v){var w=P[v].dominatedBy;if(k(o,w)){delete m.resolutionResult.oNewAppStateMembers[v];}});}if(!h(m)&&!t._hasRenameTo(m)){e(m);}else{N=a.createEmptyAppState(undefined,true);if(N){N.setData(q.getData());M(N);}}});}else if(h(m)){M(a.createEmptyAppState(undefined,true));}else{e(m);}}return D.promise();};C.prototype._extractInboundFilter=function(o){if(!this._oAdapter.hasSegmentedAccess){return undefined;}if(typeof o!=="string"){return undefined;}var s=o.indexOf("#")===0?o:"#"+o;var a=this._getURLParsing().parseShellHash(s);if(!a||!a.semanticObject||!a.action){return undefined;}return[{semanticObject:a.semanticObject,action:a.action}];};C.prototype.resolveHashFragment=function(h){var t=this,D=new jQuery.Deferred(),B=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),s=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(s).then(function(a){t._resolveHashFragment(h,B,a).done(function(o){return D.resolve(o);}).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};C.prototype.resolveTileIntent=function(h){var t=this,D=new jQuery.Deferred(),s=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(s).then(function(o){t._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};C.prototype.resolveTileIntentInContext=function(a,h){var o,D=new jQuery.Deferred();o=d.createIndex(a.concat(V.getInbounds()));this._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));return D.promise();};C.prototype._resolveHashFragment=function(h,B,a){var U=this._getURLParsing(),t=this,D=new jQuery.Deferred(),s=h.indexOf("#")===0?h:"#"+h,e=U.parseShellHash(s);if(e===undefined){jQuery.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject().promise();}e.formFactor=u.getFormFactor();this._getMatchingInbounds(e,a,{bExcludeTileInbounds:true}).fail(function(E){jQuery.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){jQuery.sap.log.warning("Could not resolve "+h,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");D.reject("Could not resolve navigation target");return;}M=m[0];c.whenDebugEnabled(function(){function j(K,v){return this[K]===undefined?"<undefined>":v;}function r(o,v){return(o==="_original")?undefined:j.call(this,o,v);}var k=JSON.stringify(M,r,"   ");jQuery.sap.log.debug("The following target will now be resolved",k,"sap.ushell.services.ClientSideTargetResolution");});t._resolveSingleMatchingTarget(M,B,s).done(function(o){D.resolve(o);}).fail(D.reject.bind(D));});return D.promise();};C.prototype._resolveEasyAccessMenuIntent=function(o,m,B,s){var e="Intent must be either #Shell-startGUI or #Shell-startWDA";if(o.action==="startGUI"){return this._resolveEasyAccessMenuIntentWebgui(o,m,B,s,true);}if(o.action==="startWDA"){return this._resolveEasyAccessMenuIntentWDA(o,m);}return new jQuery.Deferred().reject("The easy access menu intent "+o.semanticObject+"-"+o.action+" could not be resolved: "+e).promise();};C.prototype._resolveEasyAccessMenuIntentWDA=function(o,m){var s,a,e,D=new jQuery.Deferred(),t=this;a=o.params["sap-ui2-wd-app-id"][0];s=(jQuery.sap.getObject("params.sap-ui2-wd-conf-id",undefined,o)||[])[0];e=Object.keys(o.params).reduce(function(r,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){r[p]=o.params[p];}return r;},{});t._buildWdaURI(a,s,e).done(function(U){var r={url:U.toString(),applicationType:"NWBC",text:a,additionalInformation:"","sap-system":o.params["sap-system"][0]};if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){r["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}D.resolve(r);}).fail(function(E){D.reject(E);});return D.promise();};C.prototype._buildNativeWebGuiURI=function(t,s){var U,o;U="/gui/sap/its/webgui?%7etransaction="+t+"&%7enosplash=1";o=new URI(U);return this._spliceSapSystemIntoURI(o,g,s,"NATIVEWEBGUI",O.apply);};C.prototype._buildWdaURI=function(a,s,o){var e,U,h,j=jQuery.extend(true,{},o);if(s){j["sap-wd-configId"]=s;}e=j["sap-system"][0];delete j["sap-system"];U="/ui2/nwbc/~canvas;window=app/wda/"+a+"/"+"?"+this._getURLParsing().paramsToString(j);h=new URI(U);return this._spliceSapSystemIntoURI(h,g,e,"WDA",O.apply);};C.prototype._resolveEasyAccessMenuIntentWebgui=function(o,m,B,s,U){var D=new jQuery.Deferred(),t=this;this._buildNativeWebGuiURI(o.params["sap-ui2-tcode"][0],o.params["sap-system"][0]).done(function(e){delete m.intentParamsPlusAllDefaults["sap-ui2-tcode"];t._mapParameterNamesAndRemoveObjects(m);t._blendParamsIntoNativeWebGUI(m,e);var a=m;if(m.resolutionResult&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){a["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}a.resolutionResult["sap-system"]=o.params["sap-system"][0];if(U){a.resolutionResult.text=o.params["sap-ui2-tcode"][0];}D.resolve(a.resolutionResult);return;});return D.promise();};C.prototype._resolveSingleMatchingTarget=function(m,B,s){var t=this,D=new jQuery.Deferred(),U=this._getURLParsing(),o=U.parseShellHash(s);if(o.semanticObject==="Shell"&&(o.action==="startWDA"||o.action==="startGUI")){return this._resolveEasyAccessMenuIntent(o,m,B,s).then(function(r){var N=n.compute(jQuery.sap.getObject("inbound.resolutionResult.applicationType",undefined,m),(m.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(m.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(b.getCurrentApplication()||{}),t._oServiceConfiguration&&t._oServiceConfiguration.config&&t._oServiceConfiguration.config.enableInPlaceForClassicUIs);u.shallowMergeObject(r,N);return r;});}this._mapParameterNamesAndRemoveObjects(m);this._mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var a=t._determineResultProcessor(m);delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(p){return p!=="sap-tag";});var e=jQuery.sap.getObject('inbound.resolutionResult.url',undefined,m);a(m,B,s,e).done(function(m){D.resolve(m.resolutionResult);jQuery.sap.log.debug("Intent was resolved to the following target",JSON.stringify(m.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");}).fail(function(M){if(M.indexOf("fallback:")>=0){t._constructFallbackResolutionResult.call(this,m,B,s).fail(D.reject.bind(D)).done(function(m){D.resolve(m.resolutionResult);});}else{D.reject(M);}});});return D.promise();};C.prototype._resolveTileIntent=function(h,B,o){var U=this._getURLParsing(),t=this,D=new jQuery.Deferred(),s=h.indexOf("#")===0?h:"#"+h,a=U.parseShellHash(s);if(a===undefined){jQuery.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject("Cannot parse shell hash").promise();}a.formFactor=u.getFormFactor();this._getMatchingInbounds(a,o,{bExcludeTileInbounds:false}).fail(function(e){jQuery.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+e,"sap.ushell.services.ClientSideTargetResolution");D.reject(e);}).done(function(m){var M;if(m.length===0){jQuery.sap.log.warning("Could not resolve "+h,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");D.reject("No matching targets found");return;}M=m[0];t._resolveSingleMatchingTileIntent(M,B,s).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};C.prototype._resolveSingleMatchingTileIntent=function(m,B,s){var D=new jQuery.Deferred(),t=this;this._mapParameterNamesAndRemoveObjects(m);this._mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var a=t._determineResultProcessor(m);delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(p){return p!=="sap-tag";});var e=jQuery.sap.getObject('inbound.resolutionResult.url',undefined,m);a(m,B,s,e).done(function(m){var T=jQuery.extend(true,{},m.inbound.tileResolutionResult);T.startupParameters=m.effectiveParameters;T.navigationMode=m.resolutionResult.navigationMode;if(!T.navigationMode){T.navigationMode=n.getNavigationMode(m.resolutionResult)}D.resolve(T);jQuery.sap.log.debug("Tile Intent was resolved to the following target",JSON.stringify(T,null,3),"sap.ushell.services.ClientSideTargetResolution");}).fail(function(M){D.reject(M);});});return D.promise();};C.prototype._determineResultProcessor=function(m){var o=m.inbound,r=o&&o.resolutionResult;function a(P,R){jQuery.sap.log.debug("Resolution result will be constructed via "+P+" processor",R,"sap.ushell.services.ClientSideTargetResolution");}if(!o||!r){a("FALLBACK","the inbound or the inbound resolutionResult member was not available");return this._constructFallbackResolutionResult.bind(this);}if(r.applicationType==="SAPUI5"){a("SAPUI5","inbound resolutionResult had SAPUI5 applicationType");return this._constructSAPUI5ResolutionResult.bind(this);}var e=this._isFullLocalWDAResolution(m);if(e){a("WDA full url construction");return this._constructFullWDAResolutionResult.bind(this);}var h=this._isLocalWDAResolution(m);if(h){a("WDA");return this._constructWDAResolutionResult.bind(this);}var j=this._isFullLocalWebguiResolution(m);if(j){a("NON-WRAPPED WEBGUI full url construction");return this._constructFullWebguiResolutionResult.bind(this);}var k=this._isLocalWebguiNowrapResolution(m);if(k){a("NON-WRAPPED WEBGUI");return this._constructWebguiNowrapResult.bind(this);}var p=this._isLocalWebguiWrapResolution(m);if(p){a("WRAPPED WEBGUI");return this._constructWebguiWrapResult.bind(this);}var q=this._isLocalNativeWebguiNowrapResolution(m);if(q){a("NATIVE NON-WRAPPED WEBGUI");return this._constructNativeWebguiNowrapResult.bind(this);}var s=this._isLocalNativeWebguiWrapResolution(m);if(s){a("NATIVE WRAPPED WEBGUI");return this._constructNativeWebguiWrapResult.bind(this);}if(r.applicationType==="URL"){a("URL","inbound resolutionResult had URL applicationType");return this._constructURLResolutionResult.bind(this);}a("FALLBACK","could not apply any result processor to inbound resolutionResult: "+JSON.stringify(r,null,"   "));return this._constructFallbackResolutionResult.bind(this);};C.prototype._stripURI=function(U,s,a){var D=new jQuery.Deferred(),t=this;if(typeof s==="undefined"){this._stripURIWithSystemAlias(U,s,a,undefined).fail(function(e){D.reject(e);}).done(function(N){D.resolve(N);});return D.promise();}this._resolveSystemAlias(s).fail(function(e){D.reject(e);}).done(function(r){t._stripURIWithSystemAlias(U,s,a,r).fail(function(e){D.reject(e);}).done(function(N){D.resolve(N);});});return D.promise();};C.prototype._resolveSystemAlias=function(s){if(typeof this._oAdapter.resolveSystemAlias!=="function"){return new jQuery.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return this._oAdapter.resolveSystemAlias(s);};C.prototype._stripURIWithSystemAlias=function(U,s,a,r){var t=this,o,e,T,h,D=new jQuery.Deferred(),p=new jQuery.Deferred();U.protocol("");U.hostname("");U.port("");t._removeParametersFromURI(U,["sap-client","sap-language"]);if(!jQuery.isPlainObject(r)||typeof s!=="string"){return D.resolve(U).promise();}e=t._selectSystemAliasDataName(r,new URI(window.location.toString()).protocol());o=r[e];h=(typeof o.pathPrefix==="string")&&o.pathPrefix;if(h!==""){p.resolve(h);}else{this._resolveSystemAlias("").fail(function(E){D.reject(E);}).done(function(R){var j=R[e];p.resolve(j.pathPrefix);});}p.fail(function(E){D.reject(E);}).done(function(h){if(h&&h.length>0){T=U.path();T=T.replace(h,"");if(T.indexOf("/")!==0){T="/"+T;}U.path(T);}if(a==="NATIVEWEBGUI"&&r.hasOwnProperty("rfc")){T=U.path();T=T.split(";").filter(function(P){return P.indexOf("~sysid=")!==0&&P.indexOf("~service=")!==0&&P.indexOf("~loginGroup=")!==0&&P.indexOf("~messageServer=")!==0&&P.indexOf("~sncNameR3=")!==0&&P.indexOf("~sncQoPR3=")!==0;}).join(";");U.path(T);}D.resolve(U);});return D.promise();};C.prototype._removeParametersFromURI=function(U,p){var B={},t;p.forEach(function(P){B[P]=true;});t=U.query();t=t.split("&").filter(function(P){var s=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(s);}).join("&");U.query(t);};C.prototype._spliceSapSystemIntoUrlURI=function(U,s,a){var t=this,D=new jQuery.Deferred();if(s===g||typeof s==="undefined"){if(this._isAbsoluteURI(U)){return D.resolve(U);}t._applyAliasToURI(a,U,"URL").fail(function(e){D.reject(e);}).done(function(o){D.resolve(o);});return D.promise();}this._resolveSystemAlias(s).fail(function(e){D.reject(e);}).done(function(r){var e=t._selectSystemAliasDataName(r,new URI(window.location.toString()).protocol()),o=r[e],h;if((U.protocol()||"").toLowerCase()===e&&(U.hostname()||"")===o.host&&(U.path().indexOf(o.pathPrefix)===0)){U.protocol("");U.hostname("");h=U.path().replace(o.pathPrefix,"");U.path(h);t._removeParametersFromURI(U,["sap-language","sap-client"]);t._applyAliasToURI(a,U,"URL").fail(function(E){D.reject(E);}).done(function(j){D.resolve(j);});}else{D.resolve(U);}});return D.promise();};C.prototype._spliceSapSystemIntoURI=function(U,s,a,e,h){var D=new jQuery.Deferred(),t=this;if(h!==O.apply&&h!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+h+"'");}if(h===O.applied&&(typeof a==="undefined"||s===a)){return D.resolve(U).promise();}if(h===O.apply&&typeof s==="undefined"&&typeof a==="undefined"){return D.resolve(U).promise();}if(e==="URL"&&h==O.applied){return this._spliceSapSystemIntoUrlURI(U,s,a);}(new Promise(function(r){if(h===O.apply){r({targetUri:U,alias:a?a:s});return;}t._stripURI(U,s,e).fail(function(E){D.reject(E);}).done(function(o){r({targetUri:o,alias:a});});})).then(function(A){t._applyAliasToURI(A.alias,A.targetUri,e).fail(function(E){D.reject(E);}).done(function(o){D.resolve(o);});});return D.promise();};C.prototype._applyAliasToURI=function(s,U,a){var t=this,N=U,D=new jQuery.Deferred();this._resolveSystemAlias(s).fail(function(e){D.reject(e);}).done(function(r){var v=t._validateResolvedSystemAlias(r);if(!v.isValid){t._reportResolvedSystemAliasValidationErrors(v);D.reject("Invalid system alias definition");return D;}var e=t._selectSystemAliasDataName(r,new URI(window.location.toString()).protocol()),o=r[e],q,L,h;if(s===g&&o.host===""&&(o.port===0||o.port==="")){e="";}N.protocol(e);N.hostname(o.host);N.port(o.port);t._interpolatePathPrefixIntoURI(N,a,o.pathPrefix).fail(function(E){D.reject(E);}).done(function(N){q=N.query();if(typeof r.client==="string"&&r.client!==""){q=q+(q.length>0?"&":"")+"sap-client="+r.client;}if(typeof r.language==="string"&&r.language!==""){L=r.language;}else{h=sap.ushell.Container.getUser();if(!h){jQuery.sap.log.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");L="en";}else{L=h.getLanguage();}}q=q+(q.length>0?"&":"")+"sap-language="+L;N.query(q);N=t._interpolateNativeWebguiDataIntoURI(r,N,a);D.resolve(N);});});return D.promise();};C.prototype._interpolateNativeWebguiDataIntoURI=function(s,U,a){var e,t,h,p;if(s.hasOwnProperty("rfc")&&a==="NATIVEWEBGUI"){h=s.rfc;e=!!h.systemId;if(e){t=[h.systemId&&("~sysid="+h.systemId),h.loginGroup&&("~loginGroup="+h.loginGroup),h.sncNameR3&&("~messageServer="+encodeURIComponent(h.sncNameR3)),h.sncNameR3&&("~sncNameR3="+encodeURIComponent(h.sncNameR3)),h.sncQoPR3&&("~sncQoPR3="+h.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{t=[h.service&&("~service="+h.service),h.sncNameR3&&("~sncNameR3="+encodeURIComponent(h.sncNameR3)),h.sncQoPR3&&("~sncQoPR3="+h.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}p=U.path()+";"+t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});U.path(p);U._parts.path=p;}return U;};C.prototype._interpolatePathPrefixIntoURI=function(U,s,p){var t=this,D=new jQuery.Deferred(),T;if(s==="URL"&&p.length===0){return D.resolve(U).promise();}function a(P){var r=P+U.path();U.path(r.replace(/\/+/g,"/"));D.resolve(U);}if(p.length>0){if((s==="WDA"||s==="WEBGUI")&&U.path().indexOf("~canvas")>=0){T=U.path();T="/~canvas"+T.split("~canvas")[1];U.path(T);}a(p);}else{this._resolveSystemAlias("").fail(function(e){D.reject(e);}).done(function(r){var e=t._selectSystemAliasDataName(r,new URI(window.location.toString()).protocol()),P=r[e].pathPrefix;a(P);});}return D.promise();};C.prototype._selectSystemAliasDataName=function(s,B){if(s.hasOwnProperty("https")){return"https";}if(s.hasOwnProperty("http")){return"http";}jQuery.sap.log.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;};C.prototype._getRenameParameterName=function(p,s,P){if(!P||!jQuery.isArray(P)){return p;}if(s&&s.parameters&&s.parameters[p]&&s.parameters[p].renameTo){return s.parameters[p].renameTo;}return p;};C.prototype._mapParameterNamesAndRemoveObjects=function(m){var t=this,N={},o=m.intentParamsPlusAllDefaults;Object.keys(o).sort().forEach(function(p){var r=t._getRenameParameterName(p,m.inbound.signature,o[p]);if(jQuery.isArray(m.intentParamsPlusAllDefaults[p])){if(N[r]){jQuery.sap.log.error("collision of values during parameter mapping : \""+p+"\" -> \""+r+"\"");}else{N[r]=m.intentParamsPlusAllDefaults[p];}}});m.mappedIntentParamsPlusSimpleDefaults=N;};C.prototype._constructFullWDAResolutionResult=function(m,B,s){var t=this,o=jQuery.sap.getObject("inbound.resolutionResult",undefined,m),D=new jQuery.Deferred();t._buildWdaURI(o["sap.wda"].applicationId,o["sap.wda"].configId,{"sap-system":[o.systemAlias]}).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;t._constructWDAURLParameters(M,m.mappedDefaultedParamNames).then(function(U){var a=t._appendParametersToURI(w,U);var e=M["sap-system"]&&M["sap-system"][0];var r=t._createWDAResolutionResult(m.inbound,a,e);u.shallowMergeObject(m.resolutionResult,r);D.resolve(m);},function(e){D.reject(e);});}).fail(function(e){D.reject(e);});return D.promise();};C.prototype._constructFullWebguiResolutionResult=function(m,B,s){var t=this,o=m.inbound,r=o&&o.resolutionResult,D=new jQuery.Deferred();this._buildNativeWebGuiURI(o.resolutionResult["sap.gui"].transaction,r.systemAlias).done(function(U){t._mapParameterNamesAndRemoveObjects(m);t._blendParamsIntoNativeWebGUI(m,U);if(m.resolutionResult&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){m.resolutionResult["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}m.resolutionResult["sap-system"]=r.systemAlias;D.resolve(m);}).fail(function(M){D.reject(M);});return D.promise();};C.prototype._constructWDAResolutionResult=function(m,B,s,a){var t=this,o=m.inbound,r=o&&o.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults,D=new jQuery.Deferred();var w=new URI(a);var e=M["sap-system"]&&M["sap-system"][0];Promise.all([(new Promise(function(h){t._spliceSapSystemIntoURI(w,r.systemAlias,e,"WDA",r.systemAliasSemantics||O.applied).fail(D.reject.bind(D)).done(function(w){h(w);});})),t._constructWDAURLParameters(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var U=R[1];var h=t._appendParametersToURI(W,U);var r=t._createWDAResolutionResult(o,h,e);u.shallowMergeObject(m.resolutionResult,r);D.resolve(m);},function(E){D.reject(E);});return D.promise();};C.prototype._createWDAResolutionResult=function(o,s,a){var r={"sap-system":a,url:s,text:o.title,applicationType:"NWBC"};["additionalInformation","applicationDependencies"].forEach(function(p){if(o.resolutionResult.hasOwnProperty(p)){r[p]=o.resolutionResult[p];}});return r;};C.prototype._appendParametersToURI=function(U,s){var p=U.search();if(s){p=p+((p.indexOf("?")<0)?"?":"&")+s;}return U.search(p).toString();};C.prototype._constructWDAURLParameters=function(p,m){var t=this;return new Promise(function(r,R){var e=jQuery.extend(true,{},p);if(m.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete e["sap-system"];sap.ushell.Container.getService("ShellNavigation").compactParams(e,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params"],undefined,true).fail(function(E){R(E);}).done(function(E){var s=t._getURLParsing().paramsToString(E);r(s);});});};C.prototype._constructWebguiNowrapResult=function(m,B,s,a){var t=this,o=m.inbound,r=o&&o.resolutionResult,D=new jQuery.Deferred();var w=new URI(a);var e=jQuery.extend(true,{},m.mappedIntentParamsPlusSimpleDefaults);var h=e["sap-system"]&&e["sap-system"][0];m.resolutionResult["sap-system"]=h;delete e["sap-system"];var U=t._getUnnecessaryWebguiParameters(e,o||{});this._removeObjectKey(e,U);t._spliceSapSystemIntoURI(w,r.systemAlias,h,"WEBGUI",r.systemAliasSemantics||O.applied).fail(D.reject.bind(D)).done(function(w){var E=t._getURLParsing().paramsToString(e);var p=w.search();if(E){p=p+((p.indexOf("?")<0)?"?":"&")+E;}w.search(p);["additionalInformation","applicationDependencies"].forEach(function(P){if(o.resolutionResult.hasOwnProperty(P)){m.resolutionResult[P]=o.resolutionResult[P];}});m.resolutionResult.url=w.toString();m.resolutionResult.text=o.title;m.resolutionResult.applicationType="NWBC";D.resolve(m);});return D.promise();};C.prototype._constructWebguiWrapResult=function(m,B,s,a){var t=this,o=m.inbound,r=o&&o.resolutionResult,D=new jQuery.Deferred();var w=new URI(a);var e=jQuery.extend(true,{},m.mappedIntentParamsPlusSimpleDefaults);var h=e["sap-system"]&&e["sap-system"][0];m.resolutionResult["sap-system"]=h;delete e["sap-system"];t._spliceSapSystemIntoURI(w,r.systemAlias,h,"WEBGUI",r.systemAliasSemantics||O.applied).fail(D.reject.bind(D)).done(function(w){var p=w.search();p=t._injectEffectiveParametersIntoWebguiPobjectParam(p,e,"&","=");w.search(p);["additionalInformation","applicationDependencies"].forEach(function(P){if(o.resolutionResult.hasOwnProperty(P)){m.resolutionResult[P]=o.resolutionResult[P];}});m.resolutionResult.url=w.toString();m.resolutionResult.text=o.title;m.resolutionResult.applicationType="NWBC";D.resolve(m);});return D.promise();};C.prototype._injectEffectiveParametersIntoWebguiPobjectParam=function(q,p,Q,s){var a,P="P_OBJECT"+s,m=132;var e=this._getURLParsing().privparamsToString(p,"%25","%21");if(!e){return q;}var h="";this._amendGuiParam("P_OBJECT",q,Q,s,function(j){var k=j.replace(P,"");h=decodeURIComponent(k);if(h.length>0){h=h+"%25";}return P;});e=h+e;var o={pObjX:"",pObject:""};e.match(new RegExp(".{1,"+m+"}","g")).map(function(j){return encodeURIComponent(j);}).forEach(function(j,G){var k="P_OBJECT";var r="pObject";if(G>0){k="P_OBJ"+G;r="pObjX";}var t=o[r].length===0?"":Q;o[r]=o[r]+t+k+s+j;});a=[o.pObjX,o.pObject].filter(function(j){return j.length>0;}).join(Q);var A=this._amendGuiParam("P_OBJECT",q,Q,s,function(j){return a;});if(A.found){return A.query;}return q+(q.length===0?"":Q)+a;};C.prototype._amendGuiParam=function(t,q,Q,s,a){var e=false,p=t+s;var A=q.split(Q).map(function(P){if(P.indexOf(p)!==0){return P;}e=true;return a(P);}).filter(function(P){return typeof P!=="undefined";}).join(Q);return{found:e,query:A};};C.prototype._parseWebguiTransactionQueryParam=function(t){var T="^(.+?)(%20|(%20)(.+))?$",r=new RegExp(T,"i"),s,p={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var P=t.split("=");if(P.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+t};}if(P.length<2||typeof P[1]==="undefined"||P[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+t+" instead."};}p.transactionParamName=P[0];s=P[1];var m=s.match(r);if(!m){return{"error":"Cannot parse ~transaction query parameter value.","details":s+" should match /"+T+"/"};}p.transactionCode=m[1];if(m[2]&&m[2]!=="%20"){var a=m[4]||"";a.split("%3b").forEach(function(N){var e=N.split("%3d"),h=e[0];if(h&&typeof h==="string"&&h.length>0){p.parameters.push({name:h,value:e[1]});}});}p.hasParameters=false;if(p.parameters.length>0){p.hasParameters=true;p.transactionCode=p.transactionCode.replace(/^[*]/,"");}return p;};C.prototype._injectEffectiveParametersIntoWebguiQueryParam=function(t,p){var P=this._parseWebguiTransactionQueryParam(t);if(P.error){jQuery.sap.log.error(P.error,P.details,"sap.ushell.services.ClientSideTargetResolution");return t;}var a=P.parameters.map(function(e){return e.name.toUpperCase()+"%3d"+e.value;});var o={};Object.keys(p).forEach(function(k){o[k.toUpperCase()]=p[k];});var s=this._getURLParsing().privparamsToString(o,"%3b","%3d");if(s){a.push(s);}var h=a.length>0;return P.transactionParamName+"="+(h?"*":"")+P.transactionCode+(h?"%20":"")+a.join("%3b");};C.prototype._constructNativeWebguiWrapResult=function(m,B,s,a){var t=this,o=m.inbound,r=o&&o.resolutionResult,D=new jQuery.Deferred();var w=new URI(a);var e=jQuery.extend(true,{},m.mappedIntentParamsPlusSimpleDefaults);var h=e["sap-system"]&&e["sap-system"][0];m.resolutionResult["sap-system"]=h;delete e["sap-system"];t._spliceSapSystemIntoURI(w,r.systemAlias,h,"NATIVEWEBGUI",r.systemAliasSemantics||O.applied).fail(D.reject.bind(D)).done(function(w){var p=w.search();var P=p.split("&").map(function(q){var j;if(q.indexOf("?%7etransaction")===0||q.indexOf("%7etransaction")===0){j=t._injectEffectiveParametersIntoWebguiPobjectParam(q,e,"%3b","%3d");return j;}return q;}).join("&");w.search(P);["additionalInformation","applicationDependencies"].forEach(function(j){if(o.resolutionResult.hasOwnProperty(j)){m.resolutionResult[j]=o.resolutionResult[j];}});m.resolutionResult.url=w.toString();m.resolutionResult.text=o.title;m.resolutionResult.applicationType="TR";D.resolve(m);});return D.promise();};C.prototype._isWebguiBusinessParameter=function(N,v){var a;if(arguments.length===1){a=N.split(/[=](.+)?/);if(a.length>1){return this._isWebguiBusinessParameter.apply(this,a);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");};C.prototype._getWebguiNonBusinessParameters=function(p){var t=this,N;N=c.filterObject(p,function(k,v){return!t._isWebguiBusinessParameter(k,v);});return N;};C.prototype._getWebguiBusinessParameters=function(p){var B=c.filterObject(p,this._isWebguiBusinessParameter);return B;};function i(p,o){return o&&o.signature&&o.signature&&o.signature.parameters&&o.signature.parameters[p]&&o.signature.parameters[p].required===true;}C.prototype._getUnnecessaryWebguiParameters=function(e,o){var a=i("DYNP_OKCODE",o)||i("DYNP_NO1ST",o);var B=[];if(a){return[];}var h=this._getWebguiBusinessParameters(e);function j(s){return s.toUpperCase();}var N=Object.keys(h).map(j).sort();function k(A,m){if(A.length!==m.length){return false;}return A.every(function(U,p){return A[p]==m[p];});}if(k(["DYNP_NO1ST","DYNP_OKCODE"],N)||k(["DYNP_OKCODE"],N)||k(["DYNP_NO1ST"],N)){B=Object.keys(h);}return B;};C.prototype._constructNativeWebguiNowrapResult=function(m,B,s,a){var t=this,o=m.inbound,r=o&&o.resolutionResult,D=new jQuery.Deferred(),e={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var w=new URI(a);var E=jQuery.extend(true,{},m.mappedIntentParamsPlusSimpleDefaults);var h=E["sap-system"]&&E["sap-system"][0];m.resolutionResult["sap-system"]=h;Object.keys(E).forEach(function(p){if(e[p.toLowerCase()]){delete E[p];}});t._spliceSapSystemIntoURI(w,r.systemAlias,h,"NATIVEWEBGUI",r.systemAliasSemantics||O.applied).fail(D.reject.bind(D)).done(function(w){t._blendParamsIntoNativeWebGUI(m,w);D.resolve(m);});return D.promise();};C.prototype._removeObjectKey=function(o,k){k.forEach(function(K){delete o[K];});};C.prototype._blendParamsIntoNativeWebGUI=function(m,w){var t=this,o=m.inbound,a={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var e=jQuery.extend(true,{},m.mappedIntentParamsPlusSimpleDefaults);var s=e["sap-system"]&&e["sap-system"][0];m.resolutionResult["sap-system"]=s;Object.keys(e).forEach(function(j){if(a[j.toLowerCase()]){delete e[j];}});var U=t._getUnnecessaryWebguiParameters(e,o||{});this._removeObjectKey(e,U);var E=this._getWebguiNonBusinessParameters(e);this._removeObjectKey(e,Object.keys(E));var p=w.search();var P=p.split("&").map(function(q){var N;if(!t._isWebguiBusinessParameter(q)){if(q.indexOf("=")>=0){N=q.split("=");if(!E.hasOwnProperty(N[0])){E[N[0]]=N[1];}}else{jQuery.sap.log.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var j;if(q.indexOf("?%7etransaction")===0||q.indexOf("%7etransaction")===0){j=t._injectEffectiveParametersIntoWebguiQueryParam(q,e,"%3b","%3d");return j;}return q;}).filter(function(j){return typeof j!=="undefined";}).join("&");var h=t._getURLParsing().paramsToString(E);P=[P,h.replace("~","%7e")].join("&");w.search(P);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(j){if(o.resolutionResult.hasOwnProperty(j)){m.resolutionResult[j]=o.resolutionResult[j];}});m.resolutionResult.url=w.toString();m.resolutionResult.text=o.title;m.resolutionResult.applicationType="TR";return m;};C.prototype._constructSAPUI5ResolutionResult=function(m,B,s,a){var o=m.inbound,D=new jQuery.Deferred(),U,e,E;["applicationType","additionalInformation","applicationDependencies"].forEach(function(p){if(o.resolutionResult.hasOwnProperty(p)){m.resolutionResult[p]=o.resolutionResult[p];}});m.resolutionResult.url=a;if(m.resolutionResult.applicationDependencies&&typeof m.resolutionResult.url==="undefined"){m.resolutionResult.url="";}if(typeof m.resolutionResult.url==="undefined"){return D.reject("Cannot resolve intent: url was not specified in matched inbound").promise();}E=jQuery.extend(true,{},m.mappedIntentParamsPlusSimpleDefaults);m.resolutionResult.reservedParameters={};var r={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true};Object.keys(r).forEach(function(N){var v=E[N];if(v){delete E[N];m.resolutionResult.reservedParameters[N]=v;}});m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(h){return!r[h];});if(m.mappedDefaultedParamNames.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m.mappedDefaultedParamNames)];}e=E["sap-system"]&&E["sap-system"][0];m.resolutionResult["sap-system"]=e;m.effectiveParameters=E;U=this._getURLParsing().paramsToString(E);if(U){m.resolutionResult.url=a+((a.indexOf("?")<0)?"?":"&")+U;}if(typeof o.resolutionResult.ui5ComponentName!=="undefined"){m.resolutionResult.ui5ComponentName=o.resolutionResult.ui5ComponentName;}m.resolutionResult.text=o.title;D.resolve(m);return D.promise();};C.prototype._isAbsoluteURI=function(U){return(U.protocol()||"").length>0;};C.prototype._absoluteUrlDefinedByUser=function(U,s,a){if(!a||a===O.applied){return this._isAbsoluteURI(U)&&!s;}if(a===O.apply){return this._isAbsoluteURI(U);}throw new Error("Invalid system alias semantics: '"+a+"'");};C.prototype._constructURLResolutionResult=function(m,B,s,a){var t=this,o=m.inbound,r=o&&o.resolutionResult,D=new jQuery.Deferred();var U=new URI(a);var e=jQuery.extend(true,{},m.mappedIntentParamsPlusSimpleDefaults);if(m.inbound&&m.inbound.action==="launchURL"&&m.inbound.semanticObject==="Shell"){delete e["sap-external-url"];}var h=e["sap-system"]&&e["sap-system"][0];m.resolutionResult["sap-system"]=h;delete e["sap-system"];(new Promise(function(j){if(t._absoluteUrlDefinedByUser(U,r.systemAlias,r.systemAliasSemantics)){j(a);}else{t._spliceSapSystemIntoURI(U,r.systemAlias,h,"URL",r.systemAliasSemantics||O.applied).fail(D.reject.bind(D)).done(function(k){var p=k.toString();j(p);});}})).then(function(j){var p=t._getURLParsing().paramsToString(e);return t._appendParametersToUrl(p,j);}).then(function(j){["additionalInformation","applicationDependencies"].forEach(function(p){if(o.resolutionResult.hasOwnProperty(p)){m.resolutionResult[p]=o.resolutionResult[p];}});m.resolutionResult.url=j;m.resolutionResult.text=o.title;m.resolutionResult.applicationType="URL";D.resolve(m);});return D.promise();};C.prototype._appendParametersToUrl=function(p,U){var s,a;if(p){var e=U.match(/#.*/);if(e){a=e;s=U.replace(e,"");}else{s=U;a="";}U=s+((U.indexOf("?")<0)?"?":"&")+p+a;}return U;};C.prototype._constructFallbackResolutionResult=function(m,B,s){var D=new jQuery.Deferred(),e={},a;Object.keys(m.intentParamsPlusAllDefaults).forEach(function(p){if(jQuery.isArray(m.intentParamsPlusAllDefaults[p])){e[p]=m.intentParamsPlusAllDefaults[p];}});a=m.mappedDefaultedParamNames||m.defaultedParamNames;if(a.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(a)];}if(typeof B!=="function"){jQuery.sap.log.error("Cannot resolve hash fragment",s+" has matched an inbound that cannot be resolved client side"+" and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");D.reject("Cannot resolve hash fragment: no fallback provided.");return D.promise();}jQuery.sap.log.warning("Cannot resolve hash fragment client side",s+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");B(s,jQuery.extend(true,{},m.inbound),e).done(function(r){["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(p){if(r.hasOwnProperty(p)){m.resolutionResult[p]=r[p];}});D.resolve(m);}).fail(D.reject.bind(D));return D.promise();};C.prototype.getDistinctSemanticObjects=function(){var D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(o){var s={};o.getAllInbounds().forEach(function(a){if(typeof a.semanticObject==="string"&&a.semanticObject!=="*"&&!a.hideIntentLink&&a.semanticObject.length>0){s[a.semanticObject]=true;}});D.resolve(Object.keys(s).sort());},function(){D.reject.apply(D,arguments);});return D.promise();};C.prototype.getLinks=function(a){var N,t=this,s,p,e,D=new jQuery.Deferred(),o;if(arguments.length===1&&jQuery.isPlainObject(arguments[0])){N=arguments[0];o=jQuery.extend(true,{},N);["action","semanticObject"].forEach(function(A){if(N.hasOwnProperty(A)){o[A]=N[A];}});if(o.appStateKey){o.params=o.params||{};o.params["sap-xapp-state"]=[o.appStateKey];delete o.appStateKey;}}else if(arguments.length<=3){jQuery.sap.log.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");s=arguments[0];p=arguments[1];e=arguments[2];o={semanticObject:s,params:p,ignoreFormFactor:e};}else{return D.reject("invalid arguments for getLinks").promise();}this._oInboundProvider.getInbounds().then(function(h){t._getLinks(o,h).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};C.prototype._validateGetSemanticObjectLinksArgs=function(a){var s=a.semanticObject,A=a.action,e=!a.hasOwnProperty("action");if(typeof s!=="undefined"||e){if(typeof s!=="string"){jQuery.sap.log.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(s)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(e&&s.match(/^\s+$/)){jQuery.sap.log.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+s+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(!e&&s.length===0){jQuery.sap.log.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+s+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}}if(typeof A!=="undefined"){if(typeof A!=="string"){jQuery.sap.log.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(A)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}if(A.length===0){jQuery.sap.log.error("invalid input for _getLinks","the action must not be an empty string, got '"+A+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}}return undefined;};C.prototype._getLinks=function(a,o){var s=a.semanticObject,A=a.action,p=a.params,w=!!a.withAtLeastOneUsedParam,t=!!a.treatTechHintAsFilter,e=a.ignoreFormFactor,h=a.hasOwnProperty("sortResultsBy")?a.sortResultsBy:"intent";if(a.hasOwnProperty("sortResultOnTexts")){jQuery.sap.log.warning("the parameter 'sortResultOnTexts' was experimantal and is no longer supported","getLinks results will be sorted by '"+h+"'","sap.ushell.services.ClientsideTargetResolution");}var j={bExcludeTileInbounds:true};var E=this._validateGetSemanticObjectLinksArgs(a);if(a.tags){j.tags=a.tags;}if(E){return new jQuery.Deferred().reject(E).promise();}if(s==="*"){return jQuery.when([]);}function k(U,p){var B=U.paramsToString(p);return B?"?"+B:"";}var U=this._getURLParsing(),D=new jQuery.Deferred(),m=u.getFormFactor(),q=U.parseParameters(k(U,p)),r={semanticObject:(s===""?undefined:s),action:A,formFactor:(e?undefined:m),params:q};if(t){r.treatTechHintAsFilter=true;}this._getMatchingInbounds(r,o,j).done(function(M){var v={},R=M.map(function(y){var z=s||y.inbound.semanticObject,B="#"+z+"-"+y.inbound.action,N;if(z==="*"){return undefined;}if(y.inbound.action==="*"){return undefined;}if(y.inbound&&y.inbound.hasOwnProperty("hideIntentLink")&&y.inbound.hideIntentLink===true){return undefined;}if(!v.hasOwnProperty(B)){v[B]={matchingInbound:y.inbound,count:1};if(y.inbound.signature.additionalParameters==="ignored"){N=c.filterObjectKeys(q,function(P){return(P.indexOf("sap-")===0)||y.inbound.signature.parameters.hasOwnProperty(P);},false);}else{N=q;}if(w){var G=Object.keys(N).some(function(P){return P.indexOf("sap-")!==0;});if(!G){v[B].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined;}}var J=c.inboundSignatureMeetsParameterOptions(y.inbound.signature.parameters,a.paramsOptions||[]);if(!J){v[B].hideReason="inbound signature does not meet the requested parameter filter options";return undefined;}var K={"intent":B+k(U,N),"text":y.inbound.title};if(y.inbound.icon){K.icon=y.inbound.icon;}if(y.inbound.subTitle){K.subTitle=y.inbound.subTitle;}if(y.inbound.shortTitle){K.shortTitle=y.inbound.shortTitle;}var L=jQuery.sap.getObject('inbound.signature.parameters.sap-tag.defaultValue.value',undefined,y);if(L){K.tags=[L];}return K;}else{v[B].count++;}return undefined;}).filter(function(y){return typeof y==="object";});if(h!=="priority"){R.sort(function(G,y){return G[h]<y[h]?-1:1;});}if(R.length===0){jQuery.sap.log.debug("_getLinks returned no results");}else if(jQuery.sap.log.getLevel()>=jQuery.sap.log.Level.DEBUG){if(jQuery.sap.log.getLevel()>=jQuery.sap.log.Level.TRACE){var x=[];var H=[];R.forEach(function(y){var z=y.intent.split("?")[0];if(v[z].hideReason){H.push(["-",z+"("+v[z].hideReason+")\n"," text:",y.text+"\n"," full intent:",y.intent].join(" "));}else{x.push(["-",z,v[z].count>1?"("+(v[z].count-1)+" others matched)\n":"\n","text:",y.text+"\n","full intent:",y.intent].join(" "));}});jQuery.sap.log.debug("_getLinks filtered to the following unique intents:","\n"+x.join("\n"),"sap.ushell.services.ClientSideTargetResolution");jQuery.sap.log.debug("_getLinks would have also returned the following unique intents, but something prevented this:",H.join("\n"),"sap.ushell.services.ClientSideTargetResolution");}else{jQuery.sap.log.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(v).join("\n - "),"sap.ushell.services.ClientSideTargetResolution");}}D.resolve(R);}).fail(D.reject.bind(D));return D.promise();};C.prototype._getMatchingInbounds=function(s,o,a){var t=this,T,A,L,e,h,E,p,D=new jQuery.Deferred();if(a){T=a.tags;E=a.bExcludeTileInbounds;}c.whenDebugEnabled(function(){L=++t._iLogId;});l.begin(function(){function j(m){var q=m.action||(typeof m.action==="undefined"?"<any>":"<invalid-value>");var r=m.semanticObject||(typeof m.semanticObject==="undefined"?"<any>":"<invalid-value>");return t._getURLParsing().constructShellHash({semanticObject:r,action:q,params:m.params});}var k=j(s);return{logId:L,title:"Matching Intent '"+k+"' to inbounds (form factor: "+(s.formFactor||'<any>')+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]};});h=s.semanticObject;A=s.action;e=T?o.getSegmentByTags(T):o.getSegment(h,A);if(E){p=e.filter(function(j){return!j.tileResolutionResult||!j.tileResolutionResult.isCustomTile;});}else{p=e;}f.match(s,p,{},c.isDebugEnabled()).then(function(j){l.log(function(){return{logId:L,stage:1,prefix:"\u2718",lines:Object.keys(j.noMatchReasons||{}).map(function(k){return k+" "+j.noMatchReasons[k];})};});l.log(function(){var k=j.matchResults.map(function(M){return F.formatInbound(M.inbound);});return{logId:L,stage:1,prefix:k.length>0?"\u2705":"\u2718",lines:k.length>0?k:["No inbound was matched"]};});var m=Object.keys(j.missingReferences||[]);if(m.length===0){l.log(function(){return{logId:L,stage:2,prefix:"\u2705",line:"No need to resolve references"};});return new jQuery.Deferred().resolve({matchResults:j.matchResults,referencesToInclude:null}).promise();}l.log(function(){return{logId:L,stage:2,line:"@ Must resolve the following references:",prefix:"\u2022",lines:m};});var r=new jQuery.Deferred();sap.ushell.Container.getService("ReferenceResolver").resolveReferences(m).done(function(R){l.log(function(){return{logId:L,stage:2,line:"\u2705 resolved references with the following values:",prefix:"\u2022",lines:Object.keys(R).map(function(k){return k+": '"+R[k]+"'";})};});r.resolve({matchResults:j.matchResults,referencesToInclude:R});}).fail(function(k){l.log(function(){return{logId:L,stage:2,prefix:"\u274c",line:"Failed to resolve references: "+k};});D.resolve([]);});return r.promise();}).then(function(j){var m,M,r=j.referencesToInclude;if(!r){l.log(function(){return{logId:L,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"\u2705"};});return new jQuery.Deferred().resolve(j).promise();}M=j.matchResults;m=M.map(function(k){return k.inbound;});return f.match(s,m,r,0).then(function(k){l.log(function(){var M=k.matchResults||[];if(M.length>=1){return{logId:L,stage:3,line:"The following inbounds re-matched:",lines:M.map(function(q){return F.formatInbound(q.inbound);}),prefix:"\u2705"};}return{logId:L,stage:3,line:"No inbounds re-matched",prefix:"-"};});return k;});}).then(function(j){var m=j.matchResults||[];if(m.length<=1){l.log(function(){return{logId:L,stage:4,line:"Nothing to sort"};});D.resolve(m);return;}var k=f.sortMatchingResultsDeterministic(j.matchResults||[]);l.log(function(){var q=k.map(function(M){return F.formatInbound(M.inbound||{})+(M.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+M["sap-priority"]+"'"+"\n * 2 * Sort string: '"+M.priorityString+"\n * 3 * Deterministic blob: '"+f.serializeMatchingResult(M)+"'";});return{logId:L,stage:4,line:"Sorted inbounds as follows:",lines:q,prefix:".",number:true};});D.resolve(k);});return D.promise().then(function(m){l.end(function(){return{logId:L};});return m;});};C.prototype._isIntentSupportedOne=function(s,o){var D=new jQuery.Deferred(),a=this._getURLParsing().parseShellHash(s);if(s==="#"){D.resolve(true);return D.promise();}if(a===undefined){return D.reject("Could not parse shell hash '"+s+"'").promise();}a.formFactor=u.getFormFactor();this._getMatchingInbounds(a,o,{bExcludeTileInbounds:true}).done(function(t){D.resolve(t.length>0);}).fail(function(){D.reject();});return D.promise();};C.prototype.isIntentSupported=function(a){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(o){t._isIntentSupported(a,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};C.prototype._isIntentSupported=function(a,o){var t=this,D=new jQuery.Deferred(),s={};D.resolve();function e(h,j){s[h]={supported:j};}var r=[];a.forEach(function(h){var N=t._isIntentSupportedOne(h,o);N.fail(function(E){r.push(E);});N.done(function(j){e(h,j);});D=jQuery.when(D,N);});var R=new jQuery.Deferred();D.done(function(){R.resolve(s);}).fail(function(){R.reject("One or more input intents contain errors: "+r.join(", "));});return R.promise();};C.prototype.getUserDefaultParameterNames=function(){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(o){var r;try{r=t._getUserDefaultParameterNames(o.getAllInbounds());D.resolve(r);}catch(e){D.reject("Cannot get user default parameters from inbounds: "+e);}},function(){D.reject.apply(D,arguments);});return D.promise();};C.prototype._getUserDefaultParameterNames=function(a){var r={simple:{},extended:{}};a.forEach(function(t){var s=t.signature&&t.signature.parameters||[];Object.keys(s).forEach(function(p){var P=s[p],R,e,h,o;if(P){if(P.filter&&P.filter.format==="reference"){h=P.filter.value;}else if(P.defaultValue&&P.defaultValue.format==="reference"){h=P.defaultValue.value;}if(typeof h==="string"){o=sap.ushell.Container.getService("ReferenceResolver");R=o.extractUserDefaultReferenceName(h);if(typeof R==="string"){r.simple[R]={};}e=o.extractExtendedUserDefaultReferenceName(h);if(typeof e==="string"){r.extended[e]={};}}}});});return r;};C.prototype.getEasyAccessSystems=function(m){var r={},a,v,D;m=m||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[m]){return this._oHaveEasyAccessSystemsDeferreds[m].promise();}this._oHaveEasyAccessSystemsDeferreds[m]=new jQuery.Deferred();D=this._oHaveEasyAccessSystemsDeferreds[m];function e(o,s,v){return o&&o.semanticObject&&o.semanticObject==="Shell"&&o.action&&v[m][o.action]&&o.deviceTypes&&s!==undefined&&o.deviceTypes[s];}a={startGUI:{priority:3,appType:"TR"},startWDA:{priority:2,appType:"WDA"},startURL:{priority:1,appType:"URL"}};v={userMenu:{startGUI:true,startWDA:true,startURL:true},sapMenu:{startGUI:true,startWDA:true,startURL:false}};this._oInboundProvider.getInbounds().then(function(o){var L={};o.getAllInbounds().filter(function(h){return e(h,u.getFormFactor(),v);}).forEach(function(E){var s;if(jQuery.isPlainObject(E.signature.parameters["sap-system"])&&E.signature.parameters["sap-system"].hasOwnProperty("filter")){s=jQuery.sap.getObject("signature.parameters.sap-system.filter.value",undefined,E);}if(typeof s==="string"){var h=a[E.action].priority;var j=a[E.action].appType;if(!r[s]){L[s]=-1;r[s]={appType:{}};}if(L[s]<h){r[s].text=E.title;L[s]=h;}r[s].appType[j]=true;}else{jQuery.sap.log.warning("Cannot extract sap-system from easy access menu inbound: "+F.formatInbound(E),"This parameter is supposed to be a string. Got '"+s+"' instead.","sap.ushell.services.ClientSideTargetResolution");}});D.resolve(r);},function(){D.reject.apply(D,arguments);});return D.promise();};C.prototype._reportResolvedSystemAliasValidationErrors=function(v){jQuery.sap.log.error("Invalid system alias definition: "+v.debug,"ERRORS:"+v.errors.map(function(e){return"\n - "+e;}).join(""),"sap.ushell.services.ClientSideTargetResolution");};C.prototype._validateResolvedSystemAlias=function(r){function v(o){var e=[];if(typeof o.host!=="string"){e.push("host field must be a string");}if(typeof o.port!=="number"&&typeof o.port!=="string"){e.push("port field must be a number or a string");}if(typeof o.pathPrefix!=="string"){e.push("pathPrefix field must be a string");}return e;}var e=[],h=r.hasOwnProperty("https"),H=r.hasOwnProperty("http");if(!H&&!h){e.push("at least one of 'http' or 'https' fields must be defined");}if(h){v(r.https).forEach(function(E){e.push("https>"+E);});}if(H){v(r.http).forEach(function(E){e.push("http>"+E);});}if(e.length>0){return{isValid:false,errors:e,debug:JSON.stringify(r,null,3)};}return{isValid:true};};C.hasNoAdapter=false;return C;},true);sap.ui.predefine('sap/ushell/services/CommonDataModel',["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/ushell/services/ClientSideTargetResolution"],function(P){"use strict";var S="sap.ushell.services.CommonDataModel";function C(a,c,p,s){var t=this,o=new jQuery.Deferred();function f(m){o.reject(m);}this._oAdapter=a;this._oPersonalizationProcessor=new P();this._oSitePromise=o.promise();this._oContentProviderIndex={};a.getSite().done(function(b){t._oOriginalSite=jQuery.extend(true,{},b);a.getPersonalization().done(function(d){t._oPersonalizationProcessor.mixinPersonalization(b,d).done(function(e){t._oPersonalizedSite=t._ensureCompleteSite(e);o.resolve(t._oPersonalizedSite);}).fail(f);}).fail(f);}).fail(f);}C.prototype.getHomepageGroups=function(){var d=new jQuery.Deferred();this._oSitePromise.then(function(s){var g=(s&&s.site&&s.site.payload&&s.site.payload.groupsOrder)?s.site.payload.groupsOrder:[];d.resolve(g);});return d.promise();};C.prototype.getGroups=function(){var d=new jQuery.Deferred();this._oSitePromise.then(function(s){var g=[];Object.keys(s.groups).forEach(function(k){g.push(s.groups[k]);});d.resolve(g);});return d.promise();};C.prototype.getGroup=function(i){var d=new jQuery.Deferred();this._oSitePromise.then(function(s){var g=s.groups[i];if(g){d.resolve(g);}else{d.reject("Group "+i+" not found");}});return d.promise();};C.prototype.getSite=function(){return this._oSitePromise;};C.prototype.getGroupFromOriginalSite=function(g){var d=new jQuery.Deferred();if(typeof g==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[g]){d.resolve(jQuery.extend(true,{},this._oOriginalSite.groups[g]));}else{d.reject("Group does not exist in original site.");}return d.promise();};C.prototype.save=function(){var d=new jQuery.Deferred(),t=this;this._oPersonalizationProcessor.extractPersonalization(this._oPersonalizedSite,this._oOriginalSite).done(function(e){if(e){t._oAdapter._storePersonalizationData(e).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}});return d.promise();};function l(){var p=sap.ushell.Container.getService("PluginManager");return p.loadPlugins("ContentProvider");}C.prototype._getUnreferencedCatalogApplications=function(e){var u={};var a=Object.keys(e.applications).map(function(A){return e.applications[A]["sap.app"].id;}).reduce(function(i,A){i[A]=true;return i;},{});var c=e.catalogs;Object.keys(c).forEach(function(s){var A=c[s].payload.appDescriptors;A.map(function(o){return o.id;}).filter(function(b){return!a[b];}).forEach(function(b){if(!u.hasOwnProperty(s)){u[s]={};}u[s][b]=true;});});return u;};C.prototype._formatUnreferencedApplications=function(c,u){return"One or more apps from "+c+" content provider are not listed among the applications section of the extended site and will be discarded - "+Object.keys(u).map(function(s){var b=Object.keys(u[s]).map(function(U){return"'"+U+"'";});return"From catalog '"+s+"': "+b.join(", ");}).join("; ");};C.prototype._removeUnreferencedApplications=function(e,u){Object.keys(e.catalogs).forEach(function(c){var o=e.catalogs[c].payload;var a=o.appDescriptors;o.appDescriptors=a.filter(function(A){return u[c]&&!u[c][A.id];});});};C.prototype.getExtensionSites=function(){var t=this;var d=new jQuery.Deferred();l().done(function(){var c=Object.keys(t._oContentProviderIndex),T=c.length;if(T===0){d.resolve([]);return;}var g=c.map(function(s,i){var o=t._oContentProviderIndex[s];var G;try{G=o.getSite();if(!G||typeof G.then!=="function"){throw"getSite does not return a Promise";}}catch(e){G=Promise.reject("call to getSite failed: "+e);}return G.then(function(s,E){var a=jQuery.extend(true,{},E);var u=t._getUnreferencedCatalogApplications(E);if(Object.keys(u).length>0){var b=t._formatUnreferencedApplications(s,u);jQuery.sap.log.error(b,null,S);t._removeUnreferencedApplications(a,u);}var L={providerId:s,success:true,site:a};d.notify(L);return L;}.bind(null,s),function(s,E){return{providerId:s,success:false,error:E};}.bind(null,s));});Promise.all(g).then(function(L){d.resolve(L);});});return d.promise();};C.prototype.registerContentProvider=function(i,s){if(this._oContentProviderIndex[i]){jQuery.sap.log.error("a content provider with ID '"+i+"' is already registered",null,S);return;}this._oContentProviderIndex[i]=s;jQuery.sap.log.debug("ContentProvider '"+i+"' was registered",null,S);};C.prototype._ensureCompleteSite=function(p){if(p.groups){var g=p.groups;Object.keys(g).forEach(function(k){if(!g[k]){delete g[k];}else{if(!g[k].payload){g[k].payload={};}if(!g[k].payload.links){g[k].payload.links=[];}if(!g[k].payload.tiles){g[k].payload.tiles=[];}if(!g[k].payload.groups){g[k].payload.groups=[];}}});}return p;};C.prototype.getPlugins=(function(){var d,e,p;e=function(s,o){var a,n=Object.keys(o).length;if(n===0){return{};}if(!o.hasOwnProperty("Shell-plugin")){jQuery.sap.log.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+s+"'","plugin startup configuration cannot be determined correctly",S);return{};}if(n>1){jQuery.sap.log.warning("Multiple inbounds are defined for plugin '"+s+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",S);}a=jQuery.sap.getObject("signature.parameters",undefined,o["Shell-plugin"])||{};return Object.keys(a).reduce(function(r,N){var D=jQuery.sap.getObject(N+".defaultValue.value",undefined,a);if(typeof D==="string"){r[N]=D;}return r;},{});};d=function(o){Object.keys(o).filter(function(s){return typeof o[s]==="object";}).forEach(function(s){o[s]=d(o[s]);});return Object.freeze(o);};return function(o){if(o!==undefined){p=o;}if(p){return jQuery.when(p);}p={};return this.getSite().then(function(s){var a=s.applications||{};Object.keys(a).filter(function(A){return"plugin"===jQuery.sap.getObject("type",undefined,this[A]["sap.flp"]);},a).forEach(function(b){var c,f,g=this[b],h={};if(!jQuery.isPlainObject(g["sap.platform.runtime"])){jQuery.sap.log.error("Cannot find 'sap.platform.runtime' section for plugin '"+b+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else if(!jQuery.isPlainObject(g["sap.platform.runtime"].componentProperties)){jQuery.sap.log.error("Cannot find 'sap.platform.runtime/componentProperties' section for plugin '"+b+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else{h=g["sap.platform.runtime"].componentProperties;}p[b]={url:h.url,component:g["sap.ui5"].componentName};var i=jQuery.sap.getObject("crossNavigation.inbounds",undefined,g["sap.app"])||{};f=e(b,i);c=jQuery.extend(h.config||{},f);if(c){p[b].config=c;}if(h.asyncHints){p[b].asyncHints=h.asyncHints;}},a);return d(p);},function(E){return E;});};})();C.hasNoAdapter=false;return C;},true);sap.ui.predefine('sap/ushell/services/Container',['sap/ushell/utils','sap/ushell/System','sap/ushell/Ui5ServiceFactory','sap/ui/core/service/ServiceFactoryRegistry'],function(u,S,U,a){"use strict";var b="sap.ushell.services.Container",c="sap.ushell.Container.dirtyState.",C,p,f;function d(){close();}function r(){document.location="about:blank";}function g(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}function h(s){return(C.services&&C.services[s])||{};}function j(n,s,P){var A=h(n).adapter||{},e=A.module||g(s.getPlatform())+"."+n+"Adapter";jQuery.sap.require(e);return new(jQuery.sap.getObject(e))(s,P,{config:A.config||{}});}function k(A){var E=new sap.ui.base.EventProvider(),m=false,R=[],o={},s="sap.ushell.Container."+A.getSystem().getPlatform()+".remoteSystem.",n={},G,q,L=u.getLocalStorage(),t=new u.Map(),v="sap.ushell.Container."+A.getSystem().getPlatform()+".sessionTermination",w=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelXHRLogon();}};this.createRenderer=function(e){var i,z,B,D,F;jQuery.sap.measure.start("FLP:Container.InitLoading","Initial Loading","FLP");e=e||C.defaultRenderer;if(!e){throw new Error("Missing renderer name");}F=(C.renderers&&C.renderers[e])||{};z=F.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);jQuery.sap.require(z);if(F.componentData&&F.componentData.config){i={config:F.componentData.config};}B=new(jQuery.sap.getObject(z))({componentData:i});if(B instanceof sap.ui.core.UIComponent){D=new sap.ui.core.ComponentContainer({component:B,height:"100%",width:"100%"});}else{D=B;}if(!(D instanceof sap.ui.core.Control)){throw new Error("Unsupported renderer type for name "+e);}o[e]=D;E.fireEvent("rendererCreated",{renderer:B});return D;};this.getRenderer=function(e){var i,z;e=e||C.defaultRenderer;if(e){i=o[e];}else{z=Object.keys(o);if(z.length===1){i=o[z[0]];}else{jQuery.sap.log.warning("getRenderer() - cannot determine renderer, because no default renderer is configured and multiple instances exist.",undefined,b);}}if(i instanceof sap.ui.core.ComponentContainer){return i.getComponentInstance();}return i;};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var i,D=new jQuery.Deferred(),z=jQuery.sap.uid(),B,P=0,F=this.DirtyState.CLEAN;function H(){if(P===0||F===w.DirtyState.DIRTY){D.resolve(F);jQuery.sap.log.debug("getGlobalDirty() Resolving: "+F,null,"sap.ushell.Container");}}function I(J){if(J.key.indexOf(c)===0&&J.newValue!==w.DirtyState.INITIAL&&J.newValue!==w.DirtyState.PENDING){jQuery.sap.log.debug("getGlobalDirty() Receiving event key: "+J.key+" value: "+J.newValue,null,"sap.ushell.Container");if(J.newValue===w.DirtyState.DIRTY||J.newValue===w.DirtyState.MAYBE_DIRTY){F=J.newValue;}P-=1;H();}}try{L.setItem(z,"CHECK");L.removeItem(z);}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return D.resolve(this.DirtyState.MAYBE_DIRTY).promise();}if(G){throw new Error("getGlobalDirty already called!");}G=D;window.addEventListener('storage',I);D.always(function(){window.removeEventListener('storage',I);G=undefined;});for(i=L.length-1;i>=0;i-=1){B=L.key(i);if(B.indexOf(c)===0){if(L.getItem(B)==='PENDING'){L.removeItem(B);jQuery.sap.log.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+B,null,"sap.ushell.Container");}else{P+=1;u.localStorageSetItem(B,this.DirtyState.PENDING,true);jQuery.sap.log.debug("getGlobalDirty() Requesting status for: "+B,null,"sap.ushell.Container");}}}H();setTimeout(function(){if(D.state()!=="resolved"){D.resolve('MAYBE_DIRTY');jQuery.sap.log.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container");}},P*2000);return D.promise();};this.getLogonSystem=function(){return A.getSystem();};this.getUser=function(){return A.getUser();};this.getDirtyFlag=function(){for(var i=0;i<R.length;i++){m=m||R[i].call();}return m;};this.setDirtyFlag=function(i){m=i;};this.sessionKeepAlive=function(){if(A.sessionKeepAlive){A.sessionKeepAlive();}};this.registerDirtyStateProvider=function(D){if(typeof D!=="function"){throw new Error("fnDirty must be a function");}R.push(D);};this.getService=function(e,P){var i={},M,K,z,B,D,F,H,I;function J(N){var O=new jQuery.Deferred();if(!N){throw new Error("Missing system");}O.resolve(j(e,N,P));sap.ushell.Container.addRemoteSystem(N);return O.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}H=h(e);M=H.module||"sap.ushell.services."+e;K=M+"/"+(P||"");I={config:H.config||{}};if(!t.containsKey(K)){z=sap.ui.requireSync(M.replace(/[.]/g,"/"));if(z.hasNoAdapter){B=new z(i,P,I);}else{F=j(e,A.getSystem(),P);i.createAdapter=J;B=new z(F,i,P,I);}t.put(K,B);return B;}return t.get(K);};function x(){var z,B,i,K;for(i=L.length-1;i>=0;i-=1){K=L.key(i);if(K.indexOf(s)===0){try{z=K.substring(s.length);B=JSON.parse(L.getItem(K));n[z]=new S(B);}catch(e){L.removeItem(K);}}}return n;}function y(){if(typeof OData==='undefined'){return;}function e(i,z,F){jQuery.sap.log.warning(i,null,"sap.ushell.Container");if(F){setTimeout(F.bind(null,i),5000);}return{abort:function(){return;}};}OData.read=function(i,z,F){return e("OData.read('"+(i&&i.Uri?i.requestUri:i)+"') disabled during logout processing",z,F);};OData.request=function(i,z,F){return e("OData.request('"+(i?i.requestUri:"")+"') disabled during logout processing",z,F);};}this.addRemoteSystem=function(e){var i=e.getAlias(),O=n[i];if(O){if(O.toString()===e.toString()){return;}jQuery.sap.log.warning("Replacing "+O+" by "+e,null,"sap.ushell.Container");}else{jQuery.sap.log.debug("Added "+e,null,"sap.ushell.Container");}n[i]=e;u.localStorageSetItem(s+i,e);};this.addRemoteSystemForServiceUrl=function(e){var M,i={baseUrl:";o="};if(!e||e.charAt(0)!=='/'||e.indexOf('//')===0){return;}M=/^[^?]*;o=([^\/;?]*)/.exec(e);if(M&&M.length>=2){i.alias=M[1];}e=e.replace(/;[^\/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){i.platform="hana";i.alias=i.alias||"hana";}else if(/^\/sap\/opu\//.test(e)){i.platform="abap";}if(i.alias&&i.platform){this.addRemoteSystem(new S(i));}};this.attachLogoutEvent=function(F){E.attachEvent("Logout",F);};this.detachLogoutEvent=function(F){E.detachEvent("Logout",F);};this.attachRendererCreatedEvent=function(F){E.attachEvent("rendererCreated",F);};this.detachRendererCreatedEvent=function(F){E.detachEvent("rendererCreated",F);};this.logout=function(){var D=new jQuery.Deferred();function i(){A.logout(true).always(function(){L.removeItem(v);D.resolve();});}function z(){if(E.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}function B(){var n,F=[];if(q){window.removeEventListener('storage',q);}u.localStorageSetItem(v,"pending");w._suppressOData();n=w._getRemoteSystems();Object.keys(n).forEach(function(H){try{F.push(j("Container",n[H]).logout(false));}catch(e){jQuery.sap.log.warning("Could not create adapter for "+H,e.toString(),"sap.ushell.Container");}L.removeItem(s+H);});jQuery.when.apply(jQuery,F).done(z);}if(typeof A.addFurtherRemoteSystems==='function'){A.addFurtherRemoteSystems().always(B);}else{B();}return D.promise();};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.setLogonFrameProvider(e);}};this.setXhrLogonTimeout=function(P,T){if(this.oFrameLogonManager){this.oFrameLogonManager.setTimeout(P,T);}};this._closeWindow=d;this._redirectWindow=r;this._getRemoteSystems=x;this._suppressOData=y;sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,i,D){w.addRemoteSystemForServiceUrl(D);});if(typeof A.logoutRedirect==='function'){q=function(e){function i(){w._closeWindow();w._redirectWindow();}if(sap.ushell.Container!==w){return;}if(e.key.indexOf(s)===0&&e.newValue&&e.newValue!==L.getItem(e.key)){u.localStorageSetItem(e.key,e.newValue);}if(e.key===v){if(e.newValue==="pending"){w._suppressOData();if(E.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}}};window.addEventListener('storage',q);}}function l(s){s.forEach(function(e){var o=U.createServiceFactory(e);a.register("sap.ushell.ui5service."+e,o);});}sap.ushell.bootstrap=function(P,A){var o,e;if(sap.ushell.Container!==undefined){e=new Error("Unified shell container is already initialized - cannot initialize twice.\nStacktrace of first initialization:"+f);jQuery.sap.log.error(e,e.stack,b);throw e;}sap.ushell.Container=null;f=(new Error()).stack;C=jQuery.extend({},true,window["sap-ushell-config"]||{});p=A;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"]);}if(C.modulePaths){Object.keys(C.modulePaths).forEach(function(m){jQuery.sap.registerModulePath(m,C.modulePaths[m]);});}o=j("Container",new S({alias:"",platform:C.platform||P}));l(["Personalization","URLParsing","CrossApplicationNavigation"]);return o.load().then(function(){var i,m,n;var D,L;sap.ushell.Container=new k(o);m=sap.ushell.Container;L=(function(){var q,s;var t=window["sap-ushell-config"];if(!t||!t.services){return false;}q=t.services.PluginManager;s=q&&q.config;return s&&s.loadPluginsFromSite;})();if(L){i=m.getService("CommonDataModel");D=i.getPlugins();}else{D=jQuery.when({});}return D.then(function(q){var s=jQuery.extend(true,{},C.bootstrapPlugins,q);n=m.getService("PluginManager");n.registerPlugins(s);});});};});sap.ui.predefine('sap/ushell/services/LaunchPage',[],function(){"use strict";function L(a,c){var t=this,T=[];this.getGroups=function(){var p=a.getGroups();p.fail(function(){jQuery.sap.log.error("getGroups failed");});return p;};this.getDefaultGroup=function(){var p=a.getDefaultGroup();p.fail(function(){jQuery.sap.log.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(g){return a.getGroupTitle(g);};this.getGroupId=function(g){return a.getGroupId(g);};this.getGroupTiles=function(g){return a.getGroupTiles(g);};this.getLinkTiles=function(g){return a.getLinkTiles(g);};this.addGroupAt=function(s,i){var p,b=i;if(a.addGroupAt){p=a.addGroupAt(s,i);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});}else{var d=new jQuery.Deferred();p=a.addGroup(s);p.done(function(n,g){var m=this.moveGroup(n,b),e=n;m.done(function(){d.resolve(e);});m.fail(function(){d.reject();});}.bind(this));p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");d.reject();});return d.promise();}return p;};this.addGroup=function(s){var p=a.addGroup(s);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(g,i){var p=a.removeGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to removeGroup "+t.getGroupTitle(g));});return p;};this.resetGroup=function(g,i){var p=a.resetGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to resetGroup "+t.getGroupTitle(g));});return p;};this.isGroupRemovable=function(g){return a.isGroupRemovable(g);};this.isGroupLocked=function(g){if(typeof a.isGroupLocked==="function"){return a.isGroupLocked(g);}return false;};this.moveGroup=function(g,n){var p=a.moveGroup(g,n);p.fail(function(){jQuery.sap.log.error("Fail to moveGroup "+t.getGroupTitle(g));});return p;};this.setGroupTitle=function(g,s){var p=a.setGroupTitle(g,s);p.fail(function(){jQuery.sap.log.error("Fail to set Group title: "+t.getGroupTitle(g));});return p;};this.hideGroups=function(h){var d=jQuery.Deferred();if(typeof a.hideGroups!=="function"){d.reject('hideGroups() is not implemented in the Adapter.');}else{a.hideGroups(h).done(function(){d.resolve();}).fail(function(m){jQuery.sap.log.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(g){if(typeof a.isGroupVisible==="function"){return a.isGroupVisible(g);}return true;};this.addTile=function(C,g){var p=a.addTile(C,g);p.fail(function(){jQuery.sap.log.error("Fail to add Tile: "+t.getCatalogTileId(C));});return p;};this.removeTile=function(g,o,i){var p=a.removeTile(g,o,i);p.fail(function(){jQuery.sap.log.error("Fail to remove Tile: "+t.getTileId(o));});return p;};this.moveTile=function(o,s,i,S,b,n){var p=a.moveTile(o,s,i,S,b,n);p.fail(function(){jQuery.sap.log.error("Fail to move Tile: "+t.getTileId(o));});return p;};this.isLinkPersonalizationSupported=function(o){if(typeof a.isLinkPersonalizationSupported==="function"){return a.isLinkPersonalizationSupported(o);}return false;};this.getTileId=function(o){return a.getTileId(o);};this.getTileTitle=function(o){return a.getTileTitle(o);};this.getTileType=function(o){if(a.getTileType){return a.getTileType(o);}return'tile';};this.getTileView=function(o){var d=a.getTileView(o);if(!jQuery.isFunction(d.promise)){d=jQuery.Deferred().resolve(d).promise();}return d;};this.getAppBoxPressHandler=function(o){if(a.getAppBoxPressHandler){return a.getAppBoxPressHandler(o);}return undefined;};this.getTileSize=function(o){return a.getTileSize(o);};this.getTileTarget=function(o){return a.getTileTarget(o);};this.getTileDebugInfo=function(o){if(typeof a.getTileDebugInfo==="function"){return a.getTileDebugInfo(o);}return undefined;};this.isTileIntentSupported=function(o){if(typeof a.isTileIntentSupported==="function"){return a.isTileIntentSupported(o);}return true;};this.refreshTile=function(o){a.refreshTile(o);};this.setTileVisible=function(o,n){return a.setTileVisible(o,n);};this.registerTileActionsProvider=function(p){if(typeof p!=='function'){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(o){var b=[];var A;if(typeof a.getTileActions==='function'){A=a.getTileActions(o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}for(var i=0;i<T.length;i++){A=T[i](o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}return b;};this.getCatalogs=function(){return a.getCatalogs();};this.isCatalogsValid=function(){return a.isCatalogsValid();};this.getCatalogData=function(C){if(typeof a.getCatalogData!=="function"){jQuery.sap.log.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(C)};}return a.getCatalogData(C);};this.getCatalogError=function(C){return a.getCatalogError(C);};this.getCatalogId=function(C){return a.getCatalogId(C);};this.getCatalogTitle=function(C){return a.getCatalogTitle(C);};this.getCatalogTiles=function(C){var p=a.getCatalogTiles(C);p.fail(function(){jQuery.sap.log.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(C));});return p;};this.getCatalogTileId=function(o){return a.getCatalogTileId(o);};this.getCatalogTileTitle=function(C){return a.getCatalogTileTitle(C);};this.getCatalogTileSize=function(C){return a.getCatalogTileSize(C);};this.getCatalogTileViewControl=function(C){if(typeof a.getCatalogTileViewControl==="function"){return a.getCatalogTileViewControl(C);}else{var d=new jQuery.Deferred(),r=this.getCatalogTileView(C);d.resolve(r);return d.promise();}};this.getCatalogTileView=function(C){return a.getCatalogTileView(C);};this.getCatalogTileTargetURL=function(C){return a.getCatalogTileTargetURL(C);};this.getCatalogTileTags=function(C){if(typeof a.getCatalogTileTags==="function"){return a.getCatalogTileTags(C);}return[];};this.getCatalogTileKeywords=function(C){return a.getCatalogTileKeywords(C);};this.getCatalogTilePreviewTitle=function(C){return a.getCatalogTilePreviewTitle(C);};this.getCatalogTilePreviewSubtitle=function(C){if(a.getCatalogTilePreviewSubtitle){return a.getCatalogTilePreviewSubtitle(C);}};this.getCatalogTilePreviewIcon=function(C){return a.getCatalogTilePreviewIcon(C);};this.addBookmark=function(p,g){var P,d,m;if(!p.title){jQuery.sap.log.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){jQuery.sap.log.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}if(g&&this.isGroupLocked(g)){d=new jQuery.Deferred();P=d.promise();m='Tile cannot be added, target group ('+this.getGroupTitle(g)+')is locked!';d.reject(m);jQuery.sap.log.error(m);}else{P=a.addBookmark(p,g);P.fail(function(){jQuery.sap.log.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);});}return P;};this.countBookmarks=function(u){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=a.countBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to count bookmarks");});return p;};this.deleteBookmarks=function(u){if(!u||typeof u!=="string"){throw new Error("Missing URL");}var p=a.deleteBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to delete bookmark for: "+u);});return p;};this.updateBookmarks=function(u,p){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){jQuery.sap.log.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=a.updateBookmarks(u,p);P.fail(function(){jQuery.sap.log.error("Fail to update bookmark for: "+u);});return P;};this.onCatalogTileAdded=function(s){return a.onCatalogTileAdded(s);};};L.hasNoAdapter=false;return L;},true);sap.ui.predefine('sap/ushell/services/Message',[],function(){"use strict";function M(){var s=null;this.init=function(S){s=S;return this;};this.show=function(t,m,p){if(!m){jQuery.sap.log.error("Message must not be empty.");}else{if(s){s(t,m,p||{});}else{jQuery.sap.log.error("MessageService not initialized. [Message: '"+m+"']");}}};this.info=function(m,d){this.show(M.Type.INFO,m,{duration:d||3000});};this.error=function(m,t){m=(t!==undefined)?t+" , "+m:m;jQuery.sap.log.error(m);this.show(M.Type.ERROR,m,{title:t});};this.confirm=function(m,c,t,a){this.show(M.Type.CONFIRM,m,{title:t,callback:c,actions:a});};};M.Type={INFO:0,ERROR:1,CONFIRM:2};M.hasNoAdapter=true;return M;},true);sap.ui.predefine('sap/ushell/services/NavTargetResolution',["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/navigationMode"],function(b,u,n){"use strict";function N(A,c,p,s){var S=s&&s.config,I=function(){return!!(S&&S.enableClientSideTargetResolution);},r=function(h){var o=I()?this._resolveHashFragmentClientSide(h):A.resolveHashFragment(h);return o;},l,R=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:r.bind(this)}],C;this._isClientSideTargetResolutionEnabled=I;this._nextResolveHashFragment=function(a,h){var o,f;o=a.pop();if(o.isApplicable(h)){jQuery.sap.log.info("NavTargetResolution: custom resolver "+o.name+" resolves "+h);f=this._nextResolveHashFragment.bind(this,a);return o.resolveHashFragment(h,f);}return this._nextResolveHashFragment(a,h);};this._resolveHashFragmentClientSide=function(h){var H=this._validateHashFragment(h),f;if(!H.success){return new jQuery.Deferred().reject(h+" is not a valid hash fragment").promise();}f=H.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(f);};this._resolveHashFragmentClientSideAndFixApplicationType=function(f){var d=new jQuery.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").resolveHashFragment(f).done(function(o){if(o&&o.applicationType==="SAPUI5"){o.applicationType="URL";}d.resolve(o);}).fail(function(){d.reject.apply(d,arguments);});return d.promise();};this._validateHashFragment=function(h){var H="",v={success:false};if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution");}H=h.substring(1);if(H){v.success=true;}v.hashFragmentWithoutHash=H;return v;};this.expandCompactHash=function(h){var U=sap.ushell.Container.getService("URLParsing"),P,d=new jQuery.Deferred();P=U.parseShellHash(h);if(P&&P.params&&P.params["sap-intent-param"]){sap.ushell.Container.getService("AppState").getAppState(P.params["sap-intent-param"][0]).done(function(o){var v=o.getData("sap-intent-param"),H=h;if(v){H=sap.ushell.Container.getService("URLShortening").expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}d.resolve(H);}).fail(function(){d.resolve(h);});}else{d.resolve(h);}return d.promise();};var w=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(o){var m,a;if(typeof o!=="object"){return;}delete o["sap.platform.runtime"];if(o&&o.applicationType&&o.applicationType==="SAPUI5"){o.applicationType="URL";}if(o.applicationType==="URL"){m=/^SAPUI5\.Component=(.*)/.exec(o.additionalInformation);a=m&&m[1];if(a){o.ui5ComponentName=a;}}};this._getSapSystem=function(h,o){var a;if(o&&o["sap-system"]){return o["sap-system"];}if(o&&o.url){a=jQuery.sap.getUriParameters(o.url).get("sap-system");if(a){return a;}}if(w.indexOf(o.applicationType)>=0&&h&&h.substring(1)){a=jQuery.sap.getUriParameters(h.substring(1)).get("sap-system");if(a){return a;}}return undefined;};this.resolveHashFragment=function(h){var d=new jQuery.Deferred(),a=/sap-ushell-enc-test=([^&]*)(&.*)?$/,m,e,f,t=this;u.addTime("resolveHashFragment");jQuery.sap.measure.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(h).done(function(H){if(H.indexOf("sap-ushell-enc-test")>=0){m=a.exec(H);if(m){e=m[1];if(e!=="A%20B%2520C"){sap.ushell.Container.getService("Message").error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");}H=H.replace(/sap-ushell-enc-test=([^&]*)&/,"");H=H.replace(/(&|\?)sap-ushell-enc-test=([^&]*)$/,"");}}var P=t._invokeResolveHashChain(H);if(typeof A.processPostResolution==="function"){P=A.processPostResolution(H,P);}P.done(function(o){t._adjustResolutionResultForUi5Components(o);if(jQuery.isPlainObject(o)){if(!o.hasOwnProperty("navigationMode")){o.navigationMode=n.getNavigationMode(o,b.getCurrentAppliction());}o.externalNavigationMode=n.getExternalNavigationMode(o.navigationMode);}if(jQuery.isPlainObject(o)&&!o.hasOwnProperty("sap-system")){f=t._getSapSystem(h,o);if(f){o["sap-system"]=f;}}jQuery.sap.measure.end("sap.ushell.navigation.resolveHashFragment");b.setCurrentApplication(o);d.resolve(o);}).fail(function(M){d.reject(M);});}).fail(function(M){d.reject(M);});return d.promise();};this._invokeResolveHashChain=function(h){var o=R.map(function(a){return a;});return this._nextResolveHashFragment(o,h).done(function(a){C=a;});};this.baseResolveHashFragment=r.bind(this);this._getGetLinksResolver=function(a){var g;if(this._isClientSideTargetResolutionEnabled()){g=this._getLinksClientSide.bind(this);return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}if(Object.prototype.toString.apply(a.paramsOptions)==="[object Array]"&&a.paramsOptions.length>0){jQuery.sap.log.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(a.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution");}g=A&&A.getLinks&&A.getLinks.bind(A);if(g){return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}g=A&&A.getSemanticObjectLinks&&A.getSemanticObjectLinks.bind(A);if(g){return{resolver:g,warning:a.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true};}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined};};this.getLinks=function(a){var t=this,d=a.semanticObject,P=a.params,i=a.ignoreFormFactor,o=a.ui5Component,e=a.appStateKey,f=a.compactIntents,g,h,j=new jQuery.Deferred(),k,m;if(/\?/.test(d)){throw new Error("Parameter must not be part of semantic object");}g=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(e){g=g||{};g["sap-xapp-state"]=encodeURIComponent(e);}k=sap.ushell.Container.getService("ShellNavigation");var q=t._getGetLinksResolver(a),H,v;if(q.warning){jQuery.sap.log.warning("A problem occurred while determining the resolver for getLinks",q.warning,"sap.ushell.services.NavTargetResolution");}m=q.resolver;if(m){H=function(E){j.reject(E);};v=function(x){if(f){t._shortenGetSemanticObjectLinksResults(x,o).done(function(y){j.resolve(y);});}else{j.resolve(x);}};if(q.isGetSemanticObjectLinksCall){h={target:{semanticObject:d,action:"dummyAction"},params:g};k.hrefForExternal(h,true,o,true).done(function(x){var M=x.params||g;m(d,M,i).done(v).fail(H);}).fail(function(M){j.reject(M);});}else{m(a).done(v).fail(H);}}else{j.resolve([]);}return j.promise();};this.getDistinctSemanticObjects=function(){if(this._isClientSideTargetResolutionEnabled()){var o=sap.ushell.Container.getService("ClientSideTargetResolution");return o.getDistinctSemanticObjects();}if(A&&A.getDistinctSemanticObjects){return A.getDistinctSemanticObjects.call(A);}jQuery.sap.log.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return new jQuery.Deferred().reject("Cannot execute getDistinctSemanticObjects").promise();};this._getLinksClientSide=function(a){var d=new jQuery.Deferred(),e,o=new jQuery.Deferred(),U=sap.ushell.Container.getService("URLParsing");if((a.params||{}).hasOwnProperty("sap-intent-param")){e="#"+a.semanticObject+"-"+"dummyAction?"+U.paramsToString(a.params);this.expandCompactHash(e).done(function(E){o.resolve(U.parseShellHash(E).params);}).fail(d.reject.bind(d));}else{o.resolve(a.params);}o.done(function(E){sap.ushell.Container.getService("ClientSideTargetResolution").getLinks(a).done(d.resolve.bind(d)).fail(d.reject.bind(d));});return d.promise();};this._shortenGetSemanticObjectLinksResults=function(g,o){var t=this,a=[],i=0,P=g.length,U=sap.ushell.Container.getService("URLParsing"),d=sap.ushell.Container.getService("ShellNavigation"),D=new jQuery.Deferred();g.forEach(function(e){var f=U.parseShellHash(e.intent),h=d.compactParams(f.params,undefined,o);a.push(h);a[i].done(function(j,k){a[j]={text:e.text,intent:"#"+f.semanticObject+"-"+f.action+"?"+U.paramsToString(k)};}.bind(t,i)).fail(function(j,m){jQuery.sap.log.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+m+"; intent had title ''"+e.title+"'' and link ''"+e.intent+"'","sap.ushell.services.NavTargetResolution");a[j]={text:e.text,intent:e.intent};}.bind(t,i)).always(function(){P--;if(P===0){D.resolve(a);}});i++;});return D.promise();};this.isIntentSupported=function(i){var m={},o;if(this._isClientSideTargetResolutionEnabled()){o=sap.ushell.Container.getService("ClientSideTargetResolution");return o.isIntentSupported(i);}if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(a){m[a]={supported:undefined};});return(new jQuery.Deferred()).resolve(m).promise();};this.isNavigationSupported=function(i){var U=sap.ushell.Container.getService("URLParsing"),d=new jQuery.Deferred(),a=[];a=i.map(function(o){if(typeof o==="string"){return o;}return"#"+U.constructShellHash(o);});this.isIntentSupported(a).done(function(o){var e=a.map(function(f){return o[f]||{supported:false};});d.resolve(e);}).fail(d.reject.bind(d));return d.promise();};this.registerCustomResolver=function(o){if(typeof o.name!=="string"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof o.isApplicable!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof o.resolveHashFragment!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}R.push(o);return true;};if(S&&jQuery.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(o){var h=this.cleanHash(o);return l.indexOf(h.substring(1));},isApplicable:function(o){return this._getIndex(o)>=0;},resolveHashFragment:function(h){var d,i=this._getIndex(h),o,a,e,f;d=new jQuery.Deferred();o=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));a=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(a&&a.params){f=sap.ushell.Container.getService("URLParsing").paramsToString(a.params);if(f){e=o.url.indexOf('?')>=0;o.url=o.url+(e?"&":"?")+f;}}d.resolve(o);return d.promise();}});}this.registerCustomResolver({name:"StandaloneLocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isRunStandaloneHash:function(h){return typeof h==="string"&&h.indexOf("#Shell-runStandaloneApp")===0;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear"||this.isRunStandaloneHash(h);},parseUrl:function(a){if(!this.aElement){this.aElement=window.document.createElement('a');}this.aElement.href=a;return this.aElement;},resolveHashFragment:function(h){var d=new jQuery.Deferred(),e=null,t=this,f,P,L,g,i,j,k,o,F=h,m;h=this.cleanHash(h);if(!h){return false;}e={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},"none":{applicationType:"URL",url:"",additionalInformation:""}};function q(K){if(localStorage){return localStorage[K];}return undefined;}function v(o,K){var f={},a;for(a in o){if(o.hasOwnProperty(a)){if(a!==K){f[a]=o[a];}}}return f;}function x(U){if(u.calculateOrigin(t.parseUrl(U))!==u.calculateOrigin(window.location)){return undefined;}var a=(new URI(t.parseUrl(U).href)).normalizePathname().pathname(),D=jQuery.sap.getObject("runStandaloneAppFolderWhitelist",0,S),E;if(!D){return undefined;}for(E in D){if(D.hasOwnProperty(E)){if(D[E]){if(E==="*"||a.indexOf((new URI(t.parseUrl(E).href)).normalizePathname().pathname())===0){return U;}}}}return undefined;}function y(K){return jQuery.sap.getUriParameters().get(K);}function z(a,K){return(a.params&&a.params[K]&&a.params[K][0])||y(K);}function B(K,V){if(localStorage){localStorage[K]=V;}}if(e[h]){f=e[h];}else if(h==="#Test-clear"){B("sap.ushell.#Test-local1",undefined);B("sap.ushell.#Test-local2",undefined);jQuery.sap.log.info("NavTargetResolution: Local storage keys for #Test have been cleared");f=e["#Test-config"];}else if(this.isRunStandaloneHash(h)){L={applicationType:"URL"};P=sap.ushell.Container.getService("URLParsing").parseShellHash(F);g=(z(P,"sap-ushell-SAPUI5.Component")&&"SAPUI5.Component="+z(P,"sap-ushell-SAPUI5.Component"))||(z(P,"sap-ushell-additionalInformation"));m=z(P,"sap-ushell-url")||"";o=v(P.params,"sap-ushell-SAPUI5.Component");o=v(o,"sap-ushell-additionalInformation");o=v(o,"sap-ushell-url");j=sap.ushell.Container.getService("URLParsing").paramsToString(o);k=m.indexOf('?')>=0;if(j){m=m+(k?(((m[m.length-1]!=="&")&&"&")||""):"?")+j;}L.url=x(m);L.additionalInformation=g;f=L;}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){f=q("sap.ushell."+h);if(!f||f==="undefined"){L={applicationType:"URL"};}else{L=JSON.parse(f);}if((window.location.hostname==="localhost")||(S&&S.allowTestUrlComponentConfig)){i="sap-ushell-test-"+h.substring(6);g=y(i+"-additionalInformation");if(g){L.additionalInformation=g;}m=y(i+"-url");if(m){L.url=x(m);}}if(!L.url){jQuery.sap.log.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");jQuery.sap.log.info("NavTargetResolution: Defaulting to config app ...\n");d.reject("URL is not resolvable");return d.promise();}L.url=x(L.url);f=L;}if(f.url===undefined){d.reject("URL is not resolvable");return d.promise();}jQuery.sap.log.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((f&&f.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((f&&f.additionalInfo)||"")+"#Test-local1");jQuery.sap.log.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(f));d.resolve(f);return d.promise();}});this.getCurrentResolution=function(){return C;};};N.hasNoAdapter=false;return N;},true);sap.ui.predefine('sap/ushell/services/PageBuilding',[],function(){"use strict";jQuery.sap.require("sap.ui2.srvc.factory");jQuery.sap.require("sap.ui2.srvc.page");function P(a,c){this.getFactory=function(){return a.getFactory();};this.getPage=function(p){return a.getFactory().createPage(p);};this.getPageSet=function(i){var d=new jQuery.Deferred();a.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};};P.hasNoAdapter=false;return P;},true);sap.ui.predefine('sap/ushell/services/Personalization',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/_Personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer","sap/ui/core/format/DateFormat","sap/ui/base/ManagedObject"],function(u,p,a,b,C,W,T,P,c,V,d,e,f,D,M){"use strict";function g(A,o,s,h){this._oConfig=(h&&h.config)||{};this._seed=(h&&h.config&&typeof h.config.seed==="string"&&h.config.seed)||"12345678901AFERANDOMBETTER";while(this._seed.length<40){this._seed=this._seed+this._seed;}this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new W(this,A)};this._oAdapterWindowOnly={lazy:false,instance:new W(this,undefined)};this._oContainerMap=new u.Map();this._oPendingOperationsMap=new u.Map();};g.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";g.prototype.constants=b;g.prototype._configureAppVariantStorage=function(A){var t=this,s="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!A){A={adapter:{module:s}};}if(Object.keys(A).length===0||A.enabled===false){return;}var h=(A.adapter&&A.adapter.module)||s;var i=h.split(".").join("/");var j=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||(function(){var o=new jQuery.Deferred();try{sap.ui.require([i],R);}catch(r){o.reject(r);}function R(k){try{var l=new k();var w=new W(t,l);o.resolve(w);}catch(E){o.reject(E);}}return o.promise();})();return t._oAppVariantAdapterLoadPromise;};return{lazy:true,create:j};};g.prototype.getGeneratedKey=function(){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",h=s.length,r="",t=this;var R=function(i){return(t._seed.charCodeAt(i)+Math.floor(Math.random()*h))%h;};if(window&&window.crypto&&window.crypto.getRandomValues){var j=new Uint32Array(40);window.crypto.getRandomValues(j);R=function(i){return(j[i]+t._seed.charCodeAt(i))%s.length;}}var k=function(i){return s[R(i)];};while(r.length<40){r+=k(r.length);}return r;};g.prototype.getPersonalizer=function(o,s,h){h=h||this._getApplicationComponent();return new c(this,this._oAdapterWithBackendAdapter.instance,o,s,h);};g.prototype._getApplicationComponent=function(){var o;var O=M._sOwnerId;if(O){o=sap.ui.getCore().getComponent(O);if(o instanceof sap.ui.core.UIComponent){return o;}}return undefined;};g.prototype.getTransientPersonalizer=function(){return new T();};g.prototype.getContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,false,o);};g.prototype.createEmptyContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,true,o);};g.prototype._createContainer=function(s,S,h,o){var t=this,l,i,j,k,A,m,U,n=new jQuery.Deferred();if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}l=p.isLaunchpadReload();U=!!(p.isAppVariant(o)&&(!S||!S.shared)&&this._oAppVariantAdapterWithBackendAdapter);A=p.adjustScope(S,l);if(U){var q=o.getManifestObject();A.component=o;A.appVarId=q.getEntry("/sap.ui5/appVariantId");A.appVersion=q.getEntry("/sap.app/applicationVersion/version");}m=p.addContainerPrefix(s);j=U?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;i=t._oAdapterWindowOnly;k=p.pickAdapter(S,l,i,j);p.loadAdapter(k).then(function(L){var r;var v=new C(t,L,m,A,o);var w=L&&L.supportsGetWithoutSubsequentLoad===true;if(h&&w){r=new jQuery.Deferred();r.resolve(v);}else{r=v.load();}r.fail(function(){n.reject();}).done(function(){if(h||v._isExpired()){v.clear();}n.resolve(v);});},function(E){n.reject(E);});return n.promise();};g.prototype.delContainer=function(s,S){var o={},h,i="",t=this;S=t._adjustScope(S,false);i=p.addContainerPrefix(s);o=new jQuery.Deferred();h=t._pendingContainerOperations_cancelAddNext(s,null);h.always(function(){t.getContainer(s,S).fail(function(){t._pendingContainerOperations_cancelAddNext(s,o);o.reject();}).done(function(j){var A;t._pendingContainerOperations_cancelAddNext(s,o);A=S.validity===0?t._oAdapterWindowOnly:t._oAdapterWithBackendAdapter;p.loadAdapter(A).then(function(l){l.delAdapterContainer(i,S).fail(function(){o.reject();}).done(function(){o.resolve();});},function(){o.reject();});});});return o.promise();};g.prototype._pendingContainerOperations_flushAddNext=function(s,o){var h,S;h=this._oPendingOperationsMap.get(s);if(!h){h=new jQuery.Deferred();h.resolve();}if(o!==null){this._oPendingOperationsMap.put(s,o);}if(!h||h.state()!=="pending"){return h;}clearTimeout(h._sapTimeoutId);h._sapTimeoutId=undefined;if(typeof h._sapFnSave==="function"){S=h._sapFnSave;h._sapFnSave=undefined;S();}return h;};g.prototype._pendingContainerOperations_cancelAddNext=function(s,o){var h;h=this._oPendingOperationsMap.get(s);if(!h){h=new jQuery.Deferred();h.resolve();}if(o!==null){this._oPendingOperationsMap.put(s,o);}if(!h||h.state()!=="pending"){return h;}if(h._sapTimeoutId){clearTimeout(h._sapTimeoutId);h._sapTimeoutId=undefined;h.resolve(g.prototype.SAVE_DEFERRED_DROPPED);}return h;};g.prototype.getPersonalizationContainer=function(s){var h="",o={},i={};if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}h=p.addContainerPrefix(s);if(this._oContainerMap.containsKey(h)){return this._oContainerMap.get(h).promise();}i=new jQuery.Deferred();o=new P(this._oAdapterWithBackendAdapter.instance,h);o.done(function(j){i.resolve(j);}).fail(function(j){i.reject(j);});this._oContainerMap.put(h,i);return i.promise();};g.prototype.delPersonalizationContainer=function(s){var o={},h="",t=this;h=p.addContainerPrefix(s);o=new jQuery.Deferred();this.getPersonalizationContainer(s).fail(function(){o.reject();}).done(function(i){t._oAdapterWithBackendAdapter.instance.delAdapterContainer(h).fail(function(){o.reject();}).done(function(){t._oContainerMap.remove(h);o.resolve();});});return o.promise();};g.prototype._adjustScope=p.adjustScope;g.hasNoAdapter=false;g.ContextContainer=C;g.Variant=d;g.VariantSet=e;g.VariantSetAdapter=V;g.WindowAdapter=W;g.WindowAdapterContainer=f;return g;},true);sap.ui.predefine('sap/ushell/services/PluginManager',[],function(){"use strict";var S="sap.ushell.services.PluginManager",a="sap-ushell-plugin-type",b="RendererExtensions",c="sap.ushell.components.shell.defaults",s=[b,"UserDefaults","UserImage","ContentProvider"];function P(){var t=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};s.forEach(function(p){t._oPluginCollection[p]={};t._oCategoryLoadingProgress[p]=new jQuery.Deferred();});this._handlePluginCreation=function(C,p,o){var t=this,d=(t._oPluginCollection[C])[p];try{if(d.hasOwnProperty("component")){if(t._mInitializedComponentPromise.hasOwnProperty(d.component)){t._mInitializedComponentPromise[d.component].then(function(){t._instantiateComponent(d,o);},function(){t._instantiateComponent(d,o);});}else{t._mInitializedComponentPromise[d.component]=t._instantiateComponent(d,o);}}else{jQuery.sap.log.error("Invalid plugin configuration. The plugin "+p+" must contain a <component> key",S);}}catch(e){jQuery.sap.log.error("Error while loading bootstrap plugin: "+d.component||"",S);if(o){o.reject(e);}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js";};this._handleXhrAuthentication=function(A,C){var x;if(A&&["true",true,"X"].indexOf(A["sap-ushell-xhr-authentication"])>-1){if(!C){jQuery.sap.log.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,S);return jQuery.when();}if(A.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){x=parseInt(A["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(x)){jQuery.sap.log.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",C,"': '",A["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,S);}else{sap.ushell.Container.setXhrLogonTimeout(C,x);}}return jQuery.ajax(C+"/"+this._getFileNameForXhrAuth());}else{return jQuery.when();}};this._instantiateComponent=function(p,o){var d=new jQuery.Deferred(),C=jQuery.extend(true,{},p),A={ui5ComponentName:C.component,url:C.url};function g(e){return function(E){e=e||"Cannot create UI5 plugin component: (componentId/appdescrId :"+A.ui5ComponentName+")\n"+E+" properties "+JSON.stringify(A)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";E=E||"";jQuery.sap.log.error(e,E.stack,S);if(o){o.reject.apply(this,arguments);}d.reject.apply(this,arguments);};}function l(){sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(A).done(function(L){if(o){o.resolve();}d.resolve.apply(this,arguments);}).fail(g());}C.name=C.component;delete C.component;A.applicationDependencies=C;if(C.config){A.applicationConfiguration=C.config;delete C.config;}A.loadDefaultDependencies=false;this._handleXhrAuthentication(A.applicationConfiguration,C.url).done(l).fail(g("XHR logon for FLP plugin failed"));return d.promise();};this.getSupportedPluginCategories=function(){return jQuery.extend(true,[],s);};this.getRegisteredPlugins=function(){return jQuery.extend(true,{},this._oPluginCollection);};this.registerPlugins=function(p){var t=this,C,o;if(!p){return;}sap.ushell.utils.addTime("PluginManager.registerPlugins");Object.keys(p).sort().forEach(function(d){C=p[d]||{};o=C.config||{};if(C.enabled===false){return;}if(C.enabled===undefined){C.enabled=true;}if(C&&C.hasOwnProperty("module")){jQuery.sap.log.error("Plugin "+d+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",S);jQuery.sap.require(C.module);return;}if(o&&o.hasOwnProperty(a)){if(jQuery.inArray(o[a],s)!==-1){(t._oPluginCollection[o[a]])[d]=jQuery.extend(true,{},p[d]);}else{jQuery.sap.log.warning("Plugin "+d+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+o[a],S);}}else{(t._oPluginCollection[b])[d]=jQuery.extend(true,{},p[d]);}});};this.getPluginLoadingPromise=function(p){if(this._oCategoryLoadingProgress.hasOwnProperty(p)){return this._oCategoryLoadingProgress[p].promise();}};this.loadPlugins=function(p){var t=this,d,o,e;sap.ushell.utils.addTime("PluginManager.startLoadPlugins["+p+"]");if(jQuery.inArray(p,s)!==-1){if(t._oCategoryLoadingProgress[p].pluginLoadingTriggered!==undefined){return t._oCategoryLoadingProgress[p].promise();}else{t._oCategoryLoadingProgress[p].pluginLoadingTriggered=true;}if(Object.keys(t._oPluginCollection[p]).length>0){d=[];e=Object.keys(t._oPluginCollection[p]);if(jQuery.sap.getUriParameters().get("sap-ushell-xx-pluginmode")==="discard"&&p==="RendererExtensions"){e=e.filter(function(i){return t._oPluginCollection[p][i].component===c;})}e.forEach(function(f){o=new jQuery.Deferred();d.push(o.promise());t._handlePluginCreation(p,f,o);});jQuery.when.apply(undefined,d).done(function(){sap.ushell.utils.addTime("PluginManager.endLoadPlugins["+p+"]");t._oCategoryLoadingProgress[p].resolve();}).fail(t._oCategoryLoadingProgress[p].reject.bind());}else{t._oCategoryLoadingProgress[p].resolve();}}else{jQuery.sap.log.error("Plugins with category "+p+" cannot be loaded by the PluginManager",S);t._oCategoryLoadingProgress[p].reject("Plugins with category "+p+" cannot be loaded by the PluginManager");}return t._oCategoryLoadingProgress[p].promise();};};P.hasNoAdapter=true;return P;},true);sap.ui.predefine('sap/ushell/services/ReferenceResolver',["sap/ushell/User"],function(U){"use strict";function a(){this.getValue=function(r){var d=new jQuery.Deferred();var v;if(r==="User.env.sap-ui-legacy-date-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyDateFormat();}if(r==="User.env.sap-ui-legacy-number-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyNumberFormat();}if(r==="User.env.sap-ui-legacy-time-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat();}if(r==="User.env.sap-language"){v=sap.ushell.Container.getUser().getLanguage();}if(r==="User.env.sap-languagebcp47"){v=sap.ushell.Container.getUser().getLanguageBcp47();}if(r==="User.env.sap-accessibility"){v=(sap.ushell.Container.getUser().getAccessibilityMode())?'X':undefined;}if(r==="User.env.sap-statistics"){v=(sap.ui.getCore().getConfiguration().getStatistics())?"true":undefined;}if(r==="User.env.sap-theme"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}if(r==="User.env.sap-theme-name"){v=sap.ushell.Container.getUser().getTheme();}if(r==="User.env.sap-theme-NWBC"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.NWBC);}d.resolve({"value":v});return d.promise();};}function R(c,p,C){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new a();}return this.oUserEnvReferenceResolver;};this.resolveReferences=function(r){var t=this,d=new jQuery.Deferred(),u,b=[],A=true,D={},o={},e;var f=r.map(function(s){var g;if(s.indexOf("User.env.")===0){g=s;o[g]=1;}if(s.indexOf("UserDefault.")===0){g=t._extractAnyUserDefaultReferenceName(s);D[g]=1;}if(typeof g!=="string"){A=false;jQuery.sap.log.error("'"+s+"' is not a legal reference name","sap.ushell.services.ReferenceResolver");}return{full:s,name:g};});if(!A){return d.reject("One or more references could not be resolved").promise();}Object.keys(D).forEach(function(n){u=u||sap.ushell.Container.getService("UserDefaultParameters");b.push(u.getValue(n));});Object.keys(o).forEach(function(n){e=e||t._getUserEnvReferenceResolver();b.push(e.getValue(n));});jQuery.when.apply(jQuery,b).done(function(){var k={};var i=0,g=arguments;Object.keys(D).forEach(function(n){D[n]=g[i];i=i+1;});Object.keys(o).forEach(function(n){o[n]=g[i];i=i+1;});f.forEach(function(h){var m;if(h.full.indexOf("UserDefault.extended.")===0){m=t.mergeSimpleAndExtended(D[h.name]);if(!jQuery.isEmptyObject(m)){k[h.full]=m;}else{k[h.full]=undefined;}}else if(h.full.indexOf("UserDefault.")===0){k[h.full]=D[h.name].value;}else if(h.full.indexOf("User.env.")===0){k[h.full]=o[h.name].value;}});d.resolve(k);});return d.promise();};this._extractAnyUserDefaultReferenceName=function(r){var P=this.extractExtendedUserDefaultReferenceName(r);if(typeof P==="string"){return P;}return this.extractUserDefaultReferenceName(r);};this.extractExtendedUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.extended.")!==0){return undefined;}return r.replace(/^UserDefault[.]extended[.]/,"");};this.extractUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.")!==0||r.indexOf("UserDefault.extended.")===0){return undefined;}return r.replace(/^UserDefault[.]/,"");};this.mergeSimpleAndExtended=function(v){var m=jQuery.extend(true,{},v.extendedValue);if(typeof v.value==="string"){if(!jQuery.isArray(m.Ranges)){m.Ranges=[];}m.Ranges.push({"Sign":"I","Option":"EQ","Low":v.value,"High":null});}return m;};};R.hasNoAdapter=true;return R;},true);sap.ui.predefine('sap/ushell/services/ShellNavigation',["sap/ushell/services/ShellNavigationHashChanger"],function(S){"use strict";function a(c,p,s){function r(){sap.ui.require(['sap/m/MessageBox'],function(M){M.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:sap.m.MessageBox.Icon.ERROR,title:"Client out of sync with server.",actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],onClose:function(A){if(A===sap.m.MessageBox.Action.YES){window.setTimeout(function(){window.location.reload();},0);}}});});}var o=s&&s.config;this.hashChanger=new S(o);this.isInitialNavigation=function(){return this.hashChanger.isInitialNavigation();};this.hrefForExternal=function(A,v,C,b){return this.hashChanger.hrefForExternal(A,v,C,b);};this.hrefForAppSpecificHash=function(A){return this.hashChanger.hrefForAppSpecificHash(A);};this.compactParams=function(P,R,C,t){return this.hashChanger.compactParams(P,R,C,t);};this.toExternal=function(A,C,w){this.hashChanger.toExternal(A,C,w);};this.toAppHash=function(A,w){this.hashChanger.toAppHash(A,w);};this.init=function(f){hasher.prependHash="";sap.ui.core.routing.HashChanger.replaceHashChanger(this.hashChanger);var b=sap.ui.getCore().getEventBus();b.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(f);return this;};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(f){this.hashChanger.registerNavigationFilter(f);};}a.hasNoAdapter=true;return a;},true);sap.ui.predefine('sap/ushell/services/ShellNavigationHashChanger',["sap/ui/core/routing/HashChanger","sap/ui/thirdparty/hasher"],function(H,h){"use strict";function c(){var a=window.history.length;var m={onHashChanged:function(){if(window.history.length!==a){m.onHashChanged=function(){};m.isInitialNavigation=function(){return false;};}},isInitialNavigation:function(){return true;}};return m;}var S=H.extend("sap.ushell.services.ShellNavigatonHashChanger",{constructor:function(C){var u;this.oServiceConfig=C;if(jQuery.sap.getUriParameters().get("sap-ushell-reload")){if(jQuery.sap.getUriParameters().get("sap-ushell-reload")==="X"||jQuery.sap.getUriParameters().get("sap-ushell-reload")==="true"){u=true;}else{u=false;}}if(u!==undefined){if(typeof this.oServiceConfig!=="object"){this.oServiceConfig={};}this.oServiceConfig.reload=u;}sap.ui.core.routing.HashChanger.apply(this);this._initializedByShellNav=false;this.oURLShortening=sap.ushell.Container.getService("URLShortening");this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon"};this.privgetCurrentShellHash=function(){var r=this.privsplitHash(h.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")};};this.privconstructHash=function(A){var o=this.privgetCurrentShellHash();o.hash=o.hash+A;return o;};this.privconstructShellHash=function(s){return sap.ushell.Container.getService("URLParsing").constructShellHash(s);};this.privsplitHash=function(s){var o,b,A;if(s===undefined||s===null||s===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null};}o=sap.ushell.Container.getService("URLParsing").parseShellHash(s);if(o===undefined||o===null){return null;}b=(o.params&&!jQuery.isEmptyObject(o.params))?o.params:null;A=o.appSpecificRoute;o.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(o))||null,appSpecificRoute:A||null,intent:(o.semanticObject&&o.action&&(o.semanticObject+"-"+o.action+(o.contextRaw||"")))||null,params:b};};this.privsetHash=function(f,A,w){h.prependHash="";f=this.privstripLeadingHash(f);A=A||"";if(w===undefined){w=true;}if(w){this.fireEvent("hashSet",{sHash:A});h.setHash(f);}else{this.fireEvent("hashReplaced",{sHash:A});h.replaceHash(f);}};this.privstripLeadingHash=function(s){if(s[0]==='#'){return s.substring(1);}return s;};this.registerNavigationFilter=function(f){if(typeof f!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters.push(f);};function a(o,t){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred()).resolve();this.getNextKey=function(){this.oAppState=sap.ushell.Container.getService("AppState").createEmptyAppState(o,t);return this.oAppState.getKey();};this.store=function(v){var n;this.oAppState.setData(v);n=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,n);};this.getPromise=function(){return this.oPromise;};}this.compactParams=function(p,r,o,t){var U=sap.ushell.Container.getService("URLParsing"),s,b,R,P,d=new jQuery.Deferred(),e=U.constructShellHash({"target":{"semanticObject":"SO","action":"action"},"params":p},s);if(p===undefined||Object.keys(p).length===0){return d.resolve(p).promise();}s=new a(o,t);R=this.oURLShortening.compactHash(e,r,s);b=U.parseParameters(R.hash.match(/\?.*/)[0]);P=s.getPromise();P.done(function(){d.resolve(b);}).fail(function(m){d.reject(m);});return d;};this.hrefForExternal=function(A,v,o,b){var r=this.hrefForExternalNoEnc(A,v,o,b);function e(R,v){if(v===true){R.hash=encodeURI(R.hash);}else{R=encodeURI(R);}return R;}if(!b){return e(r,v);}var d=new jQuery.Deferred();r.done(function(R){d.resolve(e(R,v));}).fail(d.reject.bind(d));return d;};this.hrefForExternalNoEnc=function(A,v,o,b){var t,p,d,s=new a(o),r;t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}if(!b){return r;}p=s.getPromise();d=new jQuery.Deferred();p.done(function(){d.resolve(r);}).fail(function(m){d.reject(m);});return d;};this.privhrefForExternalNoEnc=function(A,s){var r;if(A===undefined){return this.privgetCurrentShellHash();}if(A&&A.target&&(typeof A.target.semanticObject==="string"||typeof A.target.shellHash==="string")){r="#"+this.privconstructShellHash(A);return this.oURLShortening.compactHash(r,undefined,s);}return this.privgetCurrentShellHash();};this.privgetAppHash=function(A){var s,o;if(A&&A.target&&(typeof A.target.shellHash==="string")){o=sap.ushell.Container.getService("URLParsing").parseShellHash(A.target.shellHash);s=o&&o.appSpecificRoute;s=s&&s.substring(2);}return s;};this.hrefForAppSpecificHash=function(A){return encodeURI(this.privconstructHash(this.privappHashPrefix+A).hash);};this.toExternal=function(A,o,w){var s,b=new a(o),d;s=this.privhrefForExternalNoEnc(A,b).hash;d=this.privgetAppHash(A);this.privsetHash(s,d,w);};this.toAppHash=function(A,w){var s=this.privconstructHash(this.privappHashPrefix+A).hash;this.privsetHash(s,A,w);};}});S.prototype.initShellNavigation=function(s){this._oInitialNavigationManager=c();if(this._initializedByShellNav){jQuery.sap.log.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false;}this.privfnShellCallback=s;h.changed.add(this.treatHashChanged,this);if(!h.isActive()){h.initialized.addOnce(this.treatHashChanged,this);h.init();}else{this.treatHashChanged(h.getHash());}this._initializedByShellNav=true;return true;};S.prototype.init=function(){if(this._initialized){jQuery.sap.log.info("init already called on this ShellNavigationHashChanger instance.");return false;}var n=this.privsplitHash(h.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);this.fireEvent("hashChanged",{newHash:a});this._initialized=true;return true;};S.prototype.treatHashChanged=function(n,o){if(this.inAbandonFlow){return;}this._oInitialNavigationManager.onHashChanged();var a,O,N,b,s,d,f,g,E,i,F;n=this.oURLShortening.expandHash(n);o=this.oURLShortening.expandHash(o);N=this.privsplitHash(n);b=this.privsplitHash(o);if(!N){E=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent("shellHashChanged",{newShellHash:n,newAppSpecificRoute:null,oldShellHash:(b?b.shellPart:o),error:E});this.privfnShellCallback(n,null,(b?b.shellPart:o),(b?b.appSpecificRoute:null),E);return;}else{s=N.intent;}if(!b){b={shellPart:o,appSpecificRoute:null};}else{d=b.intent;}for(i=0;i<this.aNavigationFilters.length;i=i+1){try{F=this.aNavigationFilters[i].call(undefined,n,o);if(F===this.NavigationFilterStatus.Custom){return;}if(F===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;h.replaceHash(o);this.inAbandonFlow=false;return;}}catch(e){jQuery.sap.log.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation");}}if(s===d&&(o!==undefined)){if(!this._parametersChanged(N.params,b.params)){a=(N.appSpecificRoute||"  ").substring(2);O=(b.appSpecificRoute||"  ").substring(2);jQuery.sap.log.info("Inner App Hash changed from '"+O+"' to '"+a+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("hashChanged",{newHash:a,oldHash:O});return;}if(this.hasListeners("shellHashParameterChanged")){f=sap.ushell.Container.getService("URLParsing").paramsToString(N.params);g=sap.ushell.Container.getService("URLParsing").paramsToString(b.params);jQuery.sap.log.info("Shell hash parameters changed from '"+g+"' to '"+f+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("shellHashParameterChanged",{oNewParameters:N.params,oOldParameters:b.params});return;}}function r(j){window.location.hash='#'+encodeURI(j);window.location.reload();}if(o!==undefined){if(this.oServiceConfig&&this.oServiceConfig.reload){r(n);}}jQuery.sap.log.info("Outer shell hash changed from '"+o+"' to '"+n+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent("shellHashChanged",{newShellHash:N.shellPart,newAppSpecificRoute:N.appSpecificRoute,oldShellHash:b.shellPart,oldAppSpecificRoute:b.appSpecificRoute});this.privfnShellCallback(N.shellPart,N.appSpecificRoute,b.shellPart,b.appSpecificRoute);};S.prototype.isInitialNavigation=function(){return this._oInitialNavigationManager&&this._oInitialNavigationManager.isInitialNavigation();};S.prototype._parametersChanged=function(n,o){return!jQuery.sap.equal(n,o);};S.prototype.setHash=function(s){this.toAppHash(s,true);};S.prototype.replaceHash=function(s){this.toAppHash(s,false);};S.prototype.getHash=function(){return this.getAppHash();};S.prototype.getAppHash=function(){var n=this.privsplitHash(h.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);return a;};S.prototype.destroy=function(){h.changed.remove(this.treatHashChanged,this);sap.ui.core.routing.HashChanger.prototype.destroy.apply(this,arguments);};return S;},true);sap.ui.predefine('sap/ushell/services/SupportTicket',[],function(){"use strict";function S(a,c,p,s){var o=(s&&s.config)||{};this.createTicket=function(b){return a.createTicket(b);};this.isEnabled=function(){return o.enabled===true;};};S.hasNoAdapter=false;return S;},true);sap.ui.predefine('sap/ushell/services/URLParsing',[],function(){"use strict";function U(){var r=/^(([A-Za-z0-9_\/]+)-([A-Za-z0-9_\/\-]+)(~([A-Z0-9a-z=+\/]+))?)?([?]([^&]|(&[^\/]))*&?)?$/;this.getShellHash=function(s){var a=/[^#]*#(([^&]|&[^\/])*)(&\/.*)?/,m=a.exec(s);if(m){return m[1];}return undefined;};this.getHash=function(u){var a=/#(.*)/,m=a.exec(u);if(m){return m[1];}return undefined;};this.isIntentUrl=function(u){var a=/^#/,t,l,T,L,h,p;if(typeof u!=="string"){return false;}if(!a.test(u)){t=(new URI(u)).normalize();T=t.protocol()+"://"+t.host()+t.pathname();l=(new URI(window.location.href)).normalize();L=l.protocol()+"://"+l.host()+l.pathname();if(T!==L){return false;}}h=this.getHash(u);if(!h){return false;}p=this.parseShellHash(h);if(p&&p.semanticObject&&p.action){return true;}return false;};this.parseParameters=function(p){if(!p){return{};}return jQuery.sap.getUriParameters(p).mParams||{};};this.paramsToString=function(p){return this.privparamsToString(p,"&","=");};this.privparamsToString=function(p,d,A){var f,a,k,i,l,s="";f="";a=null;l=[];for(a in p){if(p.hasOwnProperty(a)){l.push(a);}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){for(i=0;i<p[a].length;i=i+1){s+=f+encodeURIComponent(a)+A+encodeURIComponent(p[a][i]);f=d;}}else{s+=f+encodeURIComponent(a)+A+encodeURIComponent(p[a]);f=d;}}return s;};this.parseShellHash=function(h){var a=r,s,S,A,c,p,m,d;if(!h){return undefined;}s=this.splitHash(h);m=a.exec(s.shellPart);if(m){S=m[2];A=m[3];c=m[5];p=m[6];d=this.parseParameters(p);return{semanticObject:S,action:A,contextRaw:c,params:d,appSpecificRoute:s.appSpecificRoute};}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute};}return undefined;};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1);}return h;};this.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{};}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{};}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A};}return{};};function b(u,a){if(a){return u+a;}return u;}this.constructShellHash=function(s){var c,p,d,i=null,k,l=[],f="?",a=null;if(!s){return"";}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw;}if(s.target.shellHash||s.target.shellHash===""){d=this.privstripLeadingHash(s.target.shellHash);return b(d,s.appSpecificRoute);}if(s.target.semanticObject&&s.target.action){c=s.target.semanticObject+"-"+s.target.action.replace(/[?].*/,"");}else{return b("",s.appSpecificRoute);}if(s.target.contextRaw){c+="~"+s.target.contextRaw;}f="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a);}}p=(s.params&&JSON.parse(JSON.stringify(s.params)))||{};if(s.appStateKey){l.push("sap-xapp-state");p["sap-xapp-state"]=s.appStateKey;}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){if(p[a].length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<p[a].length;i=i+1){c+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);f="&";}}else{c+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);f="&";}}return b(c,s.appSpecificRoute);};this.addSystemToServiceUrl=function(s,c){var R,C,S=c;if(!s||s.indexOf('/')!==0||s.indexOf('//')===0){throw new sap.ushell.utils.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}if(c instanceof sap.ui.core.Component){C=(typeof c.getComponentData==="function")&&c.getComponentData();S=C&&C.startupParameters&&C.startupParameters["sap-system"]&&C.startupParameters["sap-system"][0];}R=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&!c&&R&&R.url){S=jQuery.sap.getUriParameters(R.url).get("sap-system");}if(/^[^?]*(;mo([\/;?]|$))/.test(s)){s=s;}else if(/^[^?]*(;o=([\/;?]|$))/.test(s)){s=s.replace(/;o=([\/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};};U.hasNoAdapter=true;return U;},true);sap.ui.predefine('sap/ushell/services/URLShortening',[],function(){"use strict";function U(){var t=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(v,s){var V,k;if(typeof v!=="string"||/^[A-Z0-9]{40}$/.test(v)){return v;}try{V=JSON.parse(v);}catch(e){jQuery.sap.log.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return v;}k=s&&s.getNextKey();this._storeValue(k,V,s);return k;};this.compactHash=function(u,r,s){var S,k,R,p,o,a,b=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(r){r.forEach(function(A){b.push(A);});}o=sap.ushell.Container.getService("URLParsing");S=o.parseShellHash(u);if(!S){jQuery.sap.log.error("the URL "+u+' is not compliant. It may break the product and cause unwanted navigation behavior.');return{hash:u};}p='';if(u.charAt(0)==='#'){p='#';}var v=S&&S.params&&S.params["sap-xapp-state"]&&S.params["sap-xapp-state"][0];if(v){S.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(v,s)];u=p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:S.params,appSpecificRoute:S.appSpecificRoute});}if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}if(S&&((S.params&&S.params[t.ABBREV_PARAM_NAME]))){return{hash:u};}k=s&&s.getNextKey();R=this._splitParameters(S.params,b,k);if(!R.key){return{hash:u};}a=o.paramsToString(R.tailParams);this._storeValue(R.key,a,s);return{hash:p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:R.headParams,appSpecificRoute:S.appSpecificRoute}),params:R.headParams,skippedParams:R.tailParams};};this.checkHashLength=function(u){var s,r,p,o;if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}o=sap.ushell.Container.getService("URLParsing");s=o.parseShellHash(u);p='';if(u.charAt(0)==='#'){p='#';}r=this._splitParameters(s.params,[],"DummyKey");if(r.key){jQuery.sap.log.error("Application startup parameter length exceeds "+t.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+o.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:r.headParams,appSpecificRoute:s.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams};}jQuery.sap.log.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:u};};this._findIndex=function(a,T){var r=a.indexOf(T);if(r>=0){return r;}r=-1;a.every(function(A,i){if(A.length>0&&A[A.length-1]==="*"&&A.substring(0,A.length-1)===T.substring(0,A.length-1)){r=i;return false;}return true;});return r;};this._cmpByList=function(a,A,b){var i,c;a=a||[];if(A===b){return 0;}i=this._findIndex(a,A);c=this._findIndex(a,b);if(i>=0&&c>=0){if((i-c)!==0){return i-c;}if(A<b){return-1;}if(A>b){return+1;}return 0;}if(i>=0){return-1;}if(c>=0){return+1;}if(A<b){return-1;}return+1;};this._sortByPriority=function(l,r){return l.sort(this._cmpByList.bind(this,r));};this._splitParameters=function(p,r,K){var a,i,k,h={},b={},c=false,o,d,e=0,f,l=[];if(!K||typeof K!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!");}for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a);}}l.sort();l=this._sortByPriority(l,r);for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<o.length;i=i+1){d=p[a][i];f=a.length+d.length;if(f+e>this.URL_PARAMS_LENGTH_LIMIT){if(b[a]){b[a].push(d);}else{b[a]=[d];}c=true;}else if(h[a]){h[a].push(d);}else{h[a]=[d];}e=e+f+1;}}if(c){h[this.ABBREV_PARAM_NAME]=[K];}return{key:K,tailParams:b,headParams:h};};this.expandHash=function(u){var r=function(k){return t._retrieveValue(k);};return this.expandParamGivenRetrievalFunction(u,this.ABBREV_PARAM_NAME,r);};this.expandParamGivenRetrievalFunction=function(u,p,r){var s,v,k,a,b;if(typeof u!=="string"){return u;}s=sap.ushell.Container.getService("URLParsing").parseShellHash(u);k=s&&s.params&&s.params[p]&&s.params[p][0];if(!k){return u;}a='';if(u.charAt(0)==='#'){a='#';}v=r(k);if(!v){return u;}b=this._blendParameters(s.params,p,v);return a+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:b,appSpecificRoute:s.appSpecificRoute});};this._retrieveValue=function(k){return undefined;};this._storeValue=function(k,v,s){if(s&&typeof s.store==="function"){s.store(v);}};this._blendParameters=function(p,P,v){var n=sap.ushell.Container.getService("URLParsing").parseParameters("?"+v),a;delete p[P];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a]);}else{p[a]=n[a];}}}return p;};};U.hasNoAdapter=true;return U;},true);sap.ui.predefine('sap/ushell/services/Ui5ComponentHandle',[],function(){"use strict";var U=function(c){this._oComponent=c;};U.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){});};U.prototype.getInstance=function(){return this._oComponent;};U.prototype.getMetadata=function(){return this._oComponent.getMetadata();};return U;});sap.ui.predefine('sap/ushell/services/Ui5ComponentLoader',["sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils"],function(U,u){"use strict";function a(c,p,C){this._oConfig=(C&&C.config)||{};this.createComponent=function(A,P,w){var o=A||{};var l=u.shouldLoadCoreExt(o);var b=u.shouldUseAmendedLoading(this._oConfig);var L=u.shouldLoadDefaultDependencies(o,this._oConfig,b);var d=o.applicationDependencies||{};u.logAnyApplicationDependenciesMessages(d.name,d.messages);if(!o.ui5ComponentName){return new jQuery.Deferred().resolve(A).promise();}delete o.loadCoreExt;delete o.loadDefaultDependencies;var e=this._createComponentData(o.componentData||{},o.url,o.applicationConfiguration,o.reservedParameters);var s=u.constructAppComponentId(P||{});var f=l&&b;var g=this._createComponentProperties(f,L,w,o.applicationDependencies||{},o.ui5ComponentName,o.url,s);U.onBeforeApplicationInstanceCreated.call(null,g);var D=new jQuery.Deferred();u.createUi5Component(g,e).then(function(h){var i=new U(h);o.componentHandle=i;var j=l&&(l||bCoreExtAlreadyLoaded||(b===false));if(j){o.coreResourcesFullyLoaded=j;}D.resolve(o);},function(E){var h=JSON.stringify(g,null,4);u.logInstantiateComponentError(g.name,E+"",E.status,E.stack,h);D.reject(E);});return D.promise();};this._createComponentData=function(b,s,A,t){var o=jQuery.extend(true,{startupParameters:{}},b);if(A){o.config=A;}if(t){o.technicalParameters=t;}if(u.urlHasParameters(s)){var d=u.getParameterMap(s);o.startupParameters=d.startupParameters;if(d["sap-xapp-state"]){o["sap-xapp-state"]=d["sap-xapp-state"];}}return o;};this._createComponentProperties=function(A,l,w,o,s,b,d){var e=jQuery.extend(true,{},o);if(!e.asyncHints){e.asyncHints=l?{"libs":["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{};}if(A){e.asyncHints.preloadBundles=e.asyncHints.preloadBundles||[];if(window["sap-ui-debug"]){e.asyncHints.preloadBundles.push("sap/fiori/core-ext-light-dbg.js");}else{e.asyncHints.preloadBundles.push("sap/fiori/core-ext-light-0.js");e.asyncHints.preloadBundles.push("sap/fiori/core-ext-light-1.js");e.asyncHints.preloadBundles.push("sap/fiori/core-ext-light-2.js");e.asyncHints.preloadBundles.push("sap/fiori/core-ext-light-3.js");}}if(w){e.asyncHints.waitFor=w;}if(!e.name){e.name=s;}if(b){e.url=u.removeParametersFromUrl(b);}if(d){e.id=d;}return e;};}a.hasNoAdapter=true;return a;},true);sap.ui.predefine('sap/ushell/services/UserDefaultParameterPersistence',[],function(){"use strict";var v=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];function U(a,c,p,C){this._oAdapter=a;this._oData={};};U.prototype._cleanseValue=function(V){var r=jQuery.extend(true,{},V),a;for(a in r){if(r.hasOwnProperty(a)){if(v.indexOf(a)<0){delete r[a];}}}return r;};U.prototype._testValue=function(V){return true;};U.prototype.loadParameterValue=function(p){var d=new jQuery.Deferred(),t=this;if(this._oData[p]){d.resolve(this._oData[p]);}else{this._oAdapter.loadParameterValue(p).done(function(V){var c=t._cleanseValue(V);if(t._testValue(c)){d.resolve(c);}else{jQuery.sap.log.error("flawed value returned from persistence");d.reject("flawed value returned from persistence");}}).fail(d.reject.bind(this));}return d.promise();};U.prototype.saveParameterValue=function(p,V){var d,c;if(!V){return this.deleteParameter(p);}c=this._cleanseValue(V);d=new jQuery.Deferred();if(!this._testValue(c)||(V&&V.noStore===true)){return d.resolve().promise();}this._oData[p]=c;return this._oAdapter.saveParameterValue(p,c);};U.prototype.deleteParameter=function(p){delete this._oData[p];return this._oAdapter.deleteParameter(p);};U.prototype.getStoredParameterNames=function(){var d=new jQuery.Deferred();this._oAdapter.getStoredParameterNames().done(function(r){r.sort();d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};U.hasNoAdapter=false;return U;},true);sap.ui.predefine('sap/ushell/services/UserDefaultParameters',['sap/ui/base/EventProvider','sap/ushell/utils'],function(E,u){"use strict";var e="valueStored";var s=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];function U(a,c,p,C){this._aPlugins=[];this._oUserDefaultParametersNames=undefined;this._oWasParameterPersisted={};var t=this,S=new E();function g(P){var v=(typeof P.getComponentData==="function"&&P.getComponentData()&&P.getComponentData().config&&P.getComponentData().config["sap-priority"])||0;if(typeof v!=="number"||isNaN(v)){return 0;}return v;}this._insertPluginOrdered=function(P,o){var d=g(o),i,f;for(i=0;(i<P.length)&&o;++i){f=g(P[i]);if(o&&(d>f)){P.splice(i,0,o);o=undefined;}}if(o){P.push(o);}return P;};this.registerPlugin=function(P){this._aPlugins=this._insertPluginOrdered(this._aPlugins,P);};function b(i,P,d,v,D){if(i>=P.length){D.resolve(v);return;}if(typeof P[i].getUserDefault!=="function"){b(i+1,P,d,v,D);return;}P[i].getUserDefault(d,v).done(function(n){if(n){b(i+1,P,d,n,D);}else{b(i+1,P,d,v,D);}}).fail(function(){jQuery.sap.log.error("invocation of getUserDefault(\""+d+"\") for plugin "+t._getComponentNameOfPlugin(P[i])+" rejected.",null,"sap.ushell.services.UserDefaultParameters");b(i+1,P,d,v,D);});return;}this._getStoreDate=function(){return new Date().toString();};this._storeValue=function(P,v,f){var t=this;var r=new jQuery.Deferred();var d=new jQuery.Deferred();if(f&&v.extendedValue){sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(o){var h=t._extractKeyArrays(o);var i=h.extended;d.resolve(i.indexOf(P)<0);}).fail(function(){d.resolve(false);});}else{d.resolve(false);}d.done(function(R){if(R){v.extendedValue=undefined;}if(f&&t._isInitial(v)){v=undefined;t._oWasParameterPersisted[P]=false;}else{v._shellData=jQuery.extend(true,{storeDate:t._getStoreDate()},v._shellData);}sap.ushell.Container.getService("UserDefaultParameterPersistence").saveParameterValue(P,v).always(function(){var o={parameterName:P,parameterValue:u.clone(v||{})};S.fireEvent(e,o);r.resolve(P);});});return r.promise();};this._getPersistedValue=function(P){var o=sap.ushell.Container.getService("UserDefaultParameterPersistence");return o.loadParameterValue(P);};this._isInitial=function(v){return!v||(!v.value&&!v.extendedValue);};this._haveSameMembersValue=function(o,O,m){return m.every(function(r){return(o[r]===O[r]||jQuery.sap.equal(o[r],O[r]));});};this._getUserDefaultParameterNames=function(){if(!this._oUserDefaultParametersNames){this._oUserDefaultParametersNames=new jQuery.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(P){var o=t._extractKeyArrays(P);var d=o.extended;var A=o.allParameters;var m=t._arrayToObject(A);if(m.length===0){t._oUserDefaultParametersNames.resolve({});}else{t._oUserDefaultParametersNames.resolve({aAllParameterNames:A,aExtendedParameterNames:d,oMetadataObject:m});}});}return this._oUserDefaultParametersNames.promise();};this._isRelevantParameter=function(P){var d=new jQuery.Deferred();this._getUserDefaultParameterNames().done(function(r){if(r.aAllParameterNames&&r.aAllParameterNames.indexOf(P)!==-1){d.resolve();}else{d.reject();}});return d.promise();};this.hasRelevantMaintainableParameters=function(){var t=this,r=new jQuery.Deferred(),h=false,G=[];t._getUserDefaultParameterNames().done(function(P){if(!jQuery.isEmptyObject(P)&&P.aAllParameterNames){P.aAllParameterNames.forEach(function(d){var o=t.getValue(d);G.push(o);o.done(function(v){if(v&&!v.hasOwnProperty("noEdit")){h=true;return;}});});jQuery.when.apply(undefined,G).done(function(){r.resolve(h);}).fail(function(){r.resolve();});}else{r.resolve();}});return r.promise();};this.getValue=function(P){var t=this,d=new jQuery.Deferred();this._isRelevantParameter(P).fail(function(){d.resolve({});}).done(function(){jQuery.when(t._getPersistedValue(P)).then(function(o){t._oWasParameterPersisted[P]=true;return jQuery.when(o||{});},function(){return jQuery.when({value:undefined});}).then(function(o){var G=new jQuery.Deferred(),v=u.clone(o),f=sap.ushell.Container.getService("PluginManager");var A=(!o._shellData&&t._isInitial(o))||o.noStore||o.alwaysAskPlugin;if(!A){d.resolve(v);return;}f.loadPlugins("UserDefaults").done(function(){b(0,t._aPlugins,P,o,G);}).fail(function(){jQuery.sap.log.error("Cannot get value for "+P+". One or more plugins could not be loaded.");G.reject("Initialization of plugins failed");});G.done(function(n){if(!t._oWasParameterPersisted[P]||!t._haveSameMembersValue(v,n,s)){t._oWasParameterPersisted[P]=true;t._storeValue(P,n);}d.resolve(n);}).fail(d.reject.bind(d));});});return d.promise();};this._addParameterValuesToParameters=function(P,d){var D=new jQuery.Deferred();var f=[];var t=this;d.forEach(function(h){var n=t.getValue(h);f.push(n);n.done(function(v){P[h].valueObject=v;});});jQuery.when.apply(jQuery,f).done(D.resolve.bind(D,P)).fail(D.reject.bind(D,P));return D.promise();};this._arrayToObject=function(P){var r={};P.forEach(function(d){r[d]={};});return r;};this._getComponentNameOfPlugin=function(P){if(typeof P!=="object"||typeof P.getMetadata!=="function"||!P.getMetadata()||typeof P.getMetadata().getComponentName!=="function"){return"'name of plugin could not be determined'";}return P.getMetadata().getComponentName()||"";};this._getEditorDataAndValue=function(d,A,f,m){var t=this;var P=[];var r=[];t._aPlugins.forEach(function(o,i){if(typeof o.getEditorMetadata==="function"){var n=new jQuery.Deferred();P.push(n);try{var h=P.length-1;o.getEditorMetadata(m).done(function(R){r[h]=R;}).always(function(){n.resolve();}).fail(function(){jQuery.sap.log.error("EditorMetadata for plugin "+t._getComponentNameOfPlugin(o)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");n.resolve();});}catch(j){jQuery.sap.log.error("Error invoking getEditorMetaData on plugin: "+j+j.stack,null,"sap.ushell.services.UserDefaultParameters");n.resolve();}}});jQuery.when.apply(jQuery,P).done(function(){var h=[];var o=r.reverse().reduce(function(i,n){A.forEach(function(j){if(n[j]&&n[j].editorMetadata){i[j].editorMetadata=n[j].editorMetadata;}});return i;},m);A.forEach(function(i){if(!(o[i]&&o[i].editorMetadata)){h.push(i);}});t._addParameterValuesToParameters(o,A).done(function(i){var j=jQuery.extend(true,{},i),k;f.forEach(function(l){if(j[l]){j[l].editorMetadata=j[l].editorMetadata||{};j[l].editorMetadata.extendedUsage=true;}});k=Object.keys(j).splice(0);k.forEach(function(l){var n;if(j[l].valueObject&&j[l].valueObject.noEdit===true){delete j[l];n=h.indexOf(l);if(n>=0){h.splice(n,1);}}});if(h.length>0){jQuery.sap.log.error("The following parameter names have no editor metadata and thus likely no configured plugin:\n\""+h.join("\",\n\"")+"\".");}d.resolve(j);}).fail(d.reject.bind(d));});};this.editorGetParameters=function(){var d=new jQuery.Deferred();var t=this;this._getUserDefaultParameterNames().done(function(P){if(P.oMetadataObject.length===0){d.resolve({});}else{sap.ushell.Container.getService("PluginManager").loadPlugins("UserDefaults").done(function(){t._getEditorDataAndValue(d,P.aAllParameterNames,P.aExtendedParameterNames,P.oMetadataObject);}).fail(function(){jQuery.sap.log.error("One or more plugins could not be loaded");d.reject("Initialization of plugins failed");});}});return d.promise();};this._extractKeyArrays=function(P){var r={extended:[],simple:[],allParameters:[]};r.simple=(P&&P.simple&&Object.keys(P.simple).sort())||[];r.extended=(P&&P.extended&&Object.keys(P.extended).sort())||[];r.allParameters=r.simple.concat(r.extended.filter(function(d){return r.simple.indexOf(d)<0;})).sort();return r;};this.editorSetValue=function(P,v){return this._storeValue(P,v,true);};this.attachValueStored=function(f){S.attachEvent(e,f);};this.detachValueStored=function(f){S.detachEvent(e,f);};};U.hasNoAdapter=true;return U;},true);sap.ui.predefine('sap/ushell/services/UserInfo',[],function(){"use strict";function U(a,c){this.getId=function(){return sap.ushell.Container.getUser().getId();};this.getUser=function(){return sap.ushell.Container.getUser();};this.getThemeList=function(){var p=a.getThemeList();p.fail(function(){jQuery.sap.log.error("getThemeList failed");});return p;};this.updateUserPreferences=function(){var p=a.updateUserPreferences(sap.ushell.Container.getUser());p.fail(function(){jQuery.sap.log.error("updateAttributes: ");});return p;};this.getLanguageList=function(){var p=a.getLanguageList();p.fail(function(){jQuery.sap.log.error("getLanguageList failed");});return p;};};U.hasNoAdapter=false;return U;},true);sap.ui.predefine('sap/ushell/services/_AppState/AppState',[],function(){function A(S,k,m,d,a,b,t){this._oServiceInstance=S;this._sKey=k;this._sData=d;this._sAppName=a;this._sACHComponent=b;this._bTransient=t;if(m){this.setData=function(D){try{this._sData=JSON.stringify(D);}catch(e){jQuery.sap.log.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined;}};this.save=s.bind(this);}};function s(){var d=new jQuery.Deferred();this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient).done(function(){d.resolve();}).fail(function(m){d.reject(m);});return d.promise();}A.prototype.getData=function(){var o;if(this._sData===undefined||this._sData===""){return undefined;}try{o=JSON.parse(this._sData);}catch(e){jQuery.sap.log.error("Could not parse ["+this._sData+"]"+e);}return o;};A.prototype.getKey=function(){return this._sKey;};return A;});sap.ui.predefine('sap/ushell/services/_AppState/LimitedBuffer',[],function(){"use strict";function L(c){this.index=-1;this.capacity=c;this.array=[];}L.prototype._clear=function(){this.array=[];this.index=-1;};L.prototype.addAsHead=function(k,v){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:k,value:v};};L.prototype.getByKey=function(k){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){return this.array[e];}}return undefined;};return L;});sap.ui.predefine('sap/ushell/services/_AppState/Sequentializer',[],function(){"use strict";function S(){this.oLastPromise=new jQuery.Deferred();this.oLastPromise.resolve();};S.prototype.addToQueue=function(f){var n=new jQuery.Deferred();this.oLastPromise.always(function(){var r=f();r.done(function(){n.resolve.apply(n,arguments);}).fail(function(){n.reject.apply(n,arguments);});});this.oLastPromise=n;return n.promise();};return S;});sap.ui.predefine('sap/ushell/services/_AppState/SequentializingAdapter',["sap/ushell/services/_AppState/Sequentializer"],function(S){"use strict";function a(u){this._oSequentializer=new S();this._oUnderlyingAdapter=u;};a.prototype.saveAppState=function(k,s,d,A,c){var f;f=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,k,s,d,A,c);return this._oSequentializer.addToQueue(f);};a.prototype.loadAppState=function(k){return this._oUnderlyingAdapter.loadAppState(k);};return a;});sap.ui.predefine('sap/ushell/services/_AppState/WindowAdapter',["sap/ushell/services/_AppState/LimitedBuffer"],function(L){"use strict";var W=50;function a(){this._init.apply(this,arguments);}a.prototype._init=function(s,b,c){var i=c&&c.config&&c.config.initialAppStates||{};var I=c&&c.config&&c.config.initialAppStatesPromise;this._oServiceInstance=s;this._oBackendAdapter=b;if(!a.prototype.data){a.prototype.data=new L(W);}if(I){I.then(function(i){if(typeof i==="object"){Object.keys(i).forEach(function(k){a.prototype.data.addAsHead(k,i[k]);});}});}Object.keys(i).forEach(function(k){a.prototype.data.addAsHead(k,i[k]);});};a.prototype.saveAppState=function(k,s,d,A,c,t){this.sComponent=c;var D=new jQuery.Deferred();a.prototype.data.addAsHead(k,d);if(this._oBackendAdapter&&!t){return this._oBackendAdapter.saveAppState(k,s,d,A,c);}D.resolve();return D.promise();};a.prototype.loadAppState=function(k){var d=new jQuery.Deferred(),b=a.prototype.data.getByKey(k);if(b){setTimeout(function(){d.resolve(k,b.value);},0);return d.promise();}if(this._oBackendAdapter){this._oBackendAdapter.loadAppState(k).done(function(k,D){a.prototype.data.addAsHead(k,D);d.resolve(k,D);}).fail(d.reject.bind(d));return d.promise();}d.reject("AppState.js loadAppState: Application State could not be loaded");return d.promise();};return a;});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Formatter',[],function(){"use strict";function f(i){return"#"+i.semanticObject+"-"+i.action+"{"+a(i.signature)+"}";}function p(i){var m=i.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!m){throw"Cannot parse inbound";}var r={semanticObject:m[1],action:m[2],signature:{parameters:{}}};if(!m[3]){return r;}r.signature=b(m[4]);return r;}function a(i){var I=i||{},P=I.parameters||{},t={optional:"[FORMAT]",required:"FORMAT"},F={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},A={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var h=P&&Object.prototype.toString.apply(P)==="[object Object]"&&Object.keys(P).length>0;if(!h){return"<no params>"+(A[I.additionalParameters]||A._unknown);}var r=[];Object.keys(P).forEach(function(s){var o=P[s],c=o.required?"required":"optional",d=o.filter&&o.filter.value,e=o.defaultValue&&o.defaultValue.value,g=(o.filter&&o.filter.format)||"plain",j=(o.defaultValue&&o.defaultValue.format)||"plain";var v=[],k=F[g]||F._unknown,l=F[j]||F._unknown;if(d){v.push(t["required"].replace("FORMAT",k.replace("VALUE",d)));}if(e){v.push(t["optional"].replace("FORMAT",l.replace("VALUE",e)));}r.push(t[c].replace("FORMAT",s+":"+v.join("")));});return r.join(",")+(A[I.additionalParameters]||A._unknown);}function b(c){function d(v){var V=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,D){var m=v.match(D.re);if(r){return r;}if(!m){return null;}return{format:D.format,value:m[1]};},null);if(V){return V;}return{value:v};}function e(j){var n,k,l,m,o,w,M,q,t,O,R,N;N="<no params>";n="[^\\]\\[]";R="("+n+"+?):("+n+"*)(.*)";O="\\["+R+"\\]";t=N+"|"+O+"|"+R;q=new RegExp("^"+t+"$");o={success:false,name:null,value:{}};M=j.match(q);if(!M){return o;}w=M.shift();while(M.length>0){m=M.shift();l=M.shift();k=M.shift();if(m){o.name=m;if(l){o.value.filter=d(l);}if(k){o.value.defaultValue=d(k.replace(/\[(.+)\]/,"$1"));}o.value.required=(w.charAt(0)!=="[");}}o.success=true;return o;}function g(j){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(R,o,I,k){if(R){return R;}var l=Object.keys(o)[0];if(j===l){return o[l];}return null;},null);}function s(P){var I=[];P.split(":").reduce(function(j,n,k,l){var v,N,V;if(k===0){return n;}if(k<l.length-1){V=n.split(",");if(V.length>1){N=V.pop();v=V.join(",");}else{return j+":"+n;}}else{v=n;}I.push([j,v].join(":"));return N;},"");return I;}var r={parameters:{}};var A=c.substr(c.length-3,3);var h=!!A.match(/<[?o+-]>/);var P=c;if(h){P=c.substr(0,c.length-3);}var S=s(P);S.forEach(function(j){var o=e(j);if(!o.success){throw new Error("Cannot parse parameters from "+c);}if(o.name){r.parameters[o.name]=o.value;}});if(h){var i=g(A);if(i){r.additionalParameters=g(A);}}else{r.additionalParameters="ignored";}return r;}return{formatInboundSignature:a,parseInboundSignature:b,parseInbound:p,formatInbound:f};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundIndex',[],function(){"use strict";function g(){return this.index.all;}function a(S){if(S==="*"||S===undefined){return this.index.all;}return(this.index.segment[S]||[]).concat(this.index.always);}function b(T){return T.map(function(d){return this.index.tag[d]||[];},this).reduce(function(u,I){Array.prototype.push.apply(u,I.filter(function(o){return o.isAlreadyInUnion?false:(o.isAlreadyInUnion=true);}));return u;},[]).map(function(I){delete I.isAlreadyInUnion;return I;});}var i=Object.create(Object.prototype,{getSegment:{value:a},getAllInbounds:{value:g},getSegmentByTags:{value:b}});function t(I,o){var T=jQuery.sap.getObject('signature.parameters.sap-tag.defaultValue.value',undefined,I);if(!T){return;}if(!o.tag[T]){o.tag[T]=[];}o.tag[T].push(I);}function s(I,o){var S=I.semanticObject;if(S==="*"){o.always.push(I);}else{if(!o.segment[S]){o.segment[S]=[];}o.segment[S].push(I);}}function c(I){var o={all:I,segment:{},always:[],tag:{}};I.forEach(function(d,e){if(!d){jQuery.sap.log.warning("Void inbound provided to indexer","the inbound will be skipped");return;}t(d,o);s(d,o);});return Object.create(i,{index:{value:o}});}return{createIndex:c,private:{tagInbound:t,createIndex:c,segmentInbound:s}};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundProvider',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(v,i){"use strict";function I(){this._init.apply(this,arguments);};I.prototype._init=function(r){this._fnRetrieveInbounds=r;this._oInboundsRetrievalPromise=null;};I.prototype.getInbounds=function(s){if(s){return this._getSomeInbounds(s);}return this._getAllInbounds();};I.prototype._getSomeInbounds=function(s){var t=this;return new Promise(function(r,R){t._fnRetrieveInbounds(s).done(function(a){r(i.createIndex(a.concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});};I.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise;}this._oInboundsRetrievalPromise=new Promise(function(r,R){t._fnRetrieveInbounds().done(function(a){r(i.createIndex((a||[]).concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});return this._oInboundsRetrievalPromise;};return I;});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Search',["sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter"],function(u,v,f){"use strict";var A=[undefined,"GUI","WDA","UI5"];function a(M,I){var r=M.inbound.resolutionResult;if(!r){return"";}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(K){if(I){return r.hasOwnProperty(K)?K+":"+r[K]:"";}return r.hasOwnProperty(K)?r[K]:"";}).join("");}function b(M){return M.sort(function(p,q){if((p["sap-priority"]||0)-(q["sap-priority"]||0)!==0){return-((p["sap-priority"]||0)-(q["sap-priority"]||0));}if(p.priorityString<q.priorityString){return 1;}if(p.priorityString>q.priorityString){return-1;}return(a(p)<a(q))?1:-1;});}function e(I,M){var s;if(I&&I["sap-priority"]&&I["sap-priority"][0]){s=parseInt(I["sap-priority"][0],10);if(!isNaN(s)){M["sap-priority"]=s;}}return;}function m(V,F,K,M){var s;if(!F){return true;}if(!V&&V!==""){return false;}s=F.value;if(F.format==="reference"){if(/UserDefault\.extended\./.test(s)){jQuery.sap.log.error("Illegal inbound: extended user default '"+s+"' used as filter");return false;}if(K.hasOwnProperty(s)){return V===K[s];}M[s]=true;return true;}if(F.format==="value"||F.format==="plain"||F.format===undefined){return V===F.value;}else if(F.format==="regexp"){return!!V.match("^"+F.value+"$");}else{jQuery.sap.log.error("Illegal oFilter format");return false;}}function g(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.ui"]&&M.inbound.resolutionResult["sap.ui"].technology;}function c(I,s,K,M,D){var p={},q={};Object.keys(I).forEach(function(P){if(P!=="sap-ushell-defaultedParameterNames"){p[P]=I[P];}});if(!s){return p;}Object.keys(s).forEach(function(P){var t=s[P],T,V=false;if(!p[P]&&t.hasOwnProperty("defaultValue")){if(t.defaultValue.format&&t.defaultValue.format==="reference"){T=t.defaultValue.value;if(K.hasOwnProperty(T)){if(typeof K[T]==="string"){p[P]=[K[T]];V=true;}else if(typeof K[T]==="object"){p[P]=K[T];V=true;}}else{p[P]=[t.defaultValue];M.push(t.defaultValue.value);}}else{p[P]=[t.defaultValue.value];V=true;}if(V){q[P]=true;}}});Object.keys(q).sort().forEach(function(P){D.push(P);});return p;}function d(M,I){M.resolutionResult={};if(I&&I.resolutionResult&&I.resolutionResult.hasOwnProperty("sap.platform.runtime")){M.resolutionResult["sap.platform.runtime"]=I.resolutionResult["sap.platform.runtime"];}Object.keys(M.intentParamsPlusAllDefaults).slice(0).forEach(function(N){if(!jQuery.isArray(M.intentParamsPlusAllDefaults[N])){if(!M.resolutionResult.oNewAppStateMembers){M.resolutionResult.oNewAppStateMembers={};}M.resolutionResult.oNewAppStateMembers[N]=M.intentParamsPlusAllDefaults[N];}});}function h(r,M){r.forEach(function(R){M[R]=true;});}function i(M){var t=M.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var I=M.defaultedParamNames&&(M.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0);if(t&&g(M)===t){return I?1:2;}return 0;};function j(M){function p(N){var s="000"+N;return s.substr(s.length-3);}M.priorityString=[M.genericSO?"g":"x","TECM="+i(M),"MTCH="+p(M.countMatchingParams),"MREQ="+p(M.countMatchingRequiredParams),"NFIL="+p(M.countMatchingFilterParams),"NDEF="+p(M.countDefaultedParams),"POT="+p(M.countPotentiallyMatchingParams),"RFRE="+p(999-M.countFreeInboundParams),"TECP="+k(M)].join(" ");};function k(M){var t=g(M);var p=A.indexOf(t);return Math.max(0,p);}function l(I,p){var q=false;if(I.signature.additionalParameters==="allowed"||I.signature.additionalParameters==="ignored"){return true;}if(I.signature.additionalParameters==="notallowed"||I.signature.additionalParameters===undefined){q=Object.keys(p).every(function(P){return(!I.signature.parameters[P]&&P.indexOf("sap-")!==0)?false:true;});}else{jQuery.sap.log.error("Unexpected value of inbound for signature.additionalParameters");}return q;}function n(I,p,K,D){var M=p.reduce(function(r,q){var s=o(I,q,K,r.missingReferences);if(s.matches){r.matchResults.push(s);}else if(D){(function(){var N=r.noMatchReasons;var t=f.formatInbound(q);N[t]=s.noMatchReason+(s.noMatchDebug?"| DEBUG: "+s.noMatchDebug:"");})();}return r;},{matchResults:[],noMatchReasons:{},missingReferences:{}});return jQuery.when(M);}function o(I,p,K,M){var q={inbound:p};function N(E,F,G){E.matches=false;E.noMatchReason=F;E.noMatchDebug=G;return E;}function r(E){E.matches=true;E.matchesVirtualInbound=v.isVirtualInbound(p);return E;}q.genericSO=(p.semanticObject==="*");if(!(I.semanticObject===undefined||I.semanticObject===p.semanticObject||p.semanticObject==='*')){return N(q,"Semantic object \""+I.semanticObject+"\" did not match");}if(!(I.action===undefined||I.action===p.action)){return N(q,"Action \""+I.action+"\" did not match");}if(p.deviceTypes&&!(I.formFactor===undefined||p.deviceTypes[I.formFactor])){return N(q,"Form factor \""+I.formFactor+"\" did not match","Inbound: ["+Object.keys(p.deviceTypes).filter(function(E){return!!p.deviceTypes[E];}).join(", ")+"]");}var t=I.params&&I.params["sap-ui-tech-hint"]&&I.params["sap-ui-tech-hint"][0];if(I.treatTechHintAsFilter&&t){var s=g({inbound:p});if(s!==t){return N(q,"Tech Hint as filter \""+t+"\" did not match","Inbound: ["+s+"]");}}var R=[],D=[],w=I.params||{};var x=c(w,p.signature&&p.signature.parameters,K,R,D);q.intentParamsPlusAllDefaults=x;q.defaultedParamNames=D;e(x,q);var y=0,z=0,B=0,C=0;var S=Object.keys(p.signature.parameters).every(function(P){var V=x[P],E=V&&V[0],F=p.signature.parameters[P],G=w.hasOwnProperty(P);if(F.required&&(E===null||E===undefined)){return false;}if(F.filter){if(!m(E,F.filter,K,M)){return false;}if(G){++B;}}if(G&&F.required){++z;}if(G){++y;}if(!G&&(E===null||E===undefined)){++C;}var H=u.constructParameterDominatorMap(p.signature.parameters);var J=u.removeSpuriousDefaultedValues(q.intentParamsPlusAllDefaults,q.defaultedParamNames,H);q.intentParmsPlusAllDefaults=J.intentParmsPlusAllDefaults;q.defaultedParamNames=J.defaultedParamNames;return true;});q.countMatchingParams=y;q.countMatchingRequiredParams=z;q.countMatchingFilterParams=B;q.countDefaultedParams=D.length;q.countPotentiallyMatchingParams=Object.keys(w).length;q.countFreeInboundParams=C;if(!S){return N(q,"Inbound parameter signature did not match",f.formatInboundSignature(p.signature));}if(!l(p,x)){return N(q,"Additional parameters not allowed",f.formatInboundSignature(p.signature));}if(p.signature.additionalParameters==="ignored"){u.filterObjectKeys(x,function(E){if(E.indexOf("sap-")===0){return true;}if(p.signature.parameters.hasOwnProperty(E)){return true;}return false;},true);q.countPotentiallyMatchingParams=Object.keys(w).filter(function(E){return p.signature.parameters.hasOwnProperty(E);}).length;}d(q,p);j(q);h(R,M);return r(q);};return{match:n,matchOne:o,sortMatchingResultsDeterministic:b,matchesFilter:m,checkAdditionalParameters:l,addDefaultParameterValues:c,extractSapPriority:e,serializeMatchingResult:a};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/StagedLogger',["sap/ushell/services/_ClientSideTargetResolution/Utils"],function(u){"use strict";var _={};function b(g){var L,o,s=g();if(!s.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.");}L=s.logId;if(_[L]){throw new Error("'cannot call #begin twice with same log id: '"+L+"'");}else{_[L]={};}o=_[L];o.title=s.title||null;o.moduleName=s.moduleName||null;var r=function(c,n){if(n===1){return c}else{return r(c,n-1)+c;}};o.stages=s.stages.map(function(S){return[S,r('-',S.length)];});return L;}function l(g){var L,c,s,d,p,S,n,A;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}L=A.logId;S=A.stage;p=A.prefix;d=A.lines;s=A.line;n=A.number;if(!d&&s&&p){s=p+" "+s;}c=_[L].stages[S-1];if(s){c.push(s);}if(d){if(p){p=(s?" ":"")+p;}var f=d.map(function(s,i){return(n?(i+1):"")+(p?p+" ":"")+s;});c.push.apply(c,f);}}function e(g){var A,L,s;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;L=_[s];if(typeof L!=="object"){throw new Error("Logger .end was called on an already ended logger");}var c=L.stages.map(function(S){return S.join("\n");}).join("\n\n");jQuery.sap.log.debug("[REPORT #"+s+"] "+L.title,"\n"+c+"\n",L.moduleName);delete _[s];}function a(){return _;}return{begin:function(){if(!u.isDebugEnabled()){return;}b.apply(null,arguments);},log:function(){if(!u.isDebugEnabled()){return;}l.apply(null,arguments);},end:function(){if(!u.isDebugEnabled()){return;}e.apply(null,arguments);},_getLogs:a};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Utils',[],function(v,f){"use strict";function r(I,D,p){var o=D.slice(0);o.forEach(function(P,e){var s;var n=p[P].dominatedBy.some(function(k){if(I[k]&&(k!==P)&&D.indexOf(k)===-1){s=k;return true;}return false;});if(n&&(s!==P)){D.splice(e,1);delete I[P];}});return{intentParamsPlusAllDefaults:I,defaultedParamNames:D};}function c(p){var D={},R={};Object.keys(p).forEach(function(k){var s=p[k].renameTo||k;R[s]=R[s]||{"renameTo":s,"dominatedBy":[]};R[s].dominatedBy.push(k);R[s].dominatedBy=R[s].dominatedBy.sort();D[k]=R[s];});return D;}function a(o,F,I){var O=I?o:jQuery.extend(true,{},o);Object.keys(O).forEach(function(k){if(F(k)===false){delete O[k];}});return O;}function b(o,F){var e;e=Object.keys(o).reduce(function(e,k){var V=o[k];if(F(k,V)){e[k]=V;}return e;},{});return e;};function w(e){if(i()){e.call(null);}}function i(){var C=jQuery.sap.log.getLevel();if(C>=jQuery.sap.log.Level.DEBUG){return true;}return false;}function d(I,p){return p.every(function(P){var o,O,s;s=P.name;O=P.options;o=I[s];return Object.keys(O).every(function(e){var g=O[e];if(e==="required"){return!!(o||{}).required===g;}return false;});});}return{inboundSignatureMeetsParameterOptions:d,filterObjectKeys:a,filterObject:b,constructParameterDominatorMap:c,removeSpuriousDefaultedValues:r,whenDebugEnabled:w,isDebugEnabled:i};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds',[],function(){"use strict";var v={};var A=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderers.fiori2.search.container",additionalInformation:"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container",url:jQuery.sap.getResourcePath("sap/ushell/renderers/fiori2/search/container"),loadCoreExt:false,loadDefaultDependencies:false}}];v.isVirtualInbound=function(i){return A.some(function(V){return V===i;});};v.getInbounds=function(){return A;};return v;});sap.ui.predefine('sap/ushell/services/_CommonDataModel/PersonalizationProcessor',[],function(){"use strict";function P(){}P.prototype._getItemIndex=function(i,I){var r;for(r=0;r<i.length;r++){if(i[r].id===I){break;}}r=(r>=i.length)?-1:r;return r;};P.prototype._applyRenameGroup=function(g,n,o){var G,b=false;if(!n){return false;}if(g&&o&&o.groups&&o.groups[g]){G=o.groups[g];if(G.identification&&G.identification.title){o.groups[g].identification.title=n;b=true;}}return b;};P.prototype._applyGroupVisibility=function(g,G,o){var b=false;if(G===undefined){return false;}if(g&&o&&o.groups&&o.groups[g]){o.groups[g].identification.isVisible=G;b=true;}return b;};P.prototype.mixinPersonalization=function(o,p){var d=new jQuery.Deferred(),t=this;if(!p||jQuery.isEmptyObject(p)){return d.resolve(o).promise();}if(p.groups){Object.keys(p.groups).forEach(function(g){var G=p.groups[g];if(o.groups[g]){if(G.identification){if(G.identification.title){t._applyRenameGroup(g,G.identification.title,o);}if(G.identification.hasOwnProperty("isVisible")&&G.identification.isVisible===false){t._applyGroupVisibility(g,false,o);}}}});}this._applyAddGroups(o,p);if(p.removedGroups&&jQuery.isArray(p.removedGroups)){p.removedGroups.forEach(function(g){t._applyRemoveGroup(o,g);});}this._applyMoveGroup(o,p);this._applyItemChanges(o,p);this._applyTileSettings(o,p);return d.resolve(o).promise();};P.prototype._applyAddGroups=function(o,p){var n=[];o.site=o.site||{};o.site.payload=o.site.payload||{};o.site.payload.groupsOrder=o.site.payload.groupsOrder||[];o.groups=o.groups||{};if(jQuery.isArray(p.groupOrder)){o.site.payload.groupsOrder.forEach(function(g){if(p.groupOrder.indexOf(g)===-1){if((p.removedGroups&&p.removedGroups.indexOf(g)===-1)||!p.removedGroups){n.push(g);}}});}if(jQuery.isArray(p.groupOrder)&&p.addedGroups&&Object.keys(p.addedGroups).length>0){Object.keys(p.addedGroups).forEach(function(g){o.groups[g]=p.addedGroups[g];o.groups[g].payload.isPreset=false;});o.site.payload.groupsOrder=p.groupOrder;}n.forEach(function(N){o.site.payload.groupsOrder.push(N);});};P.prototype._checkRenameGroup=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.title!==o[g].identification.title){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.title=p[g].identification.title;}}}return a;};P.prototype._checkTileSettings=function(p,o){if(!p.modifiedTiles){return;}o.modifiedTiles=p.modifiedTiles;};P.prototype._applyTileSettings=function(s,p){var g,m;if(!p.modifiedTiles){return;}g=Object.keys(s.groups).map(function(k){return this[k];},s.groups);m=Object.keys(p.modifiedTiles).map(function(k){return this[k];},p.modifiedTiles);g.some(function(G){["tiles","links"].forEach(function(t){if(G.payload[t]){G.payload[t].some(function(T){var i;m.some(function(u,I){if(u.id===T.id){if(u.title!==undefined){T.title=u.title;}if(u.subTitle!==undefined){T.subTitle=u.subTitle;}if(u.info!==undefined){T.info=u.info;}i=I;return true;}return false;});if(i!==undefined){m.splice(i,1);}return m.length===0;});}});return m.length===0;});s.modifiedTiles=p.modifiedTiles;};P.prototype._checkGroupVisibility=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.isVisible!==o[g].identification.isVisible&&typeof p[g].identification.isVisible==="boolean"){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.isVisible=p[g].identification.isVisible;}}}return a;};P.prototype._addGroupToPersonalizationDelta=function(p,o,g){var s=false,G,n;if(p&&p.site&&p.site.payload&&p.site.payload.groupsOrder&&p.groups&&g&&p.groups[g]&&o){G=p.site.payload.groupsOrder;n=p.groups[g];o.addedGroups=o.addedGroups||{};o.addedGroups[g]={};o.addedGroups[g].identification=jQuery.extend({},n.identification);o.addedGroups[g].payload=jQuery.extend({},n.payload);o.addedGroups[g].payload.tiles=[];o.addedGroups[g].payload.links=[];o.groupOrder=G;s=true;}return s;};P.prototype.extractPersonalization=function(p,o){var d=new jQuery.Deferred(),a,b={},O,e,t=this;if(p&&p.groups&&o&&o.groups){a=p.groups;O=o.groups;e=this._getExtractHelperObject(o,p,b);Object.keys(O).forEach(function(g){t._checkRemoveGroup(p,b,g);t._extractFromOriginalSiteOneGroup(o,e,g,"tiles");t._extractFromOriginalSiteOneGroup(o,e,g,"links");});Object.keys(a).forEach(function(g){if(O[g]){t._checkRenameGroup(g,a,O,b);t._checkGroupVisibility(g,a,O,b);}else{t._addGroupToPersonalizationDelta(p,b,g);}t._extractFromPersonalizedSiteOneGroup(p,e,g,"tiles");t._extractFromPersonalizedSiteOneGroup(p,e,g,"links");});this._checkMoveGroup(p,o,b);this._checkTileSettings(p,b);this._cleanupRemovedGroups(o,b);if(e.oPersonalizationDelta.movedTiles&&jQuery.isEmptyObject(e.oPersonalizationDelta.movedTiles)){delete(e.oPersonalizationDelta.movedTiles);}if(e.oPersonalizationDelta.movedLinks&&jQuery.isEmptyObject(e.oPersonalizationDelta.movedLinks)){delete(e.oPersonalizationDelta.movedLinks);}}return d.resolve(b).promise();};P.prototype._checkRemoveGroup=function(p,o,O){var s=false;if(p&&p.groups&&o&&O){if(!p.groups[O]){o.removedGroups=o.removedGroups||[];o.groupOrder=o.groupOrder||[];if(o.removedGroups.indexOf(O)===-1){o.removedGroups.push(O);}if(p.site&&p.site.payload&&p.site.payload.groupsOrder&&jQuery.isArray(p.site.payload.groupsOrder)){o.groupOrder=p.site.payload.groupsOrder.slice(0);}}s=true;}return s;};P.prototype._applyRemoveGroup=function(o,g){var O,G,i;if(o&&o.groups&&o.site&&o.site.payload&&o.site.payload.groupsOrder&&g){O=o.groups;G=o.site.payload.groupsOrder;i=G.indexOf(g);if(!(i===-1)){G.splice(i,1);delete(O[g]);return true;}}return false;};P.prototype._checkMoveGroup=function(p,o,a){var b,O,c=false,s=false;if(p.site&&p.site.payload&&jQuery.isArray(p.site.payload.groupsOrder)&&o.site&&o.site.payload&&jQuery.isArray(o.site.payload.groupsOrder)){b=p.site.payload.groupsOrder;O=o.site.payload.groupsOrder;if(b.length===O.length){c=(function(){var S=false,i;for(i=0;i<O.length;i++){if(O[i]!==b[i]){S=true;break;}}return S;})();if(c){a.groupOrder=b;s=true;}}}return s;};P.prototype._applyMoveGroup=function(o,p){var s=false;if(jQuery.isArray(p.groupOrder)){o.site=o.site||{};o.site.payload=o.site.payload||{};if(!jQuery.isArray(o.site.payload.groupsOrder)){o.site.payload.groupsOrder=[];}if(o.site.payload.groupsOrder.length===p.groupOrder.length){o.site.payload.groupsOrder=p.groupOrder;s=true;}}return s;};P.prototype._getHashedItemsFromSite=function(s){var r=null;if(s&&s.groups){if(Object.keys(s.groups).length>0){r={};Object.keys(s.groups).forEach(function(g){var G=s.groups[g],a;r[g]={};if(G.payload){["tiles","links"].forEach(function(t){r[g][t]={};if(jQuery.isArray(G.payload[t])){a=G.payload[t];a.forEach(function(i,I){var b;if(i.id){b=i.id;r[g][t][b]={iIndex:I,sItemId:i};}});}});}});}}return r;};P.prototype._getExtractHelperObject=function(o,p,a){var r=null;r={};r.oHashedItemsOriginal=this._getHashedItemsFromSite(o)||{};r.oHashedItemsPersonalized=this._getHashedItemsFromSite(p);r.oPersonalizationDelta=a;return r;};P.prototype._extractFromOriginalSiteOneGroup=function(o,e,g,i){var s=false,O,m,M,p="movedTiles";i=i?i:"tiles";if(i!=="tiles"){p="movedLinks";}M=function(a,f){m[a]=m[a]?m[a]:{};m[a].fromGroup=f;m[a].toGroup=null;};if(e&&e.oHashedItemsPersonalized&&e.oPersonalizationDelta&&o&&o.groups&&o.groups[g]&&o.groups[g].payload&&jQuery.isArray(o.groups[g].payload[i])){O=o.groups[g].payload[i];e.oPersonalizationDelta[p]=e.oPersonalizationDelta[p]?e.oPersonalizationDelta[p]:{};m=e.oPersonalizationDelta[p];if(e.oHashedItemsPersonalized[g]){O.forEach(function(I){if(!e.oHashedItemsPersonalized[g][i][I.id]){M(I.id,g);}});s=true;}else{O.forEach(function(I){M(I.id,g);});s=true;}}return s;};P.prototype._handleItemChangeExtract=function(e,g,i){return false;};P.prototype._extractFromPersonalizedSiteOneGroup=function(p,e,g,i){var s=false,m,t,T=false,a,b=this,c="movedTiles";i=i?i:"tiles";if((i!=="tiles")&&(i!=="links")){return s;}if(i!=="tiles"){c="movedLinks";}if(e&&e.oPersonalizationDelta&&p&&p.groups&&p.groups[g]&&p.groups[g].payload&&jQuery.isArray(p.groups[g].payload[i])){a=p.groups[g].payload[i];e.oPersonalizationDelta[c]=e.oPersonalizationDelta[c]?e.oPersonalizationDelta[c]:{};m=e.oPersonalizationDelta[c];t=[];a.forEach(function(I,d){t.push(I.id);if(e.oHashedItemsOriginal[g]&&e.oHashedItemsOriginal[g][i][I.id]){if(m[I.id]){jQuery.sap.log.error("Extract personalization failed","The Tile ID "+I.id+" is not unique in the site","PersonalizationProcessor");delete(m[I.id]);}if(e.oHashedItemsOriginal[g][i][I.id].iIndex!==d){T=true;}b._handleItemChangeExtract(e,g,i);}else{T=true;if(m[I.id]){if(m[I.id].fromGroup&&(m[I.id].fromGroup!==g)){if(!m[I.id].toGroup){m[I.id].toGroup=g;b._handleItemChangeExtract(e,g,i);}}}else{m[I.id]={};m[I.id].fromGroup=null;m[I.id].toGroup=g;m[I.id].item=I;}}});if(T){e.oPersonalizationDelta.groups=e.oPersonalizationDelta.groups||{};e.oPersonalizationDelta.groups[g]=e.oPersonalizationDelta.groups[g]||{};e.oPersonalizationDelta.groups[g].payload=e.oPersonalizationDelta.groups[g].payload||{};if(i==="tiles"){e.oPersonalizationDelta.groups[g].payload.tileOrder=t;}else{e.oPersonalizationDelta.groups[g].payload.linkOrder=t;}}s=true;}return s;};P.prototype._cleanupRemovedGroups=function(o,p){var i,m;if(p.removedGroups&&p&&jQuery.isArray(p.removedGroups)&&(p.removedGroups.length>0)){p.removedGroups.forEach(function(g){if(o&&o.groups&&o.groups[g]&&o.groups[g].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(t){if(jQuery.isArray(o.groups[g].payload[t.sType])){i=o.groups[g].payload[t.sType];i.forEach(function(I){if(p[t.sPersonalizationDeltaType]){m=p[t.sPersonalizationDeltaType][I.id];if(m&&m.fromGroup&&(m.fromGroup===g)&&!m.toGroup){delete(p[t.sPersonalizationDeltaType][I.id]);}}});}});}});}};P.prototype._setItemOrderOnSiteCollection=function(o,i){var s=true,S=o.length,a,b={},I,c,C,f;if(!jQuery.isArray(o)||!jQuery.isArray(o)||(o.length!==i.length)){return false;}a=o.splice(0,o.length);for(I=0;I<i.length;I++){C=i[I];c=a.shift();if(c&&C===c.id){o.push(c);}else if(b[C]){o.push(b[C]);delete(b[C]);if(c){b[c.id]=c;}}else if(c){b[c.id]=c;f=false;while(a.length>0){c=a.shift();if(C===c.id){o.push(c);f=true;break;}else{b[c.id]=c;}}if(!f){s=false;}}}if(o.length!==S){s=false;}return s;};P.prototype._setItemOrderOnSiteGroupForItemType=function(o,d,i){var s=true,t,I;if((i==="tiles")||(i==="links")){I=(i==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(d.payload&&jQuery.isArray(d.payload[I])&&(d.payload[I].length>0)){if(o.payload&&jQuery.isArray(o.payload[i])&&(o.payload[i].length>0)){t=this._setItemOrderOnSiteCollection(o.payload[i],d.payload[I]);if(!t){s=false;}}else{s=false;}}return s;};P.prototype._setItemOrderOnSite=function(o,p){var s=true,t,a=this;if(o.groups&&p.groups){Object.keys(p.groups).forEach(function(g){if(p.groups[g]&&o.groups[g]){t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"tiles");if(!t){s=false;}t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"links");if(!t){s=false;}}});}return s;};P.prototype._applyMoveItemsWithoutOrder=function(o,p,i){var s=true,t,T,I="tileOrder",d,a,b,O=[],c=this;function f(C,g){var s=true;if(o.groups[g]&&o.groups[g].payload&&p.groups&&p.groups[g]&&p.groups[g].payload&&jQuery.isArray(p.groups[g].payload[I])&&(p.groups[g].payload[I].length>0)){if(!jQuery.isArray(o.groups[g].payload[i])){o.groups[g].payload[i]=[];}o.groups[g].payload[i].push(C);}else{s=false;}return s;}if((i==="tiles")||(i==="links")){T=(i==="tiles")?"movedTiles":"movedLinks";I=(i==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(!o||!o.groups||!o.site||!o.site.payload||!jQuery.isArray(o.site.payload.groupsOrder)||!p){return false;}if(p[T]){Object.keys(p[T]).forEach(function(e){d=p[T][e];if(d.fromGroup){if(d.toGroup){if(d.fromGroup!==d.toGroup){if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&jQuery.isArray(o.groups[d.fromGroup].payload[i])){O=o.groups[d.fromGroup].payload[i];a=c._getItemIndex(O,e);if(a>=0){b=O.splice(a,1);t=f(b[0],d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}}else{s=false;}}else{if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&jQuery.isArray(o.groups[d.fromGroup].payload[i])){O=o.groups[d.fromGroup].payload[i];a=c._getItemIndex(O,e);if(a>=0){O.splice(a,1);}else{s=false;}}else{s=false;}}}else if(d.toGroup){if(d.item&&!jQuery.isEmptyObject(d.item)){t=f(d.item,d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}});}return s;};P.prototype._applyItemChanges=function(o,p){var s=true,S;S=this._applyMoveItemsWithoutOrder(o,p,"tiles");if(!S){s=false;}S=this._applyMoveItemsWithoutOrder(o,p,"links");if(!S){s=false;}if(p.groups){S=this._setItemOrderOnSite(o,p);if(!S){s=false;}}return s;};return P;});sap.ui.predefine('sap/ushell/services/_Personalization/ContextContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat"],function(u,p,c,D){"use strict";function C(){this._init.apply(this,arguments);};C.prototype._init=function(s,a,b,S,o){this._oService=s;this._sContainerKey=b;this._oAdapterContainer={};this._oScope=S||p.adjustScope(S);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var A;if(!(o instanceof sap.ui.core.UIComponent)&&o!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined");}if(o&&o.getMetadata&&o.getMetadata().getLibraryName){A=o.getMetadata().getLibraryName();}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey,this._oScope,A);return this;};C.prototype.getValidity=function(){return this._oScope.validity;};C.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new u.Map();};C.prototype.load=function(){var d={},P,t=this;d=new jQuery.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this.clear();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,d);P.always(function(){t._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){t._copyFromAdapter();if(t._isExpired()){t.clear();}d.resolve();});});return d.promise();};C.prototype._copyFromAdapter=function(){var t=this,a;a=t._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(i){t._oItemMap.put(i,JSON.stringify(t._oAdapterContainer.getItemValue(i)));});this._aLoadedItemKeys=t._oItemMap.keys().splice(0);};C.prototype._isExpired=function(){var f,t,T;if(this.getValidity()===Infinity||this.getValidity()===0){return false;}t=this._getItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});T=f.format(this._getNow(),true);return t&&T>t;};C.prototype._getNow=function(){return new Date();};C.prototype._copyToAdapterUpdatingValidity=function(){var i=[],d=[],t=this,n,f,T,s;if(this._clear){i=this._oAdapterContainer.getItemKeys().splice(0);i.forEach(function(I){t._oAdapterContainer.delItem(I);});this._clear=false;}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE);}else{f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});n=this._getNow();s=f.format(n,true);T=f.format(new Date(n.getTime()+this.getValidity()*60000),true);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE,T);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE,s);}i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.cloneToObject(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};C.prototype.save=function(){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});return s.promise();};C.prototype.saveDeferred=function(n){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);function d(){P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});}s._sapFnSave=d;s._sapTimeoutId=setTimeout(d,n);return s.promise();};C.prototype.flush=function(){var s,P;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,s);P.fail(function(){s.reject();}).done(function(){s.resolve();});return s.promise();};C.prototype.getItemKeys=function(){var f=this._oItemMap.keys().filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});return f.map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};C.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0);};C.prototype.getItemValue=function(i){return this._getItemValueInternal(c.S_ITEM_PREFIX,i);};C.prototype._getItemValueInternal=function(P,i){if(typeof i!=="string"||typeof P!=="string"){return undefined;}return p.cloneToObject(this._oItemMap.get(P+i));};C.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};C.prototype.setItemValue=function(i,I){this._setItemValueInternal(c.S_ITEM_PREFIX,i,I);};C.prototype._setItemValueInternal=function(i,I,o){if(typeof I!=="string"||typeof i!=="string"){throw new u.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ");}if(I.length>40){jQuery.sap.log.error("Personalization Service item key/variant set name (\""+I+"\") should be less than 40 characters [current :"+I.length+"]");}this._oItemMap.put(i+I,JSON.stringify(o));};C.prototype.delItem=function(i){this._delItemInternal(c.S_ITEM_PREFIX,i);};C.prototype._delItemInternal=function(P,i){if(typeof i!=="string"){return undefined;}if(typeof P!=="string"){return undefined;}this._oItemMap.remove(P+i);};C.prototype.getKey=function(){return this._sContainerKey.substring(c.S_CONTAINER_PREFIX.length);};C.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=(function(){var U={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(f){U[f]=function(n){throw new u.Error("Function "+n+" can't be called on unmodifiable container","ContextContainer"," ");}.bind(undefined,f);});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(f){if(t[f]){U[f]=t[f].bind(t);}});return U;}());}return this._oUnmodifiableContainer;};return C;});sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet"],function(u,p,c,P){"use strict";function a(A,C){this._sContainerKey=C;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var d={},t=this;this._init();d=new jQuery.Deferred();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=A.getAdapterContainer(this._sContainerKey);this.load().fail(function(){d.reject();}).done(function(){d.resolve(t);});return d.promise();};a.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new u.Map();this._oItemMap=new u.Map();};a.prototype.load=function(){var d={},i=[],v=[],I=[],m=[],t=this;function b(I){var n=[],e=[];n=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)!==0;});if(n.length===0){return I;}e=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});n.forEach(function(s){var o={},f="";f=c.S_ITEM_PREFIX+s;o=p.clone(t._oAdapterContainer.getItemValue(s));t._oAdapterContainer.setItemValue(f,o);t._oAdapterContainer.delItem(s);if(jQuery.inArray(f,e)===-1){e.push(f);}});return e;}d=new jQuery.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._init();this._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){i=t._oAdapterContainer.getItemKeys().splice(0);v=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)===0;});v.forEach(function(V){var o={};o=new P(V,t._oAdapterContainer);t._oVariantSetMap.put(V,o);});I=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)!==0;});m=b(I);m.forEach(function(s){t._oItemMap.put(s,p.clone(t._oAdapterContainer.getItemValue(s)));});t._aLoadedVariantSetKeys=t._oVariantSetMap.keys().splice(0);t._aLoadedItemKeys=t._oItemMap.keys().splice(0);d.resolve();});return d.promise();};a.prototype.save=function(){var s,i;this._serializeVariantSets();this._serializeItems();s=new jQuery.Deferred();function S(){s.resolve();}function f(){s.reject();}try{i=this._oAdapterContainer.save();i.fail(f);i.done(S);}catch(e){s.reject();}return s.promise();};a.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};a.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(c.S_ITEM_PREFIX+i);};a.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};a.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}this._oItemMap.put(c.S_ITEM_PREFIX+i,I);};a.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}if(this.containsItem(i)){this._oItemMap.remove(c.S_ITEM_PREFIX+i);}};a.prototype._serializeItems=function(){var i=[],d=[],t=this;i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.clone(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};a.prototype.getVariantSetKeys=function(){var v=[],b=[];b=this._oVariantSetMap.keys();v=b.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};a.prototype.containsVariantSet=function(v){return this._oVariantSetMap.containsKey(c.S_VARIANT_PREFIX+v);};a.prototype.getVariantSet=function(v){var s,V={};s=c.S_VARIANT_PREFIX+v;V=this._oVariantSetMap.get(s);return V;};a.prototype.addVariantSet=function(v){var e={},V={},s="";if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}s=c.S_VARIANT_PREFIX+v;e={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(s,e);V=new P(s,this._oAdapterContainer);this._oVariantSetMap.put(s,V);return V;};a.prototype._serializeVariantSets=function(){var v=[],d=[],t=this;v=this._oVariantSetMap.keys();v.forEach(function(V){var o={},b={};o=t._oVariantSetMap.get(V);b=o._serialize();t._oAdapterContainer.setItemValue(V,p.clone(b));});d=this._aLoadedVariantSetKeys.filter(function(V){return!(v.indexOf(V)>-1);});d.forEach(function(V){t._oAdapterContainer.delItem(V);});};a.prototype.delVariantSet=function(v){var s="";s=c.S_VARIANT_PREFIX+v;this._oVariantSetMap.remove(s);return this._oAdapterContainer.delItem(s);};return a;});sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariant',["sap/ushell/utils"],function(u){"use strict";function P(v,V,o){if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof V!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(o&&typeof o!=="object"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantKey=v;this._oVariantName=V;this._oItemMap=new u.Map();this._oItemMap.entries=o||{};};P.prototype.getVariantKey=function(){return this._oVariantKey;};P.prototype.getVariantName=function(){return this._oVariantName;};P.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(i);};P.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}return this._oItemMap.put(i,I);};P.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(i);};P.prototype.getItemKeys=function(){return this._oItemMap.keys();};P.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.remove(i);};P.prototype._serialize=function(){var i=[],v={},I={},t=this;v.name=this.getVariantName();i=this._oItemMap.keys();i.forEach(function(s){I[s]=t.getItemValue(s);});v.variantData=I;return v;};return P;});sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(u,p,P){"use strict";function c(v,a){var V,s,b,o,d;this._sVariantSetKey=v;this._oAdapterContainer=a;this._oVariantNameMap=new u.Map();this._oVariantMap=new u.Map();V=p.clone(this._oAdapterContainer.getItemValue(v));if(V.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=V.currentVariant;}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(V.hasOwnProperty("variants")){for(s in V.variants){if(V.variants.hasOwnProperty(s)){b=V.variants[s].name;o=V.variants[s].variantData;if(this._oVariantNameMap.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{this._oVariantNameMap.put(b,s);d=new P(s,b,o);this._oVariantMap.put(s,d);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;};c.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey;};c.prototype.setCurrentVariantKey=function(v){this._sCurrentVariantKey=v;};c.prototype.getVariantKeys=function(){return this._oVariantMap.keys();};c.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries));};c.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.get(v);};c.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantNameMap.get(v);};c.prototype.containsVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.containsKey(v);};c.prototype.addVariant=function(v){var m=0,V="",o={};m=parseInt(this._oVariantMap.keys().sort(function(a,b){return a-b;}).reverse()[0],10);V=isNaN(m)?"0":(m+1).toString();if(this._oVariantMap.containsKey(V)){throw new u.Error("Variant key '"+V+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantNameMap.containsKey(v)){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(v)+"' New key: '"+V+"') ': sap.ushell.services.Personalization"," ");}o=new P(V,v);this._oVariantMap.put(V,o);this._oVariantNameMap.put(v,V);return o;};c.prototype._serialize=function(){var v=[],V={},o={},t=this;V.currentVariant=this._sCurrentVariantKey;v=this.getVariantKeys();v.forEach(function(s){var a={};a=t._oVariantMap.get(s);o[s]=a._serialize();});V.variants=o;return V;};c.prototype.delVariant=function(v){var V=this._oVariantMap.get(v);if(V){this._oVariantNameMap.remove(V.getVariantName());this._oVariantMap.remove(v);}};return c;});sap.ui.predefine('sap/ushell/services/_Personalization/Personalizer',["sap/ushell/utils"],function(u){"use strict";function P(s,a,p,S,c){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=a;this._oService=s;this._oScope=S;this._oComponent=c;if(!p||!p.container||!p.item||typeof p.container!=="string"||typeof p.item!=="string"){throw new u.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ");}this._sPersContainer=p.container;this._sPersItem=p.item;};P.prototype._getContainer=function(p){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(p,this._oScope,this._oComponent);}return this._oGetContainerPromise;};P.prototype.getPersData=function(){var d={},t=this;d=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){d.resolve(c.getItemValue(t._sPersItem));});d.fail(function(){jQuery.sap.log.error("Fail to get Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};P.prototype.setPersData=function(v){var d={},t=this;d=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.setItemValue(t._sPersItem,v);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});d.fail(function(){jQuery.sap.log.error("Fail to set Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};P.prototype.delPersData=function(){var d={},t=this,m;d=new jQuery.Deferred();this._oService.getPersonalizationContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.delItem(t._sPersItem);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});m=d.promise();m.fail(function(){jQuery.sap.log.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer);});return m;};return P;});sap.ui.predefine('sap/ushell/services/_Personalization/TransientPersonalizer',[],function(){"use strict";function T(){this._oValue=undefined;};T.prototype.getPersData=function(){var d;d=new jQuery.Deferred();d.resolve(this._oValue);return d.promise();};T.prototype.setPersData=function(v){var d;d=new jQuery.Deferred();this._oValue=v;d.resolve();return d.promise();};T.prototype.delPersData=function(){var d;d=new jQuery.Deferred();this._oValue=undefined;d.resolve();return d.promise();};T.prototype.setValue=function(v){this._oValue=v;};T.prototype.getValue=function(){return this._oValue;};return T;});sap.ui.predefine('sap/ushell/services/_Personalization/Variant',["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(u,p){"use strict";function V(v,s,a){if(typeof s!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof a!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantSet=v;this._sVariantKey=s;this._sVariantName=a;};V.prototype.getVariantKey=function(){return this._sVariantKey;};V.prototype.getVariantName=function(){return this._sVariantName;};V.prototype.setVariantName=function(v){var o=this._oVariantSet._getVariantSet(),a;if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantSet.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant with name '"+v+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,this._sVariantKey)){a=o.variants[this._sVariantKey];a.name=v;this._sVariantName=v;this._oVariantSet._serialize();}else{throw new u.Error("Variant does not longer exist"," ");}};V.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i)&&p.clone(v[i]);};V.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}var v,a=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!a){throw new u.Error("Variant does not longer exist"," ");}if(!a.variantData){a.variantData={};}v=a.variantData;v[i]=p.clone(I);this._oVariantSet._serialize();};V.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}var v=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i);};V.prototype.getItemKeys=function(){var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,i,I=[];for(i in v){if(Object.prototype.hasOwnProperty.call(v,i)){I.push(i);}}I.sort();return I;};V.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}var v=this.oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete v[i];this.oVariantSet._serialize();};return V;});sap.ui.predefine('sap/ushell/services/_Personalization/VariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariant","sap/ushell/services/_Personalization/Variant"],function(u,p,c,P,V){"use strict";function d(v,C){var s,a,o=new u.Map(),b=new u.Map(),e,f;this._oContextContainer=C;this._sVariantSetKey=v;this._oVariantSetData=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(s in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,s)){a=this._oVariantSetData.variants[s].name;e=this._oVariantSetData.variants[s].variantData;if(o.containsKey(a)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{o.put(a,s);f=new P(s,a,e);b.put(s,f);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;};d.prototype._getVariantSet=function(){return this._oVariantSetData;};d.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData);};d.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant;};d.prototype.setCurrentVariantKey=function(v){this._getVariantSet().currentVariant=v;this._serialize();};d.prototype.getVariantKeys=function(){var v=new u.Map(),o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){v.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.keys();};d.prototype.getVariantNamesAndKeys=function(){var v=new u.Map(),o=new u.Map(),a=this._getVariantSet(this._sVariantSetKey),s,b;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){b=a.variants[s].name;if(v.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{v.put(b,s);}o.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.entries;};d.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s,a,b;if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v)){s=o.variants[v].name;b=o.variants[v].variantData;a=new V(this,v,s,b);return a;}return undefined;};d.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){if(v===o.variants[s].name){return s;}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return undefined;};d.prototype.containsVariant=function(v){var o=this._getVariantSet();if(typeof v!=="string"){return undefined;}return Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v);};d.prototype.addVariant=function(v){var k=[],m=0,s="",o={};k=this.getVariantKeys();m=parseInt(k.sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(m)?"0":(m+1).toString();if(k.indexOf(s)>=0){throw new u.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(v)+"' New key: '"+s+"') ': sap.ushell.services.Personalization"," ");}o=new V(this,s,v);this._getVariantSet(this._sVariantSetKey).variants[s]={name:v,variantData:{}};this._serialize();return o;};d.prototype.delVariant=function(v){var o;if(typeof v!=="string"){return undefined;}o=this._getVariantSet();if(o&&o.variants){delete this._oVariantSetData.variants[v];}this._serialize();};return d;});sap.ui.predefine('sap/ushell/services/_Personalization/VariantSetAdapter',["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(c,u,V){"use strict";function a(C){this._oContextContainer=C;};a.prototype.save=function(){return this._oContextContainer.save();};a.prototype.getVariantSetKeys=function(){var p=this._oContextContainer._getInternalKeys(),v=[];v=p.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};a.prototype.containsVariantSet=function(v){return this.getVariantSetKeys().indexOf(v)>=0;};a.prototype.getVariantSet=function(v){var o=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,v);if(!o){return undefined;}return new V(v,this._oContextContainer);};a.prototype.addVariantSet=function(v){var e={},o={};if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}e={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,v,e);o=new V(v,this._oContextContainer);return o;};a.prototype.delVariantSet=function(v){this._oContextContainer._delItemInternal(c.S_VARIANT_PREFIX,v);};return a;});sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapter',[],function(){"use strict";var W=function(p,b){this._oBackendAdapter=b;if(b){this.supportsGetWithoutSubsequentLoad=b.supportsGetWithoutSubsequentLoad;}};W.prototype.data={};W.prototype.getAdapterContainer=function(c,s,a){var b=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(c,s,a);var d=sap.ui.requireSync("sap/ushell/services/_Personalization/WindowAdapterContainer");return new d(c,s,b);};W.prototype.delAdapterContainer=function(c,s){var d=new jQuery.Deferred();delete W.prototype.data[c];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(c,s).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};return W;});sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapterContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/WindowAdapter"],function(u,p,W){"use strict";function a(C,s,b){this._oBackendContainer=b;this._oItemMap=new u.Map();this._sContainerKey=C;};function c(C){var i,k=C.getItemKeys();for(i=0;i<k.length;i=i+1){C.delItem(k[i]);}}a.prototype.load=function(){var d=new jQuery.Deferred(),i,k,t=this;if(W.prototype.data[this._sContainerKey]){this._oItemMap.entries=p.clone(W.prototype.data[this._sContainerKey]);if(this._oBackendContainer){c(this._oBackendContainer);k=this.getItemKeys();for(i=0;i<k.length;i=i+1){this._oBackendContainer.setItemValue(k[i],this._oItemMap.get(k[i]));}}d.resolve();}else{if(this._oBackendContainer){this._oBackendContainer.load().done(function(){k=t._oBackendContainer.getItemKeys();for(i=0;i<k.length;i=i+1){t.setItemValue(k[i],t._oBackendContainer.getItemValue(k[i]));}W.prototype.data[t._sContainerKey]=p.clone(t._oItemMap.entries);d.resolve();}).fail(function(m){d.reject(m);});}else{W.prototype.data[this._sContainerKey]={};d.resolve();}}return d.promise();};a.prototype.save=function(){var d=new jQuery.Deferred();W.prototype.data[this._sContainerKey]=p.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};a.prototype.getItemKeys=function(){return this._oItemMap.keys();};a.prototype.containsItem=function(i){this._oItemMap.containsKey(i);};a.prototype.getItemValue=function(i){return this._oItemMap.get(i);};a.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);if(this._oBackendContainer){this._oBackendContainer.setItemValue(i,I);}};a.prototype.delItem=function(i){this._oItemMap.remove(i);if(this._oBackendContainer){this._oBackendContainer.delItem(i);}};return a;});sap.ui.predefine('sap/ushell/services/_Personalization/constants',[],function(){"use strict";return{keyCategory:{"FIXED_KEY":"FIXED_KEY","GENERATED_KEY":"GENERATED_KEY"},writeFrequency:{"HIGH":"HIGH","LOW":"LOW"}};});sap.ui.predefine('sap/ushell/services/_Personalization/constants.private',[],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"};});sap.ui.predefine('sap/ushell/services/_Personalization/utils',["sap/ushell/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private"],function(u,c,p){"use strict";function a(e,k){var m;for(m in k){if(typeof k[m]!=='function'){if(k.hasOwnProperty(m)){if(m===e){return true;}}}}return false;}function b(C){if(C.length>40){jQuery.sap.log.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]");}return p.S_CONTAINER_PREFIX+C;}function d(o,L,t,P){if(o&&o.validity===0&&!L){return t;}return P;}function i(){var r=window["sap-ushell-config"]&&window["sap-ushell-config"].services&&window["sap-ushell-config"].services.ShellNavigation&&window["sap-ushell-config"].services.ShellNavigation.config&&window["sap-ushell-config"].services.ShellNavigation.config.reload;return r;}function f(s,L){var A={validity:Infinity,keyCategory:c.keyCategory.GENERATED_KEY,writeFrequency:c.writeFrequency.HIGH,clientStorageAllowed:false};if(s){A.validity=s.validity;if(A.validity===null||A.validity===undefined||typeof A.validity!=="number"){A.validity=Infinity;}if(!(typeof A.validity==="number"&&((A.validity>=0&&A.validity<1000)||A.validity===Infinity))){A.liftime=Infinity;}A.keyCategory=a(s.keyCategory,c.keyCategory)?s.keyCategory:A.keyCategory;A.writeFrequency=a(s.writeFrequency,c.writeFrequency)?s.writeFrequency:A.writeFrequency;if(typeof s.clientStorageAllowed==='boolean'&&(s.clientStorageAllowed===true||s.clientStorageAllowed===false)){A.clientStorageAllowed=s.clientStorageAllowed;}}if(A.validity===0&&L){A.validity=1440;}return A;}function l(A){if(!A.lazy){return jQuery.when(A.instance);}try{return A.create.call(null);}catch(e){return new jQuery.Deferred().reject(e).promise();}}function g(C){if(!C){return false;}var A=C.getManifestObject();if(!A){return false;}var s=A.getEntry("/sap.ui5/appVariantId");if(!s){return false;}var e=A.getComponentName();if(s===e){return false;}return true;}function h(o){if(o===undefined){return undefined;}try{return JSON.parse(o);}catch(e){return undefined;}}function j(o){if(o===undefined){return undefined;}try{return JSON.parse(JSON.stringify(o));}catch(e){return undefined;}}return{adjustScope:f,cloneToObject:h,clone:j,addContainerPrefix:b,pickAdapter:d,isAppVariant:g,loadAdapter:l,isLaunchpadReload:i};});sap.ui.predefine('sap/ushell/services/_Ui5ComponentLoader/utils',[],function(){function c(C,o){var D=new jQuery.Deferred();C.componentData=o;C.async=true;sap.ui.component(C).then(function(f){D.resolve(f);},function(E){D.reject(E);});return D.promise();}function s(S){var A=(S&&S.hasOwnProperty("amendedLoading"))?S.amendedLoading:true;return A;}function a(A){var L=true;if(A.hasOwnProperty("loadCoreExt")){L=A.loadCoreExt;}return L;}function b(A,S,f){var L=true;if(A.hasOwnProperty("loadDefaultDependencies")){L=A.loadDefaultDependencies;}if(S&&S.hasOwnProperty("loadDefaultDependencies")){L=L&&S.loadDefaultDependencies;}L=L&&f;return L;}function d(p){var S=p.semanticObject||null;var A=p.action||null;if(!S||!A){return null;}return"application-"+S+"-"+A+"-component";}function u(U){return U&&U.indexOf("?")>=0;}function r(U){if(!U){return U;}var I=U.indexOf("?");if(I>=0){return U.slice(0,I);}return U;}function i(){return jQuery.sap.isDeclared('sap.fiori.core',true)||jQuery.sap.isDeclared('sap.fiori.core-ext-light',true);}function l(A,E,f,h,C){var j="The issue is most likely caused by application "+A,k="Failed to load UI5 component with properties: '"+C+"'.";if(h){k+=" Error likely caused by:\n"+h}else{k+=" Error: '"+E+"'";}if(f==="parsererror"){j+=", as one or more of its resources could not be parsed"}j+=". Please create a support incident and assign it to the support component of the respective application.";jQuery.sap.log.error(j,k,A);}function g(U){var p=jQuery.sap.getUriParameters(U).mParams,x=p["sap-xapp-state"],R;delete p["sap-xapp-state"];R={startupParameters:p};if(x){R["sap-xapp-state"]=x;}return R;}function e(A,m){if(!jQuery.isArray(m)){return;}m.forEach(function(M){var S=String.prototype.toLowerCase.call(M.severity||"");S=["trace","debug","info","warning","error","fatal"].indexOf(S)!==-1?S:"error";jQuery.sap.log[S](M.text,M.details,A);});}return{constructAppComponentId:d,getParameterMap:g,isCoreExtAlreadyLoaded:i,logAnyApplicationDependenciesMessages:e,logInstantiateComponentError:l,shouldLoadCoreExt:a,shouldLoadDefaultDependencies:b,shouldUseAmendedLoading:s,urlHasParameters:u,removeParametersFromUrl:r,createUi5Component:c};},false);sap.ui.predefine('sap/ushell/ui/launchpad/AccessibilityCustomData',['jquery.sap.global','sap/ui/core/CustomData','sap/ushell/library'],function(q,C,l){"use strict";var A=C.extend("sap.ushell.ui.launchpad.AccessibilityCustomData"),o=C.prototype._checkWriteToDom;A.prototype._checkWriteToDom=function(r){var k=this.getKey().toLowerCase(),i=sap.ui.getCore().getConfiguration().getAccessibility();if(!i){return;}if(k.indexOf("aria")===0||k==="role"||k==="tabindex"){if(!this.getWriteToDom()){return null;}var v=this.getValue();if(typeof v!="string"){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the value is not a string.");return null;}if(!(sap.ui.core.ID.isValid(k))||(k.indexOf(":")!=-1)){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null;}if(k==q.sap._FASTNAVIGATIONKEY){v=/^\s*(x|true)\s*$/i.test(v)?"true":"false";}else if(k.indexOf("sap-ui")==0){q.sap.log.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (may not start with 'sap-ui').");return null;}return{key:k,value:v};}else{return o.apply(this,arguments);}};return A;},true);sap.ui.predefine('sap/ushell/ui/launchpad/ActionItem',['sap/m/Button','sap/ushell/library'],function(B,l){"use strict";var A=B.extend("sap.ushell.ui.launchpad.ActionItem",{metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:'standard'}},events:{press:{},afterRendering:{}}}});A.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.sOrigType=undefined;};A.prototype.setActionType=function(t){if(!this.sOrigType){this.sOrigType=this.getType();}if(t==='action'){this.setType(sap.m.ButtonType.Unstyled);this.addStyleClass("sapUshellActionItem");}else{this.sOrigType?this.setType(this.sOrigType):this.setType(sap.m.ButtonType.Standard);this.removeStyleClass("sapUshellActionItem");}this.setProperty('actionType',t,true);};return A;});sap.ui.predefine('sap/ushell/ui/launchpad/ActionItemRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var A={};var A=R.extend(B);return A;},true);sap.ui.predefine('sap/ushell/ui/launchpad/Fiori2LoadingDialog',['sap/ui/core/Control','sap/ushell/library'],function(C,l){"use strict";var F=C.extend("sap.ushell.ui.launchpad.Fiori2LoadingDialog",{metadata:{library:"sap.ushell",properties:{text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}}}});F.prototype.init=function(){var b=document.getElementsByTagName("body")[0],e=document.createElement("DIV"),a=document.createElement("DIV"),c=document.createElement("DIV"),d=document.createElement("DIV"),f=document.createElement("DIV"),g=document.createElement("DIV"),h=document.createElement("DIV");this._oBusyIndicator=this.getBusyIndicator();this._oBusyIndicator.setBusyIndicatorDelay(100);this._firstLoading=true;this._start=0;this._end=0;h.setAttribute("id","sapUshellFiori2LoadingArea");h.setAttribute("class","sapUshellFiori2LoadingDialogArea");h.setAttribute("style","height: 0px; width: 0px; overflow: hidden; float: left;");b.insertBefore(h,b.firstChild);d.setAttribute("id","sapUshellLoadingAccessibilityHelper");d.setAttribute("class","sapUshellLoadingAccessibilityHelper");f.setAttribute("id","sapUshellLoadingAccessibilityHelper-appInfo");f.setAttribute("aria-atomic","true");d.appendChild(f);g.setAttribute("id","sapUshellLoadingAccessibilityHelper-loadingComplete");g.setAttribute("aria-atomic","true");g.setAttribute("aria-live","polite");d.appendChild(g);h.appendChild(d);c.setAttribute("id","sapUshellFiori2LoadingDialog");c.setAttribute("style","z-index: 8;visibility: visible;");c.setAttribute("class","sapUshellShellHidden");e.setAttribute("id","sapUshellFiori2LoadingOverlay");e.setAttribute("class","sapUshellFiori2LoadingDialogOverlayStyle");c.appendChild(e);a.setAttribute("id","sapUshellFiori2LoadingBusyIndicator");c.appendChild(a);b.insertBefore(c,h);this._oBusyIndicator.placeAt("sapUshellFiori2LoadingBusyIndicator");};F.prototype.getBusyIndicator=function(){return new sap.m.BusyIndicator("fiori2LoadingDialogBusyIndicator");};F.prototype.openLoadingScreen=function(a){this.start=new Date().getTime();var j=jQuery("#sapUshellFiori2LoadingOverlay");a=a||"full";jQuery("#sapUshellFiori2LoadingDialog").toggleClass("sapUshellShellHidden",false);if(this._firstLoading){this._firstLoading=false;if(a==='minimal'){j.toggleClass("sapUshellInitialLoadingDialogOverlayNoAnimation",true);}else{j.toggleClass("sapUshellInitialLoadingDialogOverlayAnimation",true);}}else{if(a==='minimal'){j.toggleClass("sapUshellLoadingDialogOverlayNoAnimation",true);}else{j.toggleClass("sapUshellLoadingDialogOverlayAnimation",true);}}if(a!=='minimal'){jQuery.sap.measure.start("FLP:LoadingDialogClassAdding","LoadingDialog","FLP");var b=sap.ui.getCore().byId('fiori2LoadingDialogBusyIndicator');if(b){b.addStyleClass('sapUshellLoadingDialogBusyIndicatorAnimation');}jQuery.sap.measure.end("FLP:LoadingDialogClassAdding");}};F.prototype.isOpen=function(){return!jQuery("#sapUshellFiori2LoadingDialog").hasClass("sapUshellShellHidden");};F.prototype.closeLoadingScreen=function(){var j=jQuery("#sapUshellFiori2LoadingOverlay");j.toggleClass("sapUshellAnimationPaused",true);var r=function(){var b=sap.ui.getCore().byId('fiori2LoadingDialogBusyIndicator');jQuery("#sapUshellFiori2LoadingDialog").toggleClass("sapUshellShellHidden",true);j.toggleClass("sapUshellLoadingDialogOverlayNoAnimation",false);j.toggleClass("sapUshellLoadingDialogOverlayAnimation",false);j.toggleClass("sapUshellInitialLoadingDialogOverlayAnimation",false);if(b){b.removeStyleClass('sapUshellLoadingDialogBusyIndicatorAnimation');}};if(j[0]&&j[0].getBoundingClientRect().width<100){r();j.toggleClass("sapUshellAnimationPaused",false);}else{j.toggleClass("sapUshellAnimationPaused",false);setTimeout(function(){r();},500);}};F.prototype.exit=function(){this._oBusyIndicator.destroy();};return F;});sap.ui.predefine('sap/ushell/ui/launchpad/ViewPortContainer',['sap/ui/core/Control','sap/ui/core/theming/Parameters','sap/ushell/library','sap/ushell/resources'],function(C,P,l,r){"use strict";var V=C.extend("sap.ushell.ui.launchpad.ViewPortContainer",{metadata:{library:"sap.ushell",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},visible:{type:"boolean",group:"Appearance",defaultValue:true},defaultState:{type:"sap.ushell.ui.launchpad.ViewPortState",group:"Appearance",defaultValue:sap.ushell.ui.launchpad.ViewPortState.Center}},aggregations:{leftViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"leftViewPort"},centerViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"centerViewPort"},rightViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"rightViewPort"}},associations:{initialCenterViewPort:{type:"sap.ui.core.Control",multiple:false},initialRightViewPort:{type:"sap.ui.core.Control",multiple:false},initialLeftViewPort:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{},afterSwitchState:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}},afterSwitchStateAnimationFinished:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}}}}});V.prototype.init=function(){this.bShiftCenterTransition=true;this.bShiftCenterTransitionEnabled=false;this.sCurrentState="Center";var c=sap.ui.getCore().getConfiguration();this.bIsRTL=!jQuery.isEmptyObject(c)&&c.getRTL?c.getRTL():false;this._oViewPortsNavigationHistory={leftViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null},centerViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null},rightViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null}};this._states={Left:{translateX:'',visibleViewPortsData:[{viewPortId:'leftViewPort',className:"leftClass",isActive:true}]},Center:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"centerClass",isActive:true}]},Right:{translateX:'',visibleViewPortsData:[{viewPortId:'rightViewPort',className:"rightClass",isActive:true}]},LeftCenter:{translateX:'',visibleViewPortsData:[{viewPortId:'leftViewPort',className:"front",isActive:true},{viewPortId:'centerViewPort',className:"backLeft",isActive:false}]},CenterLeft:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"frontLeft",isActive:true},{viewPortId:'leftViewPort',className:"back",isActive:false}]},RightCenter:{translateX:'',visibleViewPortsData:[{viewPortId:'rightViewPort',className:"front",isActive:true},{viewPortId:'centerViewPort',className:"backRight",isActive:false}]},CenterRight:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"frontRight",isActive:true},{viewPortId:'rightViewPort',className:"back",isActive:false}]}};sap.ui.Device.media.attachHandler(this._handleSizeChange.bind(this),null,sap.ui.Device.media.RANGESETS.SAP_STANDARD);sap.ui.Device.orientation.attachHandler(this._handleSizeChange,this);jQuery(window).bind("resize",function(){this._handleSizeChange();}.bind(this));};V.prototype.removeCenterViewPort=function(c,s){this.removeAggregation('centerViewPort',c,s);this._popFromViewPortNavigationHistory('centerViewPort',c);};V.prototype.setApplicationFullWidth=function(f){var j=jQuery("#"+this._sCurrentControlId);j.toggleClass("sapUShellApplicationContainerLimitedWidth",!f);};V.prototype._popFromViewPortNavigationHistory=function(v,c){var n=this._oViewPortsNavigationHistory[v],a=n?n.visitedControls:[],i=a.indexOf(c);if(a.length>0){n.visitedControls=a.slice(i+1,n.visitedControls.length);n.indexOfCurrentlyDisplayedControl=n.visitedControls.length-1;}};V.prototype.addCenterViewPort=function(c){jQuery.sap.measure.start("FLP:ViewPortContainer.addCenterViewPort","addCenterViewPort","FLP");var i=this._isInCenterViewPort(c);c.toggleStyleClass("hidden",true);c.addStyleClass("sapUshellViewPortItemSlideFrom");if(!i){this.addAggregation('centerViewPort',c,true);}if(this.domRef&&!i){this.getRenderer().renderViewPortPart(c,this.domRef,'centerViewPort');}jQuery.sap.measure.end("FLP:ViewPortContainer.addCenterViewPort");};V.prototype.addLeftViewPort=function(c){jQuery.sap.flpmeasure.end(0,"MeArea,(services + rendering)");c.toggleStyleClass("hidden",true);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'leftViewPort');}this.addAggregation('leftViewPort',c,true);};V.prototype.addRightViewPort=function(c){c.toggleStyleClass("hidden",true);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'rightViewPort');}this.addAggregation('rightViewPort',c,true);};V.prototype.setInitialCenterViewPort=function(c){var s=this._getCurrentlyDispalyedControl('centerViewPort'),i=this._isInCenterViewPort(c);c.addStyleClass("sapUshellViewPortItemSlideFrom");if(this.domRef&&!i){this.getRenderer().renderViewPortPart(c,this.domRef,'centerViewPort');}this._setCurrentlyDisplayedControl('centerViewPort',c);if(!i){this.addAggregation('centerViewPort',c,true);}this.setAssociation('initialCenterViewPort',c,true);if(s&&s!==c.getId()){this.fireAfterNavigate({fromId:s,from:sap.ui.getCore().byId(s),to:sap.ui.getCore().byId(c),toId:c.getId()});}};V.prototype._isInViewPort=function(v,c){var a=this.getAggregation(v),i=a?a.indexOf(c)>-1:false;return i;};V.prototype._isInCenterViewPort=function(c){return this._isInViewPort('centerViewPort',c);};V.prototype.getCurrentCenterPage=function(){return this._getCurrentlyDispalyedControl('centerViewPort');};V.prototype.navTo=function(v,c,t,d,T){jQuery.sap.measure.start("FLP:ShellController.navTo","navTo","FLP");var s=this._getCurrentlyDispalyedControl(v),a=this.getAggregation(v),b=a.some(function(e,i){if(e.getId()===c){return true;}});if(!b){jQuery.sap.log.error("ViewPort Container Error: Couldn't find target control");}else if(!s||s!==c){var o=sap.ui.getCore().byId(c);o.toggleStyleClass("hidden",false);var O=function(){this.fireAfterNavigate({toId:c,to:c?sap.ui.getCore().byId(c):null,fromId:s,from:s?sap.ui.getCore().byId(s):null});}.bind(this);this._setCurrentlyDisplayedControl(v,o,t,O);}jQuery.sap.measure.end("FLP:ShellController.navTo");};V.prototype._getCurrentlyDispalyedControl=function(v){var n=this._oViewPortsNavigationHistory[v];return n.visitedControls[n.indexOfCurrentlyDisplayedControl];};V.prototype._setCurrentlyDisplayedControl=function(v,c,t,o){jQuery.sap.measure.start("FLP:ViewPortContainer._setCurrentlyDisplayedControl","_setCurrentlyDisplayedControl","FLP");var n=this._oViewPortsNavigationHistory[v],a=n.visitedControls,s=this._getCurrentlyDispalyedControl(v),b=s?sap.ui.getCore().byId(s):null,T=(v==='centerViewPort'&&t)?t:'show';a.push(c.getId());n.indexOfCurrentlyDisplayedControl=jQuery.isNumeric(n.indexOfCurrentlyDisplayedControl)?n.indexOfCurrentlyDisplayedControl+1:0;this._handleViewPortTransition(v,T,c,b,o);this._sCurrentControlId=c.getId();jQuery.sap.measure.end("FLP:ViewPortContainer._setCurrentlyDisplayedControl");};V.prototype._handleViewPortTransition=function(v,t,T,c,o){if(v!=='centerViewPort'){return;}T.toggleStyleClass("hidden",false);if(c){c.toggleStyleClass("hidden");}if(o){o();}};V.prototype.switchState=function(s){var a=function(){var b,t=[],f=[],c,d=this;for(c=0;c<d._states[d.sCurrentState].visibleViewPortsData.length;c++){f.push(d._states[d.sCurrentState].visibleViewPortsData[c].viewPortId);}for(c=0;c<d._states[s].visibleViewPortsData.length;c++){t.push(d._states[s].visibleViewPortsData[c].viewPortId);}var i=0,e;for(e=0;e<f.length;e++){b=d.getAggregation(f[e]);if(b){for(i=0;i<b.length;i++){if(b[i].onViewStateHide){b[i].onViewStateHide();}}}}for(e=0;e<t.length;e++){b=d.getAggregation(t[e]);if(b){for(i=0;i<b.length;i++){if(b[i].onViewStateShow){b[i].onViewStateShow();}}}}}.bind(this);jQuery.sap.measure.start("FLP:switchState","start animiation flow","FLP1");switch(s){case"LeftCenter":this.meAreaShow(s);break;case"Center":this.centerAreaShow(s,a);break;case"RightCenter":this.notificationAreaShow(s);break;default:}var S=function(e){var c=parseInt(window.getComputedStyle(e.currentTarget).width,10);if(e.pageX>c){this.switchState('Center');}}.bind(this);var j=jQuery(this.domRef).find('.sapUshellViewPortLeft');if(s!=='Center')j.on('click',S);else j.off('click',S);this._handleSizeChange();};V.prototype.notificationAreaShow=function(s){this._areaShow(s,this._animateNotificationAreaShow.bind(this),this._animateMinimalNotificationAreaShow.bind(this),true);};V.prototype._notificationAreaClose=function(s){this._areaShow(s,this._animateNotificationAreaClose.bind(this),this._animateMinimalNotificationAreaClose.bind(this),false);};V.prototype.meAreaShow=function(s){this._areaShow(s,this._animateMeAreaShow.bind(this),this._animateMinimalMeAreaShow.bind(this),true);};V.prototype._meAreaClose=function(s){this._areaShow(s,this._animateMeAreaClose.bind(this),this._animateMinimalMeAreaClose.bind(this),false);};V.prototype.centerAreaShow=function(s,a){if(this.sCurrentState==="LeftCenter"){this._meAreaClose(s);}else if(this.sCurrentState==="RightCenter"){this._notificationAreaClose(s);}else{this._fireTransitionEnd(s);if(a){a();};}};jQuery.sap.measure.end("FLP:switchState");V.prototype._animateNotificationAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.switchKeyframeAnimationDuration("0ms",[v.centerViewPort,v.rightViewPort]);v.centerViewPort.removeEventListener("animationend",t);v.centerViewPort.addEventListener('click',this.switchState.bind(this,"Center"));if(v.leftViewPort.classList.contains("sapUshellMeAreaShow")){v.leftViewPort.classList.remove("sapUshellMeAreaShow");v.leftViewPort.classList.remove("sapUshellMeAreaClose");v.leftViewPort.classList.add("sapUshellShellHidden");}}.bind(this);this.toggleMeAreaScrollBar(false);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.rightViewPort,v.leftViewPort]);v.centerViewPort.classList.add("sapUshellDisableScroll");this.setEnableResizeHandler(false);v.centerViewPort.addEventListener("animationend",t,false);v.rightViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){if(v.leftViewPort.classList.contains("sapUshellMeAreaShow")){v.leftViewPort.classList.add("sapUshellMeAreaClose");v.centerViewPort.classList.add("sapUshellCenterLeft");v.centerViewPort.classList.remove("sapUshellCenterRight");v.rightViewPort.classList.remove("sapUshellNotificationAreaClose");}else{v.centerViewPort.classList.add("sapUshellSmallLeft");}v.rightViewPort.classList.add("sapUshellNotificationAreaShow");},0);};V.prototype._removeAllAnimationClasses=function(){var v=this._getViewPorts(),c=["sapUshellDisableScroll","sapUshellMeAreaShow","sapUshellMeAreaClose","sapUshellSmallRight","sapUshellSmallRightToLargeCenter","sapUshellNotificationAreaClose","sapUshellNotificationAreaShow","sapUshellCenterRight","sapUshellCenterLeft","sapUshellSmallLeft","sapUshellSmallLeftToLargeCenter"];for(var k in v){if(v.hasOwnProperty(k)){c.forEach(function(a){v[k].classList.remove(a);});}}};V.prototype._animateNotificationAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd();this.setEnableResizeHandler(true);this._removeAllAnimationClasses();v.rightViewPort.classList.add("sapUshellShellHidden");v.centerViewPort.removeEventListener("animationend",t);v.centerViewPort.removeEventListener('click',this.switchState.bind(this,"Center"));}.bind(this);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.rightViewPort]);this.setEnableResizeHandler(false);v.centerViewPort.addEventListener("animationend",t,false);setTimeout(function(){v.centerViewPort.classList.remove("sapUshellCenterLeft");v.centerViewPort.classList.remove("sapUshellCenterRight");v.rightViewPort.classList.add("sapUshellNotificationAreaClose");v.centerViewPort.classList.add("sapUshellSmallLeftToLargeCenter");},0);};V.prototype._leftViewPortOnClickHandler=function(e){var E=document.elementsFromPoint(e.x,e.y);E.every(function(a){if(a.classList.contains("sapUshellViewPortCenter")){this.switchState("Center");return false;}return true;}.bind(this));};V.prototype._animateMeAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.toggleMeAreaScrollBar(true);this.switchKeyframeAnimationDuration("0ms",[v.centerViewPort,v.leftViewPort]);v.centerViewPort.classList.add("sapUshellDisableScroll");v.centerViewPort.removeEventListener("animationend",t);v.centerViewPort.addEventListener('click',this.switchState.bind(this,"Center"));if(v.rightViewPort.classList.contains("sapUshellNotificationAreaShow")){v.rightViewPort.classList.remove("sapUshellNotificationAreaShow");v.rightViewPort.classList.remove("sapUshellNotificationAreaClose");v.rightViewPort.classList.add("sapUshellShellHidden");}}.bind(this);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.rightViewPort,v.rightViewPort]);this.setEnableResizeHandler(false);var m=sap.ui.getCore().byId("meArea");if(m){m.onViewStateShow();}v.centerViewPort.addEventListener("animationend",t,false);v.leftViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){if(v.rightViewPort.classList.contains("sapUshellNotificationAreaShow")){v.rightViewPort.classList.add("sapUshellNotificationAreaClose");v.centerViewPort.classList.add("sapUshellCenterRight");v.centerViewPort.classList.remove("sapUshellCenterLeft");v.leftViewPort.classList.remove("sapUshellMeAreaClose");}else{v.centerViewPort.classList.add("sapUshellSmallRight");}v.leftViewPort.classList.add("sapUshellMeAreaShow");},0);};V.prototype._animateMeAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd();this.setEnableResizeHandler(true);this._removeAllAnimationClasses();v.centerViewPort.removeEventListener('click',this.switchState.bind(this,"Center"));v.leftViewPort.classList.add("sapUshellShellHidden");v.centerViewPort.removeEventListener("animationend",t);}.bind(this);this.switchKeyframeAnimationDuration("480ms",[v.centerViewPort,v.leftViewPort]);this.toggleMeAreaScrollBar(false);this.setEnableResizeHandler(false);v.centerViewPort.addEventListener("animationend",t,false);setTimeout(function(){v.centerViewPort.classList.remove("sapUshellCenterLeft");v.centerViewPort.classList.remove("sapUshellCenterRight");v.leftViewPort.classList.add("sapUshellMeAreaClose");v.centerViewPort.classList.add("sapUshellSmallRightToLargeCenter");},0);};V.prototype.toggleMeAreaScrollBar=function(s){document.getElementById('leftViewPort').classList.toggle("sapUshellMeAreaScrollable",s);};V.prototype.switchKeyframeAnimationDuration=function(d,D){D.forEach(function(i){i.style.animationDuration=d;});};V.prototype.setEnableResizeHandler=function(e){};V.prototype._animateMinimalNotificationAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.toggleMeAreaScrollBar(true);v.viewPortContainer.removeEventListener("transitionend",t);}.bind(this);this.setEnableResizeHandler(false);v.viewPortContainer.addEventListener("transitionend",t,false);v.rightViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalNotificationAreaShow");v.viewPortContainer.classList.remove("sapUshellMinimalMeAreaShow");},0);};V.prototype._animateMinimalNotificationAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);v.rightViewPort.classList.add("sapUshellShellHidden");v.viewPortContainer.removeEventListener("transitionend",t);v.viewPortContainer.classList.remove("sapUshellMinimalNotificationAreaClose");}.bind(this);this.toggleMeAreaScrollBar(false);this.setEnableResizeHandler(false);v.viewPortContainer.addEventListener("transitionend",t,false);setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalNotificationAreaClose");v.viewPortContainer.classList.remove("sapUshellMinimalNotificationAreaShow");},0);};V.prototype._animateMinimalMeAreaShow=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);this.toggleMeAreaScrollBar(true);v.viewPortContainer.removeEventListener("transitionend",t);}.bind(this);this.setEnableResizeHandler(false);var m=sap.ui.getCore().byId("meArea");if(m){m.onViewStateShow();}v.viewPortContainer.addEventListener("transitionend",t,false);v.leftViewPort.classList.remove("sapUshellShellHidden");setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalMeAreaShow");v.viewPortContainer.classList.remove("sapUshellMinimalNotificationAreaShow");},0);};V.prototype._animateMinimalMeAreaClose=function(s){var v=this._getViewPorts(),t=function(e){this._fireTransitionEnd(s);this.setEnableResizeHandler(true);v.leftViewPort.classList.add("sapUshellShellHidden");v.viewPortContainer.classList.remove("sapUshellMinimalMeAreaClose");v.viewPortContainer.removeEventListener("transitionend",t);}.bind(this);this.toggleMeAreaScrollBar(false);this.setEnableResizeHandler(false);v.viewPortContainer.addEventListener("transitionend",t,false);setTimeout(function(){v.viewPortContainer.classList.add("sapUshellMinimalMeAreaClose");v.viewPortContainer.classList.remove("sapUshellMinimalMeAreaShow");},0);};V.prototype._areaShow=function(s,f,m,S){this.setCurrentState(s);if(this._getAnimationMode()==='full'){f(s);}else{m(S);}};V.prototype._handleSizeChange=function(){var a=this.getCurrentState(),v=this._states[a].visibleViewPortsData;if(v[0].viewPortId==="leftViewPort"){if(this.bIsRTL){var p=window.innerWidth-jQuery("#leftViewPort").width();jQuery("#leftViewPort").css("padding-left",p);jQuery("#viewPortCursorPointerArea").css("width",p);jQuery("#viewPortCursorPointerArea").css("left","0");}else{var b=window.innerWidth-jQuery("#leftViewPort").width();jQuery("#leftViewPort").css("padding-right",b);jQuery("#viewPortCursorPointerArea").css("width",b);jQuery("#viewPortCursorPointerArea").css("right","0");}}};V.prototype._getAnimationMode=function(){var m=this.getModel(),a;if(m){a=m.getProperty('/animationMode');}return a||'full';};V.prototype._fireTransitionEnd=function(s){if(!s){s=this.sCurrentState;}this.fireAfterSwitchStateAnimationFinished({to:s,from:this.sCurrentState});};V.prototype._getViewPorts=function(){var e=document.getElementById('viewPortContainer');if(e){return{viewPortContainer:e,leftViewPort:document.getElementById('leftViewPort'),centerViewPort:document.getElementById('centerViewPort-wrapper'),rightViewPort:document.getElementById('rightViewPort')}}};V.prototype.setCurrentState=function(s){var f=this.sCurrentState;this.sCurrentState=s;this.fireAfterSwitchState({to:s,from:f});};V.prototype.getCurrentState=function(){return this.sCurrentState;};V.prototype.getViewPortControl=function(v,d){var a=this.getAggregation(v),i;if(a){for(i=0;i<a.length;i++){if(a[i]&&(a[i].getId()===d)){return a[i];}}}return null;};V.prototype.getViewPort=function(p){var a=this.getCenterViewPort(),i;for(i=0;i<a.length;i++){if(a[i]&&(a[i].getId()===p)){return a[i];}}return null;};V.prototype.shiftCenterTransitionEnabled=function(e){this.bShiftCenterTransitionEnabled=e;};V.prototype.shiftCenterTransition=function(s){this.bShiftCenterTransition=s;};V.prototype.onAfterRendering=function(){this.domRef=this.getDomRef();this._handleSizeChange();};V.transitions=V.transitions||{};return V;});sap.ui.require.preload({
/*!!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros
 * @version 1.2.0 (2013/11/11 03:18 PM)
 * Released under the MIT License
 */
"sap/ui/thirdparty/hasher.js":function(){;(function(){var f=function(s){var h=(function(w){var P=25,d=w.document,a=w.history,S=s.Signal,h,_,b,c,g,i,j=/#(.*)$/,k=/(\?.*)|(\#.*)/,l=/^\#/,m=(!+"\v1"),n=('onhashchange'in w)&&d.documentMode!==7,o=m&&!n,p=(location.protocol==='file:');function q(e){return String(e||'').replace(/\W/g,"\\$&");}function r(e){if(!e)return'';var D=new RegExp('^'+q(h.prependHash)+'|'+q(h.appendHash)+'$','g');return e.replace(D,'');}function t(){var D=j.exec(h.getURL());var E=(D&&D[1])||'';try{return h.raw?E:decodeURIComponent(E);}catch(e){return E;}}function u(){return(g)?g.contentWindow.frameHash:null;}function v(){g=d.createElement('iframe');g.src='about:blank';g.style.display='none';d.body.appendChild(g);}function x(){if(g&&_!==u()){var e=g.contentWindow.document;e.open();e.write('<html><head><title>'+d.title+'</title><script type="text/javascript">var frameHash="'+_+'";</script></head><body>&nbsp;</body></html>');e.close();}}function y(e,D){if(_!==e){var E=_;_=e;if(o){if(!D){x();}else{g.contentWindow.frameHash=e;}}return function(){h.changed.dispatch(r(e),r(E));};}}if(o){i=function(){var e=t(),D=u(),E;if(D!==_&&D!==e){h.setHash(r(D));}else if(e!==_){E=y(e);E&&E();}};}else{i=function(){var e=t(),D;if(e!==_){D=y(e);D&&D();}};}function z(e,D,E){if(e.addEventListener){e.addEventListener(D,E,false);}else if(e.attachEvent){e.attachEvent('on'+D,E);}}function A(e,D,E){if(e.removeEventListener){e.removeEventListener(D,E,false);}else if(e.detachEvent){e.detachEvent('on'+D,E);}}function B(e){e=Array.prototype.slice.call(arguments);var D=e.join(h.separator);D=D?h.prependHash+D.replace(l,'')+h.appendHash:D;return D;}function C(e){e=encodeURI(e);if(m&&p){e=e.replace(/\?/,'%3F');}return e;}h={VERSION:'1.2.0',raw:false,appendHash:'',prependHash:'/',separator:'/',changed:new S(),stopped:new S(),initialized:new S(),init:function(){if(c)return;_=t();if(n){z(w,'hashchange',i);}else{if(o){if(!g){v();}x();}b=setInterval(i,P);}c=true;h.initialized.dispatch(r(_));},stop:function(){if(!c)return;if(n){A(w,'hashchange',i);}else{clearInterval(b);b=null;}c=false;h.stopped.dispatch(r(_));},isActive:function(){return c;},getURL:function(){return w.location.href;},getBaseURL:function(){return h.getURL().replace(k,'');},setHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.hash='#'+e;D&&D();}},replaceHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.replace('#'+e);D&&D();}},getHash:function(){return r(_);},getHashAsArray:function(){return h.getHash().split(h.separator);},dispose:function(){h.stop();h.initialized.dispose();h.stopped.dispose();h.changed.dispose();g=h=w.hasher=null;},toString:function(){return'[hasher version="'+h.VERSION+'" hash="'+h.getHash()+'"]';}};h.initialized.memorize=true;return h;}(window));return h;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else if(typeof exports==='object'){module.exports=f(require('signals'));}else{window['hasher']=f(window['signals']);}}());},
/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
"sap/ui/thirdparty/signals.js":function(){(function(g){function S(b,l,i,c,p){this._listener=l;this._isOnce=i;this.context=c;this._signal=b;this._priority=p||0;}S.prototype={active:true,params:null,execute:function(p){var h,b;if(this.active&&!!this._listener){b=this.params?this.params.concat(p):p;h=this._listener.apply(this.context,b);if(this._isOnce){this.detach();}}return h;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},isOnce:function(){return this._isOnce;},getListener:function(){return this._listener;},getSignal:function(){return this._signal;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function v(l,n){if(typeof l!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',n));}}function a(){this._bindings=[];this._prevParams=null;var b=this;this.dispatch=function(){a.prototype.dispatch.apply(b,arguments);};}a.prototype={VERSION:'1.0.0',memorize:false,_shouldPropagate:true,active:true,_registerListener:function(l,i,b,p){var c=this._indexOfListener(l,b),d;if(c!==-1){d=this._bindings[c];if(d.isOnce()!==i){throw new Error('You cannot add'+(i?'':'Once')+'() then add'+(!i?'':'Once')+'() the same listener without removing the relationship first.');}}else{d=new S(this,l,i,b,p);this._addBinding(d);}if(this.memorize&&this._prevParams){d.execute(this._prevParams);}return d;},_addBinding:function(b){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&b._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,b);},_indexOfListener:function(l,c){var n=this._bindings.length,b;while(n--){b=this._bindings[n];if(b._listener===l&&b.context===c){return n;}}return-1;},has:function(l,c){return this._indexOfListener(l,c)!==-1;},add:function(l,b,p){v(l,'add');return this._registerListener(l,false,b,p);},addOnce:function(l,b,p){v(l,'addOnce');return this._registerListener(l,true,b,p);},remove:function(l,c){v(l,'remove');var i=this._indexOfListener(l,c);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}return l;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(p){if(!this.active){return;}var b=Array.prototype.slice.call(arguments),n=this._bindings.length,c;if(this.memorize){this._prevParams=b;}if(!n){return;}c=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(c[n]&&this._shouldPropagate&&c[n].execute(b)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};var s=a;s.Signal=a;if(typeof define==='function'&&define.amd){define(function(){return s;});}else{g['signals']=s;}}(this));},
/** @license
 * crossroads <http://millermedeiros.github.com/crossroads.js/>
 * Author: Miller Medeiros | MIT License
 * v0.12.0 (2013/01/21 13:47)
 */
"sap/ui/thirdparty/crossroads.js":function(){(function(){var f=function(s){var c,_,U;_=(/t(.+)?/).exec('t')[1]==='';function a(i,v){if(i.indexOf){return i.indexOf(v);}else{var n=i.length;while(n--){if(i[n]===v){return n;}}return-1;}}function b(l,m){var i=a(l,m);if(i!==-1){l.splice(i,1);}}function d(v,i){return'[object '+i+']'===Object.prototype.toString.call(v);}function e(v){return d(v,'RegExp');}function g(v){return d(v,'Array');}function h(v){return typeof v==='function';}function t(v){var r;if(v===null||v==='null'){r=null;}else if(v==='true'){r=true;}else if(v==='false'){r=false;}else if(v===U||v==='undefined'){r=U;}else if(v===''||isNaN(v)){r=v;}else{r=parseFloat(v);}return r;}function j(v){var n=v.length,r=[];while(n--){r[n]=t(v[n]);}return r;}function k(i,l){var q=(i||'').replace('?','').split('&'),n=q.length,o={},m,v;while(n--){m=q[n].split('=');v=l?t(m[1]):m[1];o[m[0]]=(typeof v==='string')?decodeURIComponent(v):v;}return o;}function C(){this.bypassed=new s.Signal();this.routed=new s.Signal();this._routes=[];this._prevRoutes=[];this._piped=[];this.resetState();}C.prototype={greedy:false,greedyEnabled:true,ignoreCase:true,ignoreState:false,shouldTypecast:false,normalizeFn:null,resetState:function(){this._prevRoutes.length=0;this._prevMatchedRequest=null;this._prevBypassedRequest=null;},create:function(){return new C();},addRoute:function(p,i,l){var r=new R(p,i,l,this);this._sortedInsert(r);return r;},removeRoute:function(r){b(this._routes,r);r._destroy();},removeAllRoutes:function(){var n=this.getNumRoutes();while(n--){this._routes[n]._destroy();}this._routes.length=0;},parse:function(r,l){r=r||'';l=l||[];if(!this.ignoreState&&(r===this._prevMatchedRequest||r===this._prevBypassedRequest)){return;}var m=this._getMatchedRoutes(r),i=0,n=m.length,o;if(n){this._prevMatchedRequest=r;this._notifyPrevRoutes(m,r);this._prevRoutes=m;while(i<n){o=m[i];o.route.matched.dispatch.apply(o.route.matched,l.concat(o.params));o.isFirst=!i;this.routed.dispatch.apply(this.routed,l.concat([r,o]));i+=1;}}else{this._prevBypassedRequest=r;this.bypassed.dispatch.apply(this.bypassed,l.concat([r]));}this._pipeParse(r,l);},_notifyPrevRoutes:function(m,r){var i=0,p;while(p=this._prevRoutes[i++]){if(p.route.switched&&this._didSwitch(p.route,m)){p.route.switched.dispatch(r);}}},_didSwitch:function(r,m){var l,i=0;while(l=m[i++]){if(l.route===r){return false;}}return true;},_pipeParse:function(r,l){var i=0,m;while(m=this._piped[i++]){m.parse(r,l);}},getNumRoutes:function(){return this._routes.length;},_sortedInsert:function(r){var i=this._routes,n=i.length;do{--n;}while(i[n]&&r._priority<=i[n]._priority);i.splice(n+1,0,r);},_getMatchedRoutes:function(r){var i=[],l=this._routes,n=l.length,m;while(m=l[--n]){if((!i.length||this.greedy||m.greedy)&&m.match(r)){i.push({route:m,params:m._getParamsArray(r)});}if(!this.greedyEnabled&&i.length){break;}}return i;},pipe:function(o){this._piped.push(o);},unpipe:function(o){b(this._piped,o);},toString:function(){return'[crossroads numRoutes:'+this.getNumRoutes()+']';}};c=new C();c.VERSION='0.12.0';c.NORM_AS_ARRAY=function(r,v){return[v.vals_];};c.NORM_AS_OBJECT=function(r,v){return[v];};function R(p,i,l,r){var m=e(p),n=r.patternLexer;this._router=r;this._pattern=p;this._paramsIds=m?null:n.getParamIds(p);this._optionalParamsIds=m?null:n.getOptionalParamsIds(p);this._matchRegexp=m?p:n.compilePattern(p,r.ignoreCase);this.matched=new s.Signal();this.switched=new s.Signal();if(i){this.matched.add(i);}this._priority=l||0;}R.prototype={greedy:false,rules:void(0),match:function(r){r=r||'';return this._matchRegexp.test(r)&&this._validateParams(r);},_validateParams:function(r){var i=this.rules,v=this._getParamsObject(r),l;for(l in i){if(l!=='normalize_'&&i.hasOwnProperty(l)&&!this._isValidParam(r,l,v)){return false;}}return true;},_isValidParam:function(r,p,v){var i=this.rules[p],l=v[p],m=false,n=(p.indexOf('?')===0);if(l==null&&this._optionalParamsIds&&a(this._optionalParamsIds,p)!==-1){m=true;}else if(e(i)){if(n){l=v[p+'_'];}m=i.test(l);}else if(g(i)){if(n){l=v[p+'_'];}m=this._isValidArrayRule(i,l);}else if(h(i)){m=i(l,r,v);}return m;},_isValidArrayRule:function(i,v){if(!this._router.ignoreCase){return a(i,v)!==-1;}if(typeof v==='string'){v=v.toLowerCase();}var n=i.length,l,m;while(n--){l=i[n];m=(typeof l==='string')?l.toLowerCase():l;if(m===v){return true;}}return false;},_getParamsObject:function(r){var i=this._router.shouldTypecast,v=this._router.patternLexer.getParamValues(r,this._matchRegexp,i),o={},n=v.length,p,l;while(n--){l=v[n];if(this._paramsIds){p=this._paramsIds[n];if(p.indexOf('?')===0&&l){o[p+'_']=l;l=k(l,i);v[n]=l;}if(_&&l===''&&a(this._optionalParamsIds,p)!==-1){l=void(0);v[n]=l;}o[p]=l;}o[n]=l;}o.request_=i?t(r):r;o.vals_=v;return o;},_getParamsArray:function(r){var n=this.rules?this.rules.normalize_:null,p;n=n||this._router.normalizeFn;if(n&&h(n)){p=n(r,this._getParamsObject(r));}else{p=this._getParamsObject(r).vals_;}return p;},interpolate:function(r){var i=this._router.patternLexer.interpolate(this._pattern,r);if(!this._validateParams(i)){throw new Error('Generated string doesn\'t validate against `Route.rules`.');}return i;},dispose:function(){this._router.removeRoute(this);},_destroy:function(){this.matched.dispose();this.switched.dispose();this.matched=this.switched=this._pattern=this._matchRegexp=null;},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+']';}};C.prototype.patternLexer=(function(){var E=/[\\.+*?\^$\[\](){}\/'#]/g,L=/^\/|\/$/g,i=/\/$/g,P=/(?:\{|:)([^}:]+)(?:\}|:)/g,r=function(z,A,B){var D=B.lastIndexOf("__CR_RS__"),F=B.indexOf("__CR_RQ__"),G=B.indexOf("__CR_OQ__"),H=B.indexOf("\\/",A),I=Math.min(G===-1?B.length:G,F===-1?B.length:F),J=A+z.length;if(J>=I||J<D||J<H){return T.OS.res_normal;}else{return T.OS.res_arsbq;}},T={'OS':{rgx:/([:})]|\w(?=\/))\/?(:|(?:\{\?))/g,save:'$1{{id}}$2',res:r,res_normal:'\\/?',res_arsbq:'(?:(?:\\/(?=(?:[^\\/?]+)?))|^\\/?|\\/?$)'},'RS':{rgx:/([:}])\/?(\{)/g,save:'$1{{id}}$2',res:'\\/'},'RQ':{rgx:/\{\?([^}]+)\}/g,res:'\\?([^#]+)'},'OQ':{rgx:/:\?([^:]+):/g,res:'(?:\\?([^#]*))?'},'OR':{rgx:/:([^:]+)\*:/g,res:'(.*)?'},'RR':{rgx:/\{([^}]+)\*\}/g,res:'(.+)'},'RP':{rgx:/\{([^}]+)\}/g,res:'([^\\/?]+)'},'OP':{rgx:/:([^:]+):/g,res:'([^\\/?]+)?\/?'}},l=1,S=2,m=3,n=l;function p(){var z,A;for(z in T){if(T.hasOwnProperty(z)){A=T[z];A.id='__CR_'+z+'__';A.save=('save'in A)?A.save.replace('{{id}}',A.id):A.id;A.rRestore=new RegExp(A.id,'g');}}}p();function o(z,A){var B=[],D;z.lastIndex=0;while(D=z.exec(A)){B.push(D[1]);}return B;}function q(z){return o(P,z);}function u(z){return o(T.OP.rgx,z);}function v(z,A){z=z||'';if(z){if(n===l){z=z.replace(L,'');}else if(n===m){z=z.replace(i,'');}z=w(z,'rgx','save');z=z.replace(E,'\\$&');z=w(z,'rRestore','res');if(n===l){z='\\/?'+z;}}if(n!==S){z+='\\/?';}return new RegExp('^'+z+'$',A?'i':'');}function w(z,A,B){var D,F;for(F in T){if(T.hasOwnProperty(F)){D=T[F];z=z.replace(D[A],D[B]);}}return z;}function x(z,A,B){var D=A.exec(z);if(D){D.shift();if(B){D=j(D);}}return D;}function y(z,A){if(typeof z!=='string'){throw new Error('Route pattern should be a string.');}var B=function(D,F){var G;F=(F.substr(0,1)==='?')?F.substr(1):F;if(A[F]!=null){if(typeof A[F]==='object'){var H=[];for(var I in A[F]){H.push(encodeURI(I+'='+A[F][I]));}G='?'+H.join('&');}else{G=String(A[F]);}if(D.indexOf('*')===-1&&G.indexOf('/')!==-1){throw new Error('Invalid value "'+G+'" for segment "'+D+'".');}}else if(D.indexOf('{')!==-1){throw new Error('The segment '+D+' is required.');}else{G='';}return G;};if(!T.OS.trail){T.OS.trail=new RegExp('(?:'+T.OS.id+')+$');}return z.replace(T.OS.rgx,T.OS.save).replace(P,B).replace(T.OS.trail,'').replace(T.OS.rRestore,'/');}return{strict:function(){n=S;},loose:function(){n=l;},legacy:function(){n=m;},getParamIds:q,getOptionalParamsIds:u,getParamValues:x,compilePattern:v,interpolate:y};}());return c;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else{window['crossroads']=f(window['signals']);}}());},
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */
"sap/ui/thirdparty/es6-promise.js":function(){(function(){"use strict";function l(x){return typeof x==='function'||(typeof x==='object'&&x!==null);}function a(x){return typeof x==='function';}function b(x){return typeof x==='object'&&x!==null;}var d;if(!Array.isArray){d=function(x){return Object.prototype.toString.call(x)==='[object Array]';};}else{d=Array.isArray;}var f=d;var g=0;var h={}.toString;var j;var k;var m=function asap(c,e){B[g]=c;B[g+1]=e;g+=2;if(g===2){if(k){k(C);}else{E();}}};function n(c){k=c;}function o(c){m=c;}var p=(typeof window!=='undefined')?window:undefined;var q=p||{};var s=q.MutationObserver||q.WebKitMutationObserver;var t=typeof process!=='undefined'&&{}.toString.call(process)==='[object process]';var u=typeof Uint8ClampedArray!=='undefined'&&typeof importScripts!=='undefined'&&typeof MessageChannel!=='undefined';function v(){var c=process.nextTick;var e=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);if(Array.isArray(e)&&e[1]==='0'&&e[2]==='10'){c=setImmediate;}return function(){c(C);};}function w(){return function(){j(C);};}function y(){var i=0;var c=new s(C);var e=document.createTextNode('');c.observe(e,{characterData:true});return function(){e.data=(i=++i%2);};}function z(){var c=new MessageChannel();c.port1.onmessage=C;return function(){c.port2.postMessage(0);};}function A(){return function(){setTimeout(C,1);};}var B=new Array(1000);function C(){for(var i=0;i<g;i+=2){var c=B[i];var e=B[i+1];c(e);B[i]=undefined;B[i+1]=undefined;}g=0;}function D(){try{var r=require;var c=r('vertx');j=c.runOnLoop||c.runOnContext;return w();}catch(e){return A();}}var E;if(t){E=v();}else if(s){E=y();}else if(u){E=z();}else if(p===undefined&&typeof require==='function'){E=D();}else{E=A();}function F(){}var G=void 0;var H=1;var I=2;var J=new Y();function K(){return new TypeError("You cannot resolve a promise with itself");}function L(){return new TypeError('A promises callback cannot return that same promise.');}function M(c){try{return c.then;}catch(e){J.error=e;return J;}}function N(c,i,r,x){try{c.call(i,r,x);}catch(e){return e;}}function O(c,e,i){m(function(c){var r=false;var x=N(i,e,function(P){if(r){return;}r=true;if(e!==P){S(c,P);}else{U(c,P);}},function(P){if(r){return;}r=true;V(c,P);},'Settle: '+(c._label||' unknown promise'));if(!r&&x){r=true;V(c,x);}},c);}function Q(c,e){if(e._state===H){U(c,e._result);}else if(e._state===I){V(c,e._result);}else{W(e,undefined,function(i){S(c,i);},function(r){V(c,r);});}}function R(c,e){if(e.constructor===c.constructor){Q(c,e);}else{var i=M(e);if(i===J){V(c,J.error);}else if(i===undefined){U(c,e);}else if(a(i)){O(c,e,i);}else{U(c,e);}}}function S(c,e){if(c===e){V(c,K());}else if(l(e)){R(c,e);}else{U(c,e);}}function T(c){if(c._onerror){c._onerror(c._result);}X(c);}function U(c,e){if(c._state!==G){return;}c._result=e;c._state=H;if(c._subscribers.length!==0){m(X,c);}}function V(c,r){if(c._state!==G){return;}c._state=I;c._result=r;m(T,c);}function W(c,e,i,r){var x=c._subscribers;var P=x.length;c._onerror=null;x[P]=e;x[P+H]=i;x[P+I]=r;if(P===0&&c._state){m(X,c);}}function X(c){var e=c._subscribers;var r=c._state;if(e.length===0){return;}var x,P,t1=c._result;for(var i=0;i<e.length;i+=3){x=e[i];P=e[i+r];if(x){_(r,x,P,t1);}else{P(t1);}}c._subscribers.length=0;}function Y(){this.error=null;}var Z=new Y();function $(c,i){try{return c(i);}catch(e){Z.error=e;return Z;}}function _(c,e,i,r){var x=a(i),P,t1,u1,v1;if(x){P=$(i,r);if(P===Z){v1=true;t1=P.error;P=null;}else{u1=true;}if(e===P){V(e,L());return;}}else{P=r;u1=true;}if(e._state!==G){}else if(x&&u1){S(e,P);}else if(v1){V(e,t1);}else if(c===H){U(e,P);}else if(c===I){V(e,P);}}function a1(c,r){try{r(function resolvePromise(i){S(c,i);},function rejectPromise(i){V(c,i);});}catch(e){V(c,e);}}function b1(c,i){var e=this;e._instanceConstructor=c;e.promise=new c(F);if(e._validateInput(i)){e._input=i;e.length=i.length;e._remaining=i.length;e._init();if(e.length===0){U(e.promise,e._result);}else{e.length=e.length||0;e._enumerate();if(e._remaining===0){U(e.promise,e._result);}}}else{V(e.promise,e._validationError());}}b1.prototype._validateInput=function(i){return f(i);};b1.prototype._validationError=function(){return new Error('Array Methods must be provided an Array');};b1.prototype._init=function(){this._result=new Array(this.length);};var c1=b1;b1.prototype._enumerate=function(){var e=this;var c=e.length;var r=e.promise;var x=e._input;for(var i=0;r._state===G&&i<c;i++){e._eachEntry(x[i],i);}};b1.prototype._eachEntry=function(e,i){var r=this;var c=r._instanceConstructor;if(b(e)){if(e.constructor===c&&e._state!==G){e._onerror=null;r._settledAt(e._state,i,e._result);}else{r._willSettleAt(c.resolve(e),i);}}else{r._remaining--;r._result[i]=e;}};b1.prototype._settledAt=function(c,i,e){var r=this;var x=r.promise;if(x._state===G){r._remaining--;if(c===I){V(x,e);}else{r._result[i]=e;}}if(r._remaining===0){U(x,r._result);}};b1.prototype._willSettleAt=function(c,i){var e=this;W(c,undefined,function(r){e._settledAt(H,i,r);},function(r){e._settledAt(I,i,r);});};function d1(e){return new c1(this,e).promise;}var e1=d1;function f1(e){var c=this;var r=new c(F);if(!f(e)){V(r,new TypeError('You must pass an array to race.'));return r;}var x=e.length;function P(u1){S(r,u1);}function t1(u1){V(r,u1);}for(var i=0;r._state===G&&i<x;i++){W(c.resolve(e[i]),undefined,P,t1);}return r;}var g1=f1;function h1(c){var e=this;if(c&&typeof c==='object'&&c.constructor===e){return c;}var i=new e(F);S(i,c);return i;}var i1=h1;function j1(r){var c=this;var e=new c(F);V(e,r);return e;}var k1=j1;var l1=0;function m1(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');}function n1(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}var o1=p1;function p1(r){this._id=l1++;this._state=undefined;this._result=undefined;this._subscribers=[];if(F!==r){if(!a(r)){m1();}if(!(this instanceof p1)){n1();}a1(this,r);}}p1.all=e1;p1.race=g1;p1.resolve=i1;p1.reject=k1;p1._setScheduler=n;p1._setAsap=o;p1._asap=m;p1.prototype={constructor:p1,then:function(c,e){var i=this;var r=i._state;if(r===H&&!c||r===I&&!e){return this;}var x=new this.constructor(F);var P=i._result;if(r){var t1=arguments[r-1];m(function(){_(r,x,t1,P);});}else{W(i,x,c,e);}return x;},'catch':function(c){return this.then(null,c);}};function q1(){var c;if(typeof global!=='undefined'){c=global;}else if(typeof self!=='undefined'){c=self;}else{try{c=Function('return this')();}catch(e){throw new Error('polyfill failed because global object is unavailable in this environment');}}var P=c.Promise;if(P&&Object.prototype.toString.call(P.resolve()).indexOf('[object ')===0){return;}c.Promise=o1;}var r1=q1;var s1={'Promise':o1,'polyfill':r1};if(typeof define==='function'&&define['amd']){define('sap/ui/thirdparty/es6-promise',function(){return s1;});}else if(typeof module!=='undefined'&&module['exports']){module['exports']=s1;}if(typeof this!=='undefined'){this['ES6Promise']=s1;}}).call(this);},
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
"sap/ushell/adapters/cdm/CommonDataModelAdapter.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.cdm.CommonDataModelAdapter");sap.ushell.adapters.cdm.CommonDataModelAdapter=function(u,p,a){jQuery.sap.require("sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");this.oAdapterConfiguration=a;if(a&&a.config&&a.config.siteData){this.oCdmSiteDataRequestPromise=new jQuery.Deferred().resolve(a.config.siteData);}else if(a&&a.config&&a.config.siteDataPromise){this.oCdmSiteDataRequestPromise=a.config.siteDataPromise;}else{if(a&&a.config){this.sCdmSiteUrl=a.config.siteDataUrl||a.config.cdmSiteUrl;}this.oCdmSiteDataRequestPromise=this._requestSiteData(this.sCdmSiteUrl);}};sap.ushell.adapters.cdm.CommonDataModelAdapter.prototype._requestSiteData=function(u){var s=new jQuery.Deferred();if(!u){s.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.");}else{jQuery.ajax({type:"GET",dataType:"json",url:u}).done(function(r){s.resolve(r);}).fail(function(e){jQuery.sap.log.error(e.responseText);s.reject("CDM Site was requested but could not be loaded.");});}return s.promise();};sap.ushell.adapters.cdm.CommonDataModelAdapter.prototype.getSite=function(){var d=new jQuery.Deferred();this.oCdmSiteDataRequestPromise.done(function(s){var S=jQuery.extend({},s);delete S.personalization;d.resolve(S);}).fail(function(m){d.reject(m);});return d.promise();};sap.ushell.adapters.cdm.CommonDataModelAdapter.prototype.getPersonalization=function(){var d=new jQuery.Deferred(),t=this;this.oCdmSiteDataRequestPromise.done(function(s){var S=jQuery.extend({},s);if(t.oAdapterConfiguration&&t.oAdapterConfiguration.config&&t.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete S.personalization;}if(S.personalization){d.resolve(S.personalization);}else{t._readPersonalizationDataFromStorage().done(function(p){d.resolve(p);}).fail(function(m){d.reject(m);});}}).fail(function(m){d.reject(m);});return d.promise();};sap.ushell.adapters.cdm.CommonDataModelAdapter.prototype._storePersonalizationData=function(p){var P=new jQuery.Deferred(),o=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:o.constants.keyCategory.FIXED_KEY,writeFrequency:o.constants.writeFrequency.LOW,clientStorageAllowed:true},a={container:"sap.ushell.cdm.personalization",item:"data"},b=o.getPersonalizer(a,s,c);b.setPersData(p).done(function(){jQuery.sap.log.info("Personalization data has been stored successfully.");P.resolve();}).fail(function(){P.reject("Writing personalization data failed.");});return P.promise();};sap.ushell.adapters.cdm.CommonDataModelAdapter.prototype._readPersonalizationDataFromStorage=function(){var p=new jQuery.Deferred(),P=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.LOW,clientStorageAllowed:true},o={container:"sap.ushell.cdm.personalization",item:"data"},a=P.getPersonalizer(o,s,c);a.getPersData().done(function(b){if(!b){b={};}p.resolve(b);}).fail(function(){p.reject("Fetching personalization data failed.");});return p.promise();};}());},"sap/ushell/components/container/ApplicationContainer.js":function(){(function(){"use strict";var p="sap.ushell.components.container.",c=p+"ApplicationContainer",d="sap.ushell.Container.dirtyState.",l,r;jQuery.sap.declare("sap.ushell.components.container.ApplicationContainer");jQuery.sap.require("sap.ushell.utils");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.UIComponent");function a(T){var e=sap.ushell.Container.getService("CrossApplicationNavigation");e.isUrlSupported(T.url).done(function(){T.promise.resolve({"allowed":true,"id":T.id});}).fail(function(){T.promise.resolve({"allowed":false,"id":T.id});});}function i(){jQuery.sap.require("sap.m.MessagePopover");var M={"asyncURLHandler":sap.ushell.components.container.ApplicationContainer.prototype._adaptIsUrlSupportedResultForMessagePopover};if(sap.m.MessagePopover&&sap.m.MessagePopover.setDefaultHandlers){sap.m.MessagePopover.setDefaultHandlers(M);}}sap.ui.getCore().getEventBus().subscribe("sap.ushell","coreResourcesFullyLoaded",i);l=new sap.ushell.utils.Map();sap.ushell.components.container.ApplicationType={URL:"URL",WDA:"WDA",NWBC:"NWBC",TR:"TR"};function g(e){return l.get(e.getId());}function b(U){var P=jQuery.sap.getUriParameters(U).mParams,e=P["sap-xapp-state"],R;delete P["sap-xapp-state"];R={startupParameters:P};if(e){R["sap-xapp-state"]=e;}return R;}function f(K,e){if(!r){r=jQuery.sap.resources({url:jQuery.sap.getModulePath(p)+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});}return r.getText(K,e);}function h(){return new sap.ui.core.Icon({size:"2rem",src:"sap-icon://error",tooltip:sap.ushell.components.container.ApplicationContainer.prototype._getTranslatedText("an_error_has_occured")});}function j(e){var D=e.getAggregation("child"),E;if(D instanceof sap.ui.core.ComponentContainer){E=D.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");jQuery.sap.log.debug("unloading component "+E,null,c);}e.destroyAggregation("child");}function k(e,U,D){var E,F,I,L,M,G,N,V={},H,J;I=U.indexOf("?");if(I>=0){G=sap.ushell.components.container.ApplicationContainer.prototype._getParameterMap(U);V=G.startupParameters;U=U.slice(0,I);}if(U.slice(-1)!=='/'){U+='/';}if(/\.view\.(\w+)$/i.test(D)){M=/^SAPUI5=(?:([^\/]+)\/)?([^\/]+)\.view\.(\w+)$/i.exec(D);if(!M){jQuery.sap.log.error("Invalid SAPUI5 URL",D,c);return sap.ushell.components.container.ApplicationContainer.prototype._createErrorControl();}N=M[1];H=M[2];J=M[3].toUpperCase();if(N){H=N+"."+H;}else{L=H.lastIndexOf(".");if(L<1){jQuery.sap.log.error("Missing namespace",D,c);return sap.ushell.components.container.ApplicationContainer.prototype._createErrorControl();}N=H.slice(0,L);}}else{N=D.replace(/^SAPUI5=/,"");}jQuery.sap.registerModulePath(N,U+N.replace(/\./g,'/'));sap.ushell.components.container.ApplicationContainer.prototype._destroyChild(e);if(H){if(e.getApplicationConfiguration()){V.config=e.getApplicationConfiguration();}F=sap.ui.view({id:e.getId()+"-content",type:J,viewData:V||{},viewName:H});e.fireEvent("applicationConfiguration");}else{jQuery.sap.log.debug("loading component "+N,null,c);var K=G?{startupParameters:G.startupParameters}:{startupParameters:{}};if(G&&G["sap-xapp-state"]){K["sap-xapp-state"]=G["sap-xapp-state"];}if(e.getApplicationConfiguration()){K.config=e.getApplicationConfiguration();}E=sap.ui.component({id:e.getId()+"-component",componentData:K,name:N});e.fireEvent("applicationConfiguration",{"configuration":E.getMetadata().getConfig()});F=new sap.ui.core.ComponentContainer({id:e.getId()+"-content",component:E});}F.setWidth(e.getWidth());F.setHeight(e.getHeight());F.addStyleClass("sapUShellApplicationContainer");e.setAggregation("child",F,true);return F;}function m(e,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer",e,D);},0);}function n(e,U,D){var I,E,F,G,H={startupParameters:{}},J,K=e.getComponentHandle(),P=sap.ushell.Container.getService("PluginManager"),L,M;sap.ushell.utils.addTime("createUi5Component");I=U.indexOf("?");if(I>=0){G=sap.ushell.components.container.ApplicationContainer.prototype._getParameterMap(U);H={startupParameters:G.startupParameters};if(G["sap-xapp-state"]){H["sap-xapp-state"]=G["sap-xapp-state"];}U=U.slice(0,I);}if(e.getApplicationConfiguration()){H.config=e.getApplicationConfiguration();}if(U.slice(-1)!=='/'){U+='/';}jQuery.sap.registerModulePath(D,U);sap.ushell.components.container.ApplicationContainer.prototype._destroyChild(e);J={id:e.getId()+"-component",name:D,componentData:H};jQuery.sap.log.debug("Creating component instance for "+D,JSON.stringify(J),c);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:D});if(K){E=K.getInstance(J);}else{jQuery.sap.log.error("No component handle available for '"+D+"'; fallback to component.load()",null,c);E=sap.ui.component({id:e.getId()+"-component",name:D,componentData:H});}e.fireEvent("applicationConfiguration",{"configuration":E.getMetadata().getConfig()});F=new sap.ui.core.ComponentContainer({id:e.getId()+"-content",component:E});F.setHeight(e.getHeight());F.setWidth(e.getWidth());F.addStyleClass("sapUShellApplicationContainer");e._disableRouterEventHandler=sap.ushell.components.container.ApplicationContainer.prototype._disableRouter.bind(this,E);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);e.setAggregation("child",F,true);if(P){L=P.getPluginLoadingPromise("RendererExtensions");M=L&&L.state();if(M==="pending"){L.done(function(){sap.ushell.components.container.ApplicationContainer.prototype._publishExternalEvent("componentCreated",{component:E});}).fail(function(){sap.ushell.components.container.ApplicationContainer.prototype._publishExternalEvent("componentCreated",{component:E});});}if(M==="resolved"||M==="rejected"){sap.ushell.components.container.ApplicationContainer.prototype._publishExternalEvent("componentCreated",{component:E});}}sap.ushell.components.container.ApplicationContainer.prototype._publishExternalEvent("componentCreated",{component:E});return F;}function o(e){var D;if((e instanceof sap.ui.core.Component)&&(typeof e.getRouter==="function")){D=e.getRouter();if(D&&(typeof D.stop==="function")){jQuery.sap.log.info("router stopped for instance "+e.getId());D.stop();}}}function q(U){var e=document.createElement("a"),D=jQuery.sap.getUriParameters(U).get("sap-client"),E;e.href=U;E=e.protocol+"//"+e.host;return new sap.ushell.System({alias:D?E+"?sap-client="+D:E,baseUrl:E,client:D||undefined,platform:"abap"});}function s(e,M){var T=false,D=e.getDomRef(),E=e.getApplicationType(),U,O;if(D){if(sap.ushell.utils.isApplicationTypeNWBCRelated(E)){U=URI(D.src);O=U.protocol()+"://"+U.host();T=(M.source===D.contentWindow)||(M.origin===O);}else if(E===sap.ushell.components.container.ApplicationType.URL){U=URI();O=U.protocol()+"://"+U.host();T=(M.origin===O);}}return T;}function t(S,e,O){var R=JSON.stringify({type:"request",service:e,request_id:jQuery.sap.uid(),body:{}});jQuery.sap.log.debug("Sending post message request to origin ' "+O+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");S.postMessage(R,O);}function u(e,M,D){var P=jQuery.sap.getObject("sap-ushell-config.services.PostMessage.config",0),S=D&&D.service,E;jQuery.sap.log.debug("Received post message request from origin '"+M.origin+"': "+JSON.stringify(D),null,"sap.ushell.components.container.ApplicationContainer");if(D.type!=="request"||!S||(S.indexOf("sap.ushell.services.CrossApplicationNavigation")!==0&&S.indexOf("sap.ushell.CrossApplicationNavigation")!==0&&S.indexOf("sap.ushell.ui5service.ShellUIService")!==0&&S.indexOf("sap.ushell.services.Container")!==0)){return;}E=S.split(".")[3];if(P&&P.enabled===false){jQuery.sap.log.warning("Received message for "+E+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!sap.ushell.components.container.ApplicationContainer.prototype._isTrustedPostMessageSource(e,M)){jQuery.sap.log.warning("Received message from untrusted origin '"+M.origin+"': "+JSON.stringify(M.data),null,"sap.ushell.components.container.ApplicationContainer");return;}function F(J,K){var R=JSON.stringify({type:"response",service:D.service,request_id:D.request_id,status:J,body:K});jQuery.sap.log.debug("Sending post message response to origin ' "+M.origin+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");if(typeof M.source!=="object"){jQuery.sap.log.debug("Cannot send response message to origin ' "+M.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return;}M.source.postMessage(R,M.origin);}function G(M,D){var J=new jQuery.Deferred(),K;if(D.body&&D.body.callbackMessage&&D.body.callbackMessage.service){K=sap.ushell.components.container.ApplicationContainer.prototype._backButtonPressedCallback.bind(null,M.source,D.body.callbackMessage.service,M.origin);}J.resolve(e.getShellUIService().setBackNavigation(K));return J.promise();}function H(E){switch(E){case"sap.ushell.services.CrossApplicationNavigation.hrefForExternal":return new jQuery.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal(D.body.oArgs)).promise();case"sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks":return sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(D.body.sSemanticObject,D.body.mParameters,D.body.bIgnoreFormFactors,undefined,undefined,D.body.bCompactIntents);case"sap.ushell.services.CrossApplicationNavigation.isIntentSupported":return sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(D.body.aIntents);case"sap.ushell.services.CrossApplicationNavigation.isNavigationSupported":return sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported(D.body.aIntents);case"sap.ushell.services.CrossApplicationNavigation.toExternal":return new jQuery.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(D.body.oArgs)).promise();case"sap.ushell.CrossApplicationNavigation.backToPreviousApp":sap.ushell.Container.getService("CrossApplicationNavigation").backToPreviousApp();return new jQuery.Deferred().resolve().promise();case"sap.ushell.services.CrossApplicationNavigation.backToPreviousApp":sap.ushell.Container.getService("CrossApplicationNavigation").backToPreviousApp();return new jQuery.Deferred().resolve().promise();case"sap.ushell.services.CrossApplicationNavigation.historyBack":sap.ushell.Container.getService("CrossApplicationNavigation").historyBack(D.body.iSteps);return new jQuery.Deferred().resolve().promise();case"sap.ushell.services.CrossApplicationNavigation.getAppStateData":return sap.ushell.Container.getService("CrossApplicationNavigation").getAppStateData(D.body.sAppStateKey);case"sap.ushell.ui5service.ShellUIService.setTitle":return new jQuery.Deferred().resolve(e.getShellUIService().setTitle(D.body.sTitle)).promise();case"sap.ushell.ui5service.ShellUIService.setBackNavigation":return G(M,D);case"sap.ushell.services.Container.setDirtyFlag":sap.ushell.Container.setDirtyFlag(D.body.bIsDirty);return new jQuery.Deferred().resolve().promise();default:var J="Unknown service name: '"+E+"'";return new jQuery.Deferred().reject(J).promise();}}try{H(D.service).done(function(R){F("success",{result:R});}).fail(function(J){F("error",{message:J});});}catch(I){F("error",{message:I.message});}}function v(D,M){var U=D&&D.getUi5ComponentName&&D.getUi5ComponentName();if(typeof U==="string"){jQuery.sap.log.debug("Skipping handling of postMessage 'message' event on container of UI5 application '"+U+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var E=M.data;if(typeof E==="string"){try{E=JSON.parse(M.data);}catch(e){jQuery.sap.log.debug("Message received from origin '"+M.origin+"' cannot be parsed: "+e,E,"sap.ushell.components.container.ApplicationContainer");return;}}if(E.action==="pro54_setGlobalDirty"&&localStorage.getItem(D.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!sap.ushell.components.container.ApplicationContainer.prototype._isTrustedPostMessageSource(D,M)){jQuery.sap.log.warning("Received message from untrusted origin: "+M.origin,E,"sap.ushell.components.container.ApplicationContainer");return;}jQuery.sap.log.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+D.globalDirtyStorageKey+" value: "+E.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");sap.ushell.utils.localStorageSetItem(D.globalDirtyStorageKey,E.parameters.globalDirty,true);}else{sap.ushell.components.container.ApplicationContainer.prototype._handleServiceMessageEvent(D,M,E);}}function w(e,E){var I=e.getDomRef(),D=e.getApplicationType();if(sap.ushell.utils.isApplicationTypeNWBCRelated(e.getApplicationType(D))&&I&&I.tagName==="IFRAME"){I.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),'*');E.preventDefault();}}function x(R,e,D){R.write("<div").writeControlData(e).writeAccessibilityState(e).addClass("sapUShellApplicationContainer").writeClasses(e).addStyle("height",e.getHeight()).addStyle("width",e.getWidth()).writeStyles().write(">").renderControl(D);R.write("</div>");}function y(U,D){var E=D==="TR"?"":"-NWBC";var V,F=function(){var V,M;try{V=sap.ui.getVersionInfo().version;}catch(e){jQuery.sap.log.error("sap ui version could not be determined, using sap.ui.version (core version) as fallback "+e);V=window.sap&&sap.ui&&sap.ui.version;}M=/\d+\.\d+\.\d+/.exec(V);if(M&&M[0]){V=M[0];}else{V=undefined;}return V;};V=F();if(V){U+=U.indexOf("?")>=0?"&":"?";U+="sap-shell="+encodeURIComponent("FLP"+V+E);}return U;}function z(U,e,T,R){var D,E=function(){var G=sap.ushell.utils.getParameterValueBoolean("sap-accessibility");if(G!==undefined){return G;}return sap.ushell.Container.getUser().getAccessibilityMode();},F=function(){var G=false,H=jQuery.sap.getUriParameters(U)||{mParams:{}};G=sap.ui.getCore().getConfiguration().getStatistics()&&!H.mParams.hasOwnProperty("sap-statistics");return G;};U+=U.indexOf("?")>=0?"&":"?";U+="sap-ie=edge";D=sap.ushell.Container.getUser().getTheme(sap.ushell.User.prototype.constants.themeFormat.NWBC);if(D){U+=U.indexOf("?")>=0?"&":"?";U+="sap-theme="+encodeURIComponent(D);}if(T){U+=U.indexOf("?")>=0?"&":"?";U+="sap-target-navmode="+encodeURIComponent(T);}if(E()){U+=U.indexOf("?")>=0?"&":"?";U+="sap-accessibility=X";}if(F()){U+=U.indexOf("?")>=0?"&":"?";U+="sap-statistics=true";}if(R){U+=U.indexOf("?")>=0?"&":"?";U+="sap-keepclientsession=1";}return y(U,e);}function A(R,e,U,D){var E=e.getAggregation("child");if(!E||e._bRecreateChild){E=sap.ushell.components.container.ApplicationContainer.prototype._createUi5Component(e,U,D);e._bRecreateChild=false;}sap.ushell.components.container.ApplicationContainer.prototype._renderControlInDiv(R,e,E);}function B(e,K,V){var O=e.getProperty(K);if(jQuery.sap.equal(O,V)){return;}e.setProperty(K,V);e._bRecreateChild=true;}function C(R,e,D,U,E){var L;localStorage.removeItem(e.globalDirtyStorageKey);if(E&&E.indexOf("SAPUI5.Component=")===0&&D===sap.ushell.components.container.ApplicationType.URL){A(R,e,U,E.replace(/^SAPUI5\.Component=/,""));return;}if(E&&E.indexOf("SAPUI5=")===0&&D===sap.ushell.components.container.ApplicationType.URL){sap.ushell.components.container.ApplicationContainer.prototype._renderControlInDiv(R,e,sap.ushell.components.container.ApplicationContainer.prototype._createUi5View(e,U,E));return;}jQuery.sap.log.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+E);try{U=e.getFrameSource(D,U,E);}catch(F){jQuery.sap.log.error(F.message||F,null,c);e.fireEvent("applicationConfiguration");R.renderControl(sap.ushell.components.container.ApplicationContainer.prototype._createErrorControl());return;}if(sap.ushell.Container){L=sap.ushell.components.container.ApplicationContainer.prototype._getLogoutHandler(e);if(!L){if(sap.ushell.utils.isApplicationTypeNWBCRelated(D)){L=sap.ushell.components.container.ApplicationContainer.prototype._logout.bind(null,e);l.put(e.getId(),L);sap.ushell.Container.attachLogoutEvent(L);sap.ushell.Container.addRemoteSystem(sap.ushell.components.container.ApplicationContainer.prototype._createSystemForUrl(U));}}else{if(!sap.ushell.utils.isApplicationTypeNWBCRelated(D)){sap.ushell.Container.detachLogoutEvent(L);l.remove(e.getId());}}}if(sap.ushell.utils.isApplicationTypeNWBCRelated(D)){var T=e.getTargetNavigationMode();U=sap.ushell.components.container.ApplicationContainer.prototype._adjustNwbcUrl(U,D,T,e.getIsStateful());sap.ushell.utils.localStorageSetItem(e.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}e.fireEvent("applicationConfiguration");R.write("<iframe").writeControlData(e).writeAccessibilityState(e).writeAttributeEscaped("src",U).addClass("sapUShellApplicationContainer").writeClasses(e).addStyle("height",e.getHeight()).addStyle("width",e.getWidth()).writeStyles().write("></iframe>");}sap.ui.core.Control.extend(c,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:p+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},"sap-system":{defaultValue:undefined,type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"}},events:{"applicationConfiguration":{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell"},exit:function(){var L,e=this;if(sap.ushell.Container){L=sap.ushell.components.container.ApplicationContainer.prototype._getLogoutHandler(e);if(L){sap.ushell.Container.detachLogoutEvent(L);l.remove(e.getId());}}localStorage.removeItem(e.globalDirtyStorageKey);if(e._unloadEventListener){removeEventListener("unload",e._unloadEventListener);}if(e._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);}if(e._storageEventListener){removeEventListener("storage",e._storageEventListener);}if(e._messageEventListener){removeEventListener("message",e._messageEventListener);}sap.ushell.components.container.ApplicationContainer.prototype._destroyChild(e);if(sap.ui.core.Control.exit){sap.ui.core.Control.exit.apply(e);}},init:function(){var e=this;e.globalDirtyStorageKey=d+jQuery.sap.uid();e._unloadEventListener=e.exit.bind(e);addEventListener("unload",e._unloadEventListener);e._storageEventListener=function(S){var D=e.getApplicationType();if(S.key===e.globalDirtyStorageKey&&S.newValue===sap.ushell.Container.DirtyState.PENDING&&sap.ushell.utils.isApplicationTypeNWBCRelated(D)){var I=e.getDomRef();if(I&&I.tagName==="IFRAME"){jQuery.sap.log.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");I.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),'*');}}};addEventListener('storage',e._storageEventListener);e._messageEventListener=sap.ushell.components.container.ApplicationContainer.prototype._handleMessageEvent.bind(null,e);addEventListener('message',e._messageEventListener);},renderer:function(R,e){var D=e.getApplication(),L=e.launchpadData,E;if(!e.getVisible()){sap.ushell.components.container.ApplicationContainer.prototype._renderControlInDiv(R,e);return;}if(e.error){delete e.error;sap.ushell.components.container.ApplicationContainer.prototype._renderControlInDiv(R,e,sap.ushell.components.container.ApplicationContainer.prototype._createErrorControl());}else if(!D){sap.ushell.components.container.ApplicationContainer.prototype._render(R,e,e.getApplicationType(),e.getUrl(),e.getAdditionalInformation());}else if(!D.isResolvable()){sap.ushell.components.container.ApplicationContainer.prototype._render(R,e,D.getType(),D.getUrl(),"");}else if(L){sap.ushell.components.container.ApplicationContainer.prototype._render(R,e,L.applicationType,L.Absolute.url.replace(/\?$/,""),L.applicationData);}else{jQuery.sap.log.debug("Resolving "+D.getUrl(),null,c);D.resolve(function(F){jQuery.sap.log.debug("Resolved "+D.getUrl(),JSON.stringify(F),c);e.launchpadData=F;sap.ushell.components.container.ApplicationContainer.prototype._destroyChild(e);},function(F){var G=D.getMenu().getDefaultErrorHandler();if(G){G(F);}sap.ushell.components.container.ApplicationContainer.prototype._destroyChild(e);e.error=F;});E=new sap.m.Text({text:sap.ushell.components.container.ApplicationContainer.prototype._getTranslatedText("loading",[D.getText()])});sap.ushell.components.container.ApplicationContainer.prototype._destroyChild(e);e.setAggregation("child",E);sap.ushell.components.container.ApplicationContainer.prototype._renderControlInDiv(R,e,E);}}});sap.ushell.components.container.ApplicationContainer.prototype.getFrameSource=function(e,U,D){if(!Object.prototype.hasOwnProperty.call(sap.ushell.components.container.ApplicationType,e)){throw new Error("Illegal application type: "+e);}return U;};sap.ushell.components.container.ApplicationContainer.prototype.setUrl=function(V){B(this,"url",V);};sap.ushell.components.container.ApplicationContainer.prototype.setAdditionalInformation=function(V){B(this,"additionalInformation",V);};sap.ushell.components.container.ApplicationContainer.prototype.setApplicationType=function(V){B(this,"applicationType",V);};sap.ushell.components.container.ApplicationContainer.prototype.createPostMessageRequest=function(S,M){var R=Date.now().toString();return{"type":"request","request_id":R,"service":S,"body":M};};sap.ushell.components.container.ApplicationContainer.prototype.setNewTRApplicationContext=function(U){var I=this.getDomRef();if(!I||!I.tagName==="IFRAME"){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}U=y(U);var R=this.createPostMessageRequest("sap.its.startService",{"url":U});return this.postMessageToIframe(R,I,true).catch(function(e){return Promise.reject({eventData:e,message:"Failed to change application context."});});};sap.ushell.components.container.ApplicationContainer.prototype.postMessageToIframe=function(M,I,W){var R=M.request_id;return new Promise(function(N,D){function P(E){var F;try{F=JSON.parse(E.data);if(R!==F.request_id){return;}if("success"===F.status){N(F);}else{D(F);}window.removeEventListener("message",P);}catch(e){N();jQuery.sap.log.warning("Obtained bad response from framework in response to message "+M.request_id);jQuery.sap.log.debug("Underlying framework returned invalid response data: '"+E.data+"'");}}if(W){window.addEventListener("message",P,false);I.contentWindow.postMessage(JSON.stringify(M),"*");}else{I.contentWindow.postMessage(JSON.stringify(M),"*");N();}});};sap.ushell.components.container.ApplicationContainer.prototype.setNewApplicationContext=function(e,U){var D=this["setNew"+e+"ApplicationContext"];if(D){return D.call(this,U);}return Promise.reject({message:"Unsupported application type"});};sap.ushell.components.container.ApplicationContainer.prototype.onApplicationOpened=function(N){var I=this.getIsStateful();if(!I){return Promise.resolve();}var M=this.getApplicationType();if(M==="TR"&&N!=="TR"){var e=this.getDomRef();if(!e||!e.tagName==="IFRAME"){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var R=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(R,e,false).catch(function(E){return Promise.reject({eventData:E,message:"Failed to change application context."});});}return Promise.resolve();};sap.ushell.components.container.ApplicationContainer.prototype._adaptIsUrlSupportedResultForMessagePopover=a;sap.ushell.components.container.ApplicationContainer.prototype._getLogoutHandler=g;sap.ushell.components.container.ApplicationContainer.prototype._getParameterMap=b;sap.ushell.components.container.ApplicationContainer.prototype._getTranslatedText=f;sap.ushell.components.container.ApplicationContainer.prototype._createErrorControl=h;sap.ushell.components.container.ApplicationContainer.prototype._destroyChild=j;sap.ushell.components.container.ApplicationContainer.prototype._createUi5View=k;sap.ushell.components.container.ApplicationContainer.prototype._publishExternalEvent=m;sap.ushell.components.container.ApplicationContainer.prototype._createUi5Component=n;sap.ushell.components.container.ApplicationContainer.prototype._disableRouter=o;sap.ushell.components.container.ApplicationContainer.prototype._createSystemForUrl=q;sap.ushell.components.container.ApplicationContainer.prototype._isTrustedPostMessageSource=s;sap.ushell.components.container.ApplicationContainer.prototype._handleServiceMessageEvent=u;sap.ushell.components.container.ApplicationContainer.prototype._handleMessageEvent=v;sap.ushell.components.container.ApplicationContainer.prototype._logout=w;sap.ushell.components.container.ApplicationContainer.prototype._renderControlInDiv=x;sap.ushell.components.container.ApplicationContainer.prototype._adjustNwbcUrl=z;sap.ushell.components.container.ApplicationContainer.prototype._render=C;sap.ushell.components.container.ApplicationContainer.prototype._backButtonPressedCallback=t;}());}},"sap/ushell/core-lib-preload");
