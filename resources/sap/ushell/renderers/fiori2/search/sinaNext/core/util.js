sinaDefine(['./core'],function(c){var m={};m.refuseOutdatedResponsesDecorator=function(o){var a=0;var d=function(){var r=++a;return o.apply(this,arguments).then(function(b){return new c.Promise(function(e,f){if(r!==a){return;}e(b);});},function(e){return new c.Promise(function(b,f){if(r!==a){return;}f(e);});});};d.abort=function(){++a;};return d;};m.getUrlParameter=function(n,u){if(!u)u=window.location.href;n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),a=r.exec(u);if(!a)return null;if(!a[2])return'';return decodeURIComponent(a[2].replace(/\+/g," "));};m.filterString=function(t,r){for(var i=0;i<r.length;++i){var a=r[i];while(true){var b=t.indexOf(a);if(b<0){break;}t=t.slice(0,b)+t.slice(b+a.length);}}return t;};m.generateTimestamp=function(){var p=function p(n,a){var s="000000000"+n;return s.substr(s.length-a);};var d=new Date();return''+d.getUTCFullYear()+p(d.getUTCMonth()+1,2)+p(d.getUTCDate(),2)+p(d.getUTCHours(),2)+p(d.getUTCMinutes(),2)+p(d.getUTCSeconds(),2)+p(d.getUTCMilliseconds(),3);};m.DelayedConsumer=c.defineClass({_init:function(p){p=p||{};this.timeDelay=p.timeDelay||1000;this.consumer=p.consumer||function(){};this.consumerContext=p.consumerContext||null;this.objects=[];},add:function(o){this.objects.push(o);if(this.objects.length===1){setTimeout(this.consume.bind(this),this.timeDelay);}},consume:function(){this.consumer.apply(this.consumerContext,[this.objects]);this.objects=[];}});m.dateToJson=function(d){return{type:'Timestamp',value:d.toJSON()};};m.dateFromJson=function(j){if(j.type!=='Timestamp'){throw new c.Exception('Not a timestampe '+j);}return new Date(j.value);};m.getBaseUrl=function(u){u=u||'/sap/ushell/renderers/fiori2/search/container/';var b='';var i=window.location.pathname.indexOf(u);if(i>-1){b=window.location.pathname.slice(0,i);}return b;};m.addPotentialNavTargetsToAttribute=function(s,a){var v=a.value;var b=a.metadata;if(typeof v==='string'){var e=v.match(/[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)/g);var f=v.match(/\+[\d| ]+/g);if(b.isEmailAddress){a.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:'mailto:'+v});}else if(b.isPhoneNr){a.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:'tel:'+v});}else if(e!==null&&e.length===1){a.defaultNavigationTarget=s._createNavigationTarget({label:e[0],targetUrl:'mailto:'+e[0]});}else if(f!==null&&f[0].match(/\d\d\d/)!==null){a.defaultNavigationTarget=s._createNavigationTarget({label:f[0],targetUrl:'tel:'+f[0]});}}return a;};return m;});
