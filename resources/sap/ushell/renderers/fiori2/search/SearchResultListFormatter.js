sap.ui.define(['sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchNavigationObjectForSinaNavTarget'],function(S,a,b){"use strict";var m=sap.ushell.renderers.fiori2.search.SearchResultListFormatter=function(){this.init.apply(this,arguments);};m.prototype={init:function(){},format:function(s,t,o){o=o||{};o.suppressHighlightedValues=o.suppressHighlightedValues||false;var l={};var f=[];var r=s.items;for(var i=0;i<r.length;i++){var c=r[i];var d={};var I={};var e=[];for(var z=0;z<c.detailAttributes.length;z++){var g=c.detailAttributes[z];switch(g.metadata.type.toLowerCase()){case'imageurl':d.imageUrl=g.value;break;case'geojson':d.geoJson={value:g.value,label:g.label};break;case'double':case'integer':case'string':case'longtext':case'date':case'time':case'timestamp':I={};I.name=g.label;I.value=o.suppressHighlightedValues?g.valueFormatted:g.valueHighlighted;I.valueWithoutWhyfound=g.valueFormatted;if(g.unitOfMeasure){if(o.suppressHighlightedValues||!g.unitOfMeasure.valueHighlighted){I.value+=" "+g.unitOfMeasure.valueFormatted;}else{I.value+=" "+g.unitOfMeasure.valueHighlighted;}}I.key=g.id;I.isTitle=false;I.isSortable=g.metadata.isSortable;I.attributeIndex=z;I.displayOrder=g.metadata.usage.Detail&&g.metadata.usage.Detail.displayOrder;I.whyfound=g.isHighlighted;if(g.defaultNavigationTarget){I.defaultNavigationTarget=new b(g.defaultNavigationTarget);}if(g.metadata.type.toLowerCase()==='longtext'){I.longtext=g.value;}e.push(I);}}d.key=c.key;d.keystatus=c.keystatus;d.dataSource=c.dataSource;d.dataSourceName=c.dataSource.label;if(c.defaultNavigationTarget){d.titleNavigation=new b(c.defaultNavigationTarget);}if(c.navigationTargets&&c.navigationTargets.length>0){d.navigationObjects=[];for(var j=0;j<c.navigationTargets.length;j++){d.navigationObjects.push(new b(c.navigationTargets[j]));}}d.title=o.suppressHighlightedValues?c.title.trim():c.titleHighlighted.trim();d.itemattributes=e;var h=l[c.dataSource.id]||{};l[c.dataSource.id]=h;d.layoutCache=h;d.selected=d.selected||false;d.expanded=d.expanded||false;var k={};this._formatResultForDocuments(c,k);this._formatResultForNotes(c,k);d.additionalParameters=k;f.push(d);}return f;},_formatResultForDocuments:function(r,c){var k='';c.isDocumentConnector=false;var j,d;for(j=0;j<r.detailAttributes.length;j++){d=r.detailAttributes[j];if(d.metadata.id==='FILE_PROPERTY'){c.isDocumentConnector=true;}if(d.metadata.isKey===true){if(k.length>0){k+=';';}k=k+d.metadata.id+'='+d.value;}}if(c.isDocumentConnector===true){var s=';o=sid('+r.dataSource.system+'.'+r.dataSource.client+')';var e=r.dataSource.id;c.imageUrl="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+s+"/FileLoaderFiles(ConnectorId='"+e+"',FileType='ThumbNail',SelectionParameters='"+k+"')/$value";c.titleUrl="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+s+"/FileLoaderFiles(ConnectorId='"+e+"',FileType='BinaryContent',SelectionParameters='"+k+"')/$value";var f="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+s+"/FileLoaderFiles(ConnectorId='"+e+"',FileType='SUVFile',SelectionParameters='"+k+"')/$value";c.suvlink='/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file='+encodeURIComponent(f);for(j=0;j<r.detailAttributes.length;j++){d=r.detailAttributes[j];if(d.id=='PHIO_ID_THUMBNAIL'&&d.value){c.containsThumbnail=true;}if(d.id=='PHIO_ID_SUV'&&d.value){c.containsSuvFile=true;}}}},_formatResultForNotes:function(r,c){}};return m;});
