sap.ui.define(['sap/m/Toolbar'],function(){"use strict";return sap.m.Toolbar.extend("sap.ushell.renderers.fiori2.search.controls.SearchFilterBar",{constructor:function(o){var t=this;o=jQuery.extend({},{design:sap.m.ToolbarDesign.Info},o);sap.m.Toolbar.prototype.constructor.apply(t,[o]);t.addStyleClass('sapUshellSearchFilterContextualBar');t.filterFormatter=t.filterFormatter.bind(t);t.filterText=new sap.m.Text({text:{parts:[{path:"/uiFilter/rootCondition"},{path:"/facets"}],formatter:t.filterFormatter},tooltip:{parts:[{path:"/uiFilter/rootCondition"},{path:"/facets"}],formatter:t.filterFormatter}}).addStyleClass("sapUshellSearchFilterText");t.filterText.setMaxLines(1);t.filterText.clampText();t.addContent(t.filterText);t.addContent(new sap.m.ToolbarSpacer());t.resetButton=new sap.ui.core.Icon({src:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip")}).addStyleClass("sapUshellSearchFilterResetButton");t.addContent(t.resetButton);},filterFormatter:function(r,f){if(!r||!r.hasFilters()){return'';}r=this.sortConditions(r,f);var l=[];for(var i=0;i<r.conditions.length;++i){var c=r.conditions[i];for(var j=0;j<c.conditions.length;++j){var a=c.conditions[j];l.push(a.valueLabel);}}return sap.ushell.resources.i18n.getText("filtered_by",l.join(', '));},sortConditions:function(r,f){if(f.length===0){return r;}var g=function(c){var b=c.conditions[0];if(b.attribute){return b.attribute;}else{return b.conditions[0].attribute;}};var a=function(l,b,v){for(var i=0;i<l.length;++i){var e=l[i];if(e[b]===v){return i;}}};r=r.clone();r.conditions.sort(function(b,d){var e=g(b);var h=a(f,'dimension',e);var j=g(d);var k=a(f,'dimension',j);return h-k;});var s=function(c){var b=g(c);var d=a(f,'dimension',b);if(!d)return;var e=f[d];var v=function(h,j){return a(e.items,'label',h.valueLabel)-a(e.items,'label',j.valueLabel);};c.conditions.sort(v);};for(var i=0;i<r.conditions.length;++i){var c=r.conditions[i];s(c);}return r;},renderer:'sap.m.ToolbarRenderer',onAfterRendering:function(){var t=this;t.resetButton.attachPress(function(){t.getModel().resetFilterConditions(true);});var $=jQuery('.sapUshellSearchFilterText');$.attr('aria-label',sap.ushell.resources.i18n.getText("filtered_by_aria_label"));}});});
