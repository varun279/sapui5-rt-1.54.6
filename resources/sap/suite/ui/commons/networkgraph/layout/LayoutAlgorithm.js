sap.ui.define(["sap/ui/core/Element","./Geometry"],function(E,G){var L=E.extend("sap.suite.ui.commons.networkgraph.layout.LayoutAlgorithm",{metadata:{"abstract":true,publicMethods:["isLayered","layout"]}});L.NORMALIZED_LINES_MARGIN=0.2;L.prototype._normalizeLines=function(){var g=this.getParent(),p={},k,P,i,c,n,s,l,f,a;g.getLines().forEach(function(o){k=o.getFrom()<o.getTo()?o.getFrom()+"-"+o.getTo():o.getTo()+"-"+o.getFrom();if(!p[k]){p[k]={from:o.getFromNode(),to:o.getToNode(),lines:[]};}p[k].lines.push(o);});Object.keys(p).forEach(function(K){P=p[K];if(P.lines.length===1){P.lines[0]._normalizePath();return;}n=Math.min(P.from._getCircleSize(),P.to._getCircleSize())/2;l=2*(1-L.NORMALIZED_LINES_MARGIN)/(P.lines.length-1);i=-1;P.lines.forEach(function(o){i++;c={center:o.getFromNode().getCenterPosition(),apex:o.getToNode().getCenterPosition()};s=G.getNormalizedVector(c,n);s=G.getRotatedVector(s,Math.PI/2);f=((L.NORMALIZED_LINES_MARGIN-1)+i*l)*s.apex.x;a=((L.NORMALIZED_LINES_MARGIN-1)+i*l)*s.apex.y;o.setSource({x:o.getFromNode().getCenterPosition().x+f,y:o.getFromNode().getCenterPosition().y+a});o.setTarget({x:o.getToNode().getCenterPosition().x+f,y:o.getToNode().getCenterPosition().y+a});});});};return L;});
